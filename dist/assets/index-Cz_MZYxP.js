function nE(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Sf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Th={exports:{}},Wa={},Ih={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kg;function rE(){if(kg)return De;kg=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),_=Symbol.iterator;function T(B){return B===null||typeof B!="object"?null:(B=_&&B[_]||B["@@iterator"],typeof B=="function"?B:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,S={};function A(B,Y,ve){this.props=B,this.context=Y,this.refs=S,this.updater=ve||C}A.prototype.isReactComponent={},A.prototype.setState=function(B,Y){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Y,"setState")},A.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function F(){}F.prototype=A.prototype;function D(B,Y,ve){this.props=B,this.context=Y,this.refs=S,this.updater=ve||C}var H=D.prototype=new F;H.constructor=D,N(H,A.prototype),H.isPureReactComponent=!0;var K=Array.isArray,ge=Object.prototype.hasOwnProperty,ce={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function R(B,Y,ve){var Pe,be={},je=null,qe=null;if(Y!=null)for(Pe in Y.ref!==void 0&&(qe=Y.ref),Y.key!==void 0&&(je=""+Y.key),Y)ge.call(Y,Pe)&&!O.hasOwnProperty(Pe)&&(be[Pe]=Y[Pe]);var Me=arguments.length-2;if(Me===1)be.children=ve;else if(1<Me){for(var He=Array(Me),vt=0;vt<Me;vt++)He[vt]=arguments[vt+2];be.children=He}if(B&&B.defaultProps)for(Pe in Me=B.defaultProps,Me)be[Pe]===void 0&&(be[Pe]=Me[Pe]);return{$$typeof:n,type:B,key:je,ref:qe,props:be,_owner:ce.current}}function b(B,Y){return{$$typeof:n,type:B.type,key:Y,ref:B.ref,props:B.props,_owner:B._owner}}function j(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function M(B){var Y={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ve){return Y[ve]})}var z=/\/+/g;function k(B,Y){return typeof B=="object"&&B!==null&&B.key!=null?M(""+B.key):Y.toString(36)}function ie(B,Y,ve,Pe,be){var je=typeof B;(je==="undefined"||je==="boolean")&&(B=null);var qe=!1;if(B===null)qe=!0;else switch(je){case"string":case"number":qe=!0;break;case"object":switch(B.$$typeof){case n:case e:qe=!0}}if(qe)return qe=B,be=be(qe),B=Pe===""?"."+k(qe,0):Pe,K(be)?(ve="",B!=null&&(ve=B.replace(z,"$&/")+"/"),ie(be,Y,ve,"",function(vt){return vt})):be!=null&&(j(be)&&(be=b(be,ve+(!be.key||qe&&qe.key===be.key?"":(""+be.key).replace(z,"$&/")+"/")+B)),Y.push(be)),1;if(qe=0,Pe=Pe===""?".":Pe+":",K(B))for(var Me=0;Me<B.length;Me++){je=B[Me];var He=Pe+k(je,Me);qe+=ie(je,Y,ve,He,be)}else if(He=T(B),typeof He=="function")for(B=He.call(B),Me=0;!(je=B.next()).done;)je=je.value,He=Pe+k(je,Me++),qe+=ie(je,Y,ve,He,be);else if(je==="object")throw Y=String(B),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return qe}function Ee(B,Y,ve){if(B==null)return B;var Pe=[],be=0;return ie(B,Pe,"","",function(je){return Y.call(ve,je,be++)}),Pe}function Ne(B){if(B._status===-1){var Y=B._result;Y=Y(),Y.then(function(ve){(B._status===0||B._status===-1)&&(B._status=1,B._result=ve)},function(ve){(B._status===0||B._status===-1)&&(B._status=2,B._result=ve)}),B._status===-1&&(B._status=0,B._result=Y)}if(B._status===1)return B._result.default;throw B._result}var Oe={current:null},ne={transition:null},pe={ReactCurrentDispatcher:Oe,ReactCurrentBatchConfig:ne,ReactCurrentOwner:ce};function ae(){throw Error("act(...) is not supported in production builds of React.")}return De.Children={map:Ee,forEach:function(B,Y,ve){Ee(B,function(){Y.apply(this,arguments)},ve)},count:function(B){var Y=0;return Ee(B,function(){Y++}),Y},toArray:function(B){return Ee(B,function(Y){return Y})||[]},only:function(B){if(!j(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},De.Component=A,De.Fragment=t,De.Profiler=o,De.PureComponent=D,De.StrictMode=i,De.Suspense=p,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,De.act=ae,De.cloneElement=function(B,Y,ve){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var Pe=N({},B.props),be=B.key,je=B.ref,qe=B._owner;if(Y!=null){if(Y.ref!==void 0&&(je=Y.ref,qe=ce.current),Y.key!==void 0&&(be=""+Y.key),B.type&&B.type.defaultProps)var Me=B.type.defaultProps;for(He in Y)ge.call(Y,He)&&!O.hasOwnProperty(He)&&(Pe[He]=Y[He]===void 0&&Me!==void 0?Me[He]:Y[He])}var He=arguments.length-2;if(He===1)Pe.children=ve;else if(1<He){Me=Array(He);for(var vt=0;vt<He;vt++)Me[vt]=arguments[vt+2];Pe.children=Me}return{$$typeof:n,type:B.type,key:be,ref:je,props:Pe,_owner:qe}},De.createContext=function(B){return B={$$typeof:d,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:l,_context:B},B.Consumer=B},De.createElement=R,De.createFactory=function(B){var Y=R.bind(null,B);return Y.type=B,Y},De.createRef=function(){return{current:null}},De.forwardRef=function(B){return{$$typeof:h,render:B}},De.isValidElement=j,De.lazy=function(B){return{$$typeof:E,_payload:{_status:-1,_result:B},_init:Ne}},De.memo=function(B,Y){return{$$typeof:v,type:B,compare:Y===void 0?null:Y}},De.startTransition=function(B){var Y=ne.transition;ne.transition={};try{B()}finally{ne.transition=Y}},De.unstable_act=ae,De.useCallback=function(B,Y){return Oe.current.useCallback(B,Y)},De.useContext=function(B){return Oe.current.useContext(B)},De.useDebugValue=function(){},De.useDeferredValue=function(B){return Oe.current.useDeferredValue(B)},De.useEffect=function(B,Y){return Oe.current.useEffect(B,Y)},De.useId=function(){return Oe.current.useId()},De.useImperativeHandle=function(B,Y,ve){return Oe.current.useImperativeHandle(B,Y,ve)},De.useInsertionEffect=function(B,Y){return Oe.current.useInsertionEffect(B,Y)},De.useLayoutEffect=function(B,Y){return Oe.current.useLayoutEffect(B,Y)},De.useMemo=function(B,Y){return Oe.current.useMemo(B,Y)},De.useReducer=function(B,Y,ve){return Oe.current.useReducer(B,Y,ve)},De.useRef=function(B){return Oe.current.useRef(B)},De.useState=function(B){return Oe.current.useState(B)},De.useSyncExternalStore=function(B,Y,ve){return Oe.current.useSyncExternalStore(B,Y,ve)},De.useTransition=function(){return Oe.current.useTransition()},De.version="18.3.1",De}var Pg;function hl(){return Pg||(Pg=1,Ih.exports=rE()),Ih.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bg;function iE(){if(bg)return Wa;bg=1;var n=hl(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(h,p,v){var E,_={},T=null,C=null;v!==void 0&&(T=""+v),p.key!==void 0&&(T=""+p.key),p.ref!==void 0&&(C=p.ref);for(E in p)i.call(p,E)&&!l.hasOwnProperty(E)&&(_[E]=p[E]);if(h&&h.defaultProps)for(E in p=h.defaultProps,p)_[E]===void 0&&(_[E]=p[E]);return{$$typeof:e,type:h,key:T,ref:C,props:_,_owner:o.current}}return Wa.Fragment=t,Wa.jsx=d,Wa.jsxs=d,Wa}var Ng;function sE(){return Ng||(Ng=1,Th.exports=iE()),Th.exports}var m=sE(),Sh={exports:{}},pn={},Ch={exports:{}},Rh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dg;function oE(){return Dg||(Dg=1,function(n){function e(ne,pe){var ae=ne.length;ne.push(pe);e:for(;0<ae;){var B=ae-1>>>1,Y=ne[B];if(0<o(Y,pe))ne[B]=pe,ne[ae]=Y,ae=B;else break e}}function t(ne){return ne.length===0?null:ne[0]}function i(ne){if(ne.length===0)return null;var pe=ne[0],ae=ne.pop();if(ae!==pe){ne[0]=ae;e:for(var B=0,Y=ne.length,ve=Y>>>1;B<ve;){var Pe=2*(B+1)-1,be=ne[Pe],je=Pe+1,qe=ne[je];if(0>o(be,ae))je<Y&&0>o(qe,be)?(ne[B]=qe,ne[je]=ae,B=je):(ne[B]=be,ne[Pe]=ae,B=Pe);else if(je<Y&&0>o(qe,ae))ne[B]=qe,ne[je]=ae,B=je;else break e}}return pe}function o(ne,pe){var ae=ne.sortIndex-pe.sortIndex;return ae!==0?ae:ne.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var d=Date,h=d.now();n.unstable_now=function(){return d.now()-h}}var p=[],v=[],E=1,_=null,T=3,C=!1,N=!1,S=!1,A=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(ne){for(var pe=t(v);pe!==null;){if(pe.callback===null)i(v);else if(pe.startTime<=ne)i(v),pe.sortIndex=pe.expirationTime,e(p,pe);else break;pe=t(v)}}function K(ne){if(S=!1,H(ne),!N)if(t(p)!==null)N=!0,Ne(ge);else{var pe=t(v);pe!==null&&Oe(K,pe.startTime-ne)}}function ge(ne,pe){N=!1,S&&(S=!1,F(R),R=-1),C=!0;var ae=T;try{for(H(pe),_=t(p);_!==null&&(!(_.expirationTime>pe)||ne&&!M());){var B=_.callback;if(typeof B=="function"){_.callback=null,T=_.priorityLevel;var Y=B(_.expirationTime<=pe);pe=n.unstable_now(),typeof Y=="function"?_.callback=Y:_===t(p)&&i(p),H(pe)}else i(p);_=t(p)}if(_!==null)var ve=!0;else{var Pe=t(v);Pe!==null&&Oe(K,Pe.startTime-pe),ve=!1}return ve}finally{_=null,T=ae,C=!1}}var ce=!1,O=null,R=-1,b=5,j=-1;function M(){return!(n.unstable_now()-j<b)}function z(){if(O!==null){var ne=n.unstable_now();j=ne;var pe=!0;try{pe=O(!0,ne)}finally{pe?k():(ce=!1,O=null)}}else ce=!1}var k;if(typeof D=="function")k=function(){D(z)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,Ee=ie.port2;ie.port1.onmessage=z,k=function(){Ee.postMessage(null)}}else k=function(){A(z,0)};function Ne(ne){O=ne,ce||(ce=!0,k())}function Oe(ne,pe){R=A(function(){ne(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ne){ne.callback=null},n.unstable_continueExecution=function(){N||C||(N=!0,Ne(ge))},n.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<ne?Math.floor(1e3/ne):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(ne){switch(T){case 1:case 2:case 3:var pe=3;break;default:pe=T}var ae=T;T=pe;try{return ne()}finally{T=ae}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ne,pe){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ae=T;T=ne;try{return pe()}finally{T=ae}},n.unstable_scheduleCallback=function(ne,pe,ae){var B=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?B+ae:B):ae=B,ne){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ae+Y,ne={id:E++,callback:pe,priorityLevel:ne,startTime:ae,expirationTime:Y,sortIndex:-1},ae>B?(ne.sortIndex=ae,e(v,ne),t(p)===null&&ne===t(v)&&(S?(F(R),R=-1):S=!0,Oe(K,ae-B))):(ne.sortIndex=Y,e(p,ne),N||C||(N=!0,Ne(ge))),ne},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(ne){var pe=T;return function(){var ae=T;T=pe;try{return ne.apply(this,arguments)}finally{T=ae}}}}(Rh)),Rh}var Og;function aE(){return Og||(Og=1,Ch.exports=oE()),Ch.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function lE(){if(jg)return pn;jg=1;var n=hl(),e=aE();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){d(r,s),d(r+"Capture",s)}function d(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},_={};function T(r){return p.call(_,r)?!0:p.call(E,r)?!1:v.test(r)?_[r]=!0:(E[r]=!0,!1)}function C(r,s,a,u){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return u?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function N(r,s,a,u){if(s===null||typeof s>"u"||C(r,s,a,u))return!0;if(u)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function S(r,s,a,u,f,y,x){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=u,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=y,this.removeEmptyString=x}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){A[r]=new S(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];A[s]=new S(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){A[r]=new S(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){A[r]=new S(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){A[r]=new S(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){A[r]=new S(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){A[r]=new S(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){A[r]=new S(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){A[r]=new S(r,5,!1,r.toLowerCase(),null,!1,!1)});var F=/[\-:]([a-z])/g;function D(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(F,D);A[s]=new S(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(F,D);A[s]=new S(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(F,D);A[s]=new S(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){A[r]=new S(r,1,!1,r.toLowerCase(),null,!1,!1)}),A.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){A[r]=new S(r,1,!1,r.toLowerCase(),null,!0,!0)});function H(r,s,a,u){var f=A.hasOwnProperty(s)?A[s]:null;(f!==null?f.type!==0:u||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(N(s,a,f,u)&&(a=null),u||f===null?T(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):f.mustUseProperty?r[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,u=f.attributeNamespace,a===null?r.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,u?r.setAttributeNS(u,s,a):r.setAttribute(s,a))))}var K=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ge=Symbol.for("react.element"),ce=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),M=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),Ee=Symbol.for("react.memo"),Ne=Symbol.for("react.lazy"),Oe=Symbol.for("react.offscreen"),ne=Symbol.iterator;function pe(r){return r===null||typeof r!="object"?null:(r=ne&&r[ne]||r["@@iterator"],typeof r=="function"?r:null)}var ae=Object.assign,B;function Y(r){if(B===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);B=s&&s[1]||""}return`
`+B+r}var ve=!1;function Pe(r,s){if(!r||ve)return"";ve=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(G){var u=G}Reflect.construct(r,[],s)}else{try{s.call()}catch(G){u=G}r.call(s.prototype)}else{try{throw Error()}catch(G){u=G}r()}}catch(G){if(G&&u&&typeof G.stack=="string"){for(var f=G.stack.split(`
`),y=u.stack.split(`
`),x=f.length-1,P=y.length-1;1<=x&&0<=P&&f[x]!==y[P];)P--;for(;1<=x&&0<=P;x--,P--)if(f[x]!==y[P]){if(x!==1||P!==1)do if(x--,P--,0>P||f[x]!==y[P]){var L=`
`+f[x].replace(" at new "," at ");return r.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",r.displayName)),L}while(1<=x&&0<=P);break}}}finally{ve=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?Y(r):""}function be(r){switch(r.tag){case 5:return Y(r.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return r=Pe(r.type,!1),r;case 11:return r=Pe(r.type.render,!1),r;case 1:return r=Pe(r.type,!0),r;default:return""}}function je(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case O:return"Fragment";case ce:return"Portal";case b:return"Profiler";case R:return"StrictMode";case k:return"Suspense";case ie:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case M:return(r.displayName||"Context")+".Consumer";case j:return(r._context.displayName||"Context")+".Provider";case z:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Ee:return s=r.displayName||null,s!==null?s:je(r.type)||"Memo";case Ne:s=r._payload,r=r._init;try{return je(r(s))}catch{}}return null}function qe(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return je(s);case 8:return s===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Me(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function He(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function vt(r){var s=He(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),u=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,y=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(x){u=""+x,y.call(this,x)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(x){u=""+x},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function ue(r){r._valueTracker||(r._valueTracker=vt(r))}function Qe(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),u="";return r&&(u=He(r)?r.checked?"true":"false":r.value),r=u,r!==a?(s.setValue(r),!0):!1}function Ye(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Vn(r,s){var a=s.checked;return ae({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function ti(r,s){var a=s.defaultValue==null?"":s.defaultValue,u=s.checked!=null?s.checked:s.defaultChecked;a=Me(s.value!=null?s.value:a),r._wrapperState={initialChecked:u,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Mn(r,s){s=s.checked,s!=null&&H(r,"checked",s,!1)}function Fn(r,s){Mn(r,s);var a=Me(s.value),u=s.type;if(a!=null)u==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(u==="submit"||u==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?en(r,s.type,a):s.hasOwnProperty("defaultValue")&&en(r,s.type,Me(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function Ps(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var u=s.type;if(!(u!=="submit"&&u!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function en(r,s,a){(s!=="number"||Ye(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var on=Array.isArray;function Cr(r,s,a,u){if(r=r.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<r.length;a++)f=s.hasOwnProperty("$"+r[a].value),r[a].selected!==f&&(r[a].selected=f),f&&u&&(r[a].defaultSelected=!0)}else{for(a=""+Me(a),s=null,f=0;f<r.length;f++){if(r[f].value===a){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function Zo(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function bs(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(on(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:Me(a)}}function Ns(r,s){var a=Me(s.value),u=Me(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),u!=null&&(r.defaultValue=""+u)}function ea(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function Tt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function It(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?Tt(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Rr,ta=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,u,f){MSApp.execUnsafeLocalFunction(function(){return r(s,a,u,f)})}:r}(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Rr=Rr||document.createElement("div"),Rr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Rr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function ni(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var Hi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gi=["Webkit","ms","Moz","O"];Object.keys(Hi).forEach(function(r){Gi.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Hi[s]=Hi[r]})});function na(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Hi.hasOwnProperty(r)&&Hi[r]?(""+s).trim():s+"px"}function ra(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var u=a.indexOf("--")===0,f=na(a,s[a],u);a==="float"&&(a="cssFloat"),u?r.setProperty(a,f):r[a]=f}}var ia=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sa(r,s){if(s){if(ia[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function oa(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ki=null;function Ds(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Os=null,Rn=null,or=null;function js(r){if(r=Pa(r)){if(typeof Os!="function")throw Error(t(280));var s=r.stateNode;s&&(s=Zl(s),Os(r.stateNode,r.type,s))}}function ar(r){Rn?or?or.push(r):or=[r]:Rn=r}function aa(){if(Rn){var r=Rn,s=or;if(or=Rn=null,js(r),s)for(r=0;r<s.length;r++)js(s[r])}}function Qi(r,s){return r(s)}function la(){}var Ar=!1;function ca(r,s,a){if(Ar)return r(s,a);Ar=!0;try{return Qi(r,s,a)}finally{Ar=!1,(Rn!==null||or!==null)&&(la(),aa())}}function mt(r,s){var a=r.stateNode;if(a===null)return null;var u=Zl(a);if(u===null)return null;a=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Ls=!1;if(h)try{var Un={};Object.defineProperty(Un,"passive",{get:function(){Ls=!0}}),window.addEventListener("test",Un,Un),window.removeEventListener("test",Un,Un)}catch{Ls=!1}function Yi(r,s,a,u,f,y,x,P,L){var G=Array.prototype.slice.call(arguments,3);try{s.apply(a,G)}catch(ee){this.onError(ee)}}var Xi=!1,Vs=null,zn=!1,ua=null,Xu={onError:function(r){Xi=!0,Vs=r}};function Ms(r,s,a,u,f,y,x,P,L){Xi=!1,Vs=null,Yi.apply(Xu,arguments)}function Il(r,s,a,u,f,y,x,P,L){if(Ms.apply(this,arguments),Xi){if(Xi){var G=Vs;Xi=!1,Vs=null}else throw Error(t(198));zn||(zn=!0,ua=G)}}function Bn(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,s.flags&4098&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function Ji(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function $n(r){if(Bn(r)!==r)throw Error(t(188))}function Sl(r){var s=r.alternate;if(!s){if(s=Bn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,u=s;;){var f=a.return;if(f===null)break;var y=f.alternate;if(y===null){if(u=f.return,u!==null){a=u;continue}break}if(f.child===y.child){for(y=f.child;y;){if(y===a)return $n(f),r;if(y===u)return $n(f),s;y=y.sibling}throw Error(t(188))}if(a.return!==u.return)a=f,u=y;else{for(var x=!1,P=f.child;P;){if(P===a){x=!0,a=f,u=y;break}if(P===u){x=!0,u=f,a=y;break}P=P.sibling}if(!x){for(P=y.child;P;){if(P===a){x=!0,a=y,u=f;break}if(P===u){x=!0,u=y,a=f;break}P=P.sibling}if(!x)throw Error(t(189))}}if(a.alternate!==u)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function da(r){return r=Sl(r),r!==null?Fs(r):null}function Fs(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Fs(r);if(s!==null)return s;r=r.sibling}return null}var Us=e.unstable_scheduleCallback,ha=e.unstable_cancelCallback,Cl=e.unstable_shouldYield,Ju=e.unstable_requestPaint,nt=e.unstable_now,Rl=e.unstable_getCurrentPriorityLevel,Zi=e.unstable_ImmediatePriority,ri=e.unstable_UserBlockingPriority,An=e.unstable_NormalPriority,fa=e.unstable_LowPriority,Al=e.unstable_IdlePriority,es=null,vn=null;function kl(r){if(vn&&typeof vn.onCommitFiberRoot=="function")try{vn.onCommitFiberRoot(es,r,void 0,(r.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:bl,pa=Math.log,Pl=Math.LN2;function bl(r){return r>>>=0,r===0?32:31-(pa(r)/Pl|0)|0}var zs=64,Bs=4194304;function ii(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function ts(r,s){var a=r.pendingLanes;if(a===0)return 0;var u=0,f=r.suspendedLanes,y=r.pingedLanes,x=a&268435455;if(x!==0){var P=x&~f;P!==0?u=ii(P):(y&=x,y!==0&&(u=ii(y)))}else x=a&~f,x!==0?u=ii(x):y!==0&&(u=ii(y));if(u===0)return 0;if(s!==0&&s!==u&&!(s&f)&&(f=u&-u,y=s&-s,f>=y||f===16&&(y&4194240)!==0))return s;if(u&4&&(u|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=u;0<s;)a=31-tn(s),f=1<<a,u|=r[a],s&=~f;return u}function Zu(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kr(r,s){for(var a=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,y=r.pendingLanes;0<y;){var x=31-tn(y),P=1<<x,L=f[x];L===-1?(!(P&a)||P&u)&&(f[x]=Zu(P,s)):L<=s&&(r.expiredLanes|=P),y&=~P}}function _n(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ns(){var r=zs;return zs<<=1,!(zs&4194240)&&(zs=64),r}function si(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function oi(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-tn(s),r[s]=a}function et(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var u=r.eventTimes;for(r=r.expirationTimes;0<a;){var f=31-tn(a),y=1<<f;s[f]=0,u[f]=-1,r[f]=-1,a&=~y}}function ai(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var u=31-tn(a),f=1<<u;f&s|r[u]&s&&(r[u]|=s),a&=~f}}var Fe=0;function li(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var Nl,$s,Dl,Ol,jl,ma=!1,lr=[],Vt=null,qn=null,Wn=null,ci=new Map,kn=new Map,cr=[],ed="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ll(r,s){switch(r){case"focusin":case"focusout":Vt=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":Wn=null;break;case"pointerover":case"pointerout":ci.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":kn.delete(s.pointerId)}}function an(r,s,a,u,f,y){return r===null||r.nativeEvent!==y?(r={blockedOn:s,domEventName:a,eventSystemFlags:u,nativeEvent:y,targetContainers:[f]},s!==null&&(s=Pa(s),s!==null&&$s(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function td(r,s,a,u,f){switch(s){case"focusin":return Vt=an(Vt,r,s,a,u,f),!0;case"dragenter":return qn=an(qn,r,s,a,u,f),!0;case"mouseover":return Wn=an(Wn,r,s,a,u,f),!0;case"pointerover":var y=f.pointerId;return ci.set(y,an(ci.get(y)||null,r,s,a,u,f)),!0;case"gotpointercapture":return y=f.pointerId,kn.set(y,an(kn.get(y)||null,r,s,a,u,f)),!0}return!1}function Vl(r){var s=as(r.target);if(s!==null){var a=Bn(s);if(a!==null){if(s=a.tag,s===13){if(s=Ji(a),s!==null){r.blockedOn=s,jl(r.priority,function(){Dl(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Pr(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=qs(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var u=new a.constructor(a.type,a);Ki=u,a.target.dispatchEvent(u),Ki=null}else return s=Pa(a),s!==null&&$s(s),r.blockedOn=a,!1;s.shift()}return!0}function rs(r,s,a){Pr(r)&&a.delete(s)}function Ml(){ma=!1,Vt!==null&&Pr(Vt)&&(Vt=null),qn!==null&&Pr(qn)&&(qn=null),Wn!==null&&Pr(Wn)&&(Wn=null),ci.forEach(rs),kn.forEach(rs)}function Hn(r,s){r.blockedOn===s&&(r.blockedOn=null,ma||(ma=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ml)))}function Gn(r){function s(f){return Hn(f,r)}if(0<lr.length){Hn(lr[0],r);for(var a=1;a<lr.length;a++){var u=lr[a];u.blockedOn===r&&(u.blockedOn=null)}}for(Vt!==null&&Hn(Vt,r),qn!==null&&Hn(qn,r),Wn!==null&&Hn(Wn,r),ci.forEach(s),kn.forEach(s),a=0;a<cr.length;a++)u=cr[a],u.blockedOn===r&&(u.blockedOn=null);for(;0<cr.length&&(a=cr[0],a.blockedOn===null);)Vl(a),a.blockedOn===null&&cr.shift()}var br=K.ReactCurrentBatchConfig,ui=!0;function at(r,s,a,u){var f=Fe,y=br.transition;br.transition=null;try{Fe=1,ga(r,s,a,u)}finally{Fe=f,br.transition=y}}function nd(r,s,a,u){var f=Fe,y=br.transition;br.transition=null;try{Fe=4,ga(r,s,a,u)}finally{Fe=f,br.transition=y}}function ga(r,s,a,u){if(ui){var f=qs(r,s,a,u);if(f===null)fd(r,s,u,is,a),Ll(r,u);else if(td(f,r,s,a,u))u.stopPropagation();else if(Ll(r,u),s&4&&-1<ed.indexOf(r)){for(;f!==null;){var y=Pa(f);if(y!==null&&Nl(y),y=qs(r,s,a,u),y===null&&fd(r,s,u,is,a),y===f)break;f=y}f!==null&&u.stopPropagation()}else fd(r,s,u,null,a)}}var is=null;function qs(r,s,a,u){if(is=null,r=Ds(u),r=as(r),r!==null)if(s=Bn(r),s===null)r=null;else if(a=s.tag,a===13){if(r=Ji(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return is=r,null}function ya(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rl()){case Zi:return 1;case ri:return 4;case An:case fa:return 16;case Al:return 536870912;default:return 16}default:return 16}}var wn=null,Ws=null,ln=null;function va(){if(ln)return ln;var r,s=Ws,a=s.length,u,f="value"in wn?wn.value:wn.textContent,y=f.length;for(r=0;r<a&&s[r]===f[r];r++);var x=a-r;for(u=1;u<=x&&s[a-u]===f[y-u];u++);return ln=f.slice(r,1<u?1-u:void 0)}function Hs(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function ur(){return!0}function _a(){return!1}function Mt(r){function s(a,u,f,y,x){this._reactName=a,this._targetInst=f,this.type=u,this.nativeEvent=y,this.target=x,this.currentTarget=null;for(var P in r)r.hasOwnProperty(P)&&(a=r[P],this[P]=a?a(y):y[P]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ur:_a,this.isPropagationStopped=_a,this}return ae(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ur)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ur)},persist:function(){},isPersistent:ur}),s}var Kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gs=Mt(Kn),dr=ae({},Kn,{view:0,detail:0}),rd=Mt(dr),Ks,Nr,di,ss=ae({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==di&&(di&&r.type==="mousemove"?(Ks=r.screenX-di.screenX,Nr=r.screenY-di.screenY):Nr=Ks=0,di=r),Ks)},movementY:function(r){return"movementY"in r?r.movementY:Nr}}),Qs=Mt(ss),wa=ae({},ss,{dataTransfer:0}),Fl=Mt(wa),Ys=ae({},dr,{relatedTarget:0}),Xs=Mt(Ys),Ul=ae({},Kn,{animationName:0,elapsedTime:0,pseudoElement:0}),Dr=Mt(Ul),zl=ae({},Kn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Bl=Mt(zl),$l=ae({},Kn,{data:0}),Ea=Mt($l),Js={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ql={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wl(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=ql[r])?!!s[r]:!1}function hr(){return Wl}var c=ae({},dr,{key:function(r){if(r.key){var s=Js[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Hs(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?nn[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hr,charCode:function(r){return r.type==="keypress"?Hs(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Hs(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),g=Mt(c),w=ae({},ss,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=Mt(w),$=ae({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hr}),Q=Mt($),se=ae({},Kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Je=Mt(se),St=ae({},ss,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ze=Mt(St),Pt=[9,13,27,32],_t=h&&"CompositionEvent"in window,Pn=null;h&&"documentMode"in document&&(Pn=document.documentMode);var En=h&&"TextEvent"in window&&!Pn,os=h&&(!_t||Pn&&8<Pn&&11>=Pn),Zs=" ",Tp=!1;function Ip(r,s){switch(r){case"keyup":return Pt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var eo=!1;function Z_(r,s){switch(r){case"compositionend":return Sp(s);case"keypress":return s.which!==32?null:(Tp=!0,Zs);case"textInput":return r=s.data,r===Zs&&Tp?null:r;default:return null}}function ew(r,s){if(eo)return r==="compositionend"||!_t&&Ip(r,s)?(r=va(),ln=Ws=wn=null,eo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return os&&s.locale!=="ko"?null:s.data;default:return null}}var tw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cp(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!tw[r.type]:s==="textarea"}function Rp(r,s,a,u){ar(u),s=Yl(s,"onChange"),0<s.length&&(a=new Gs("onChange","change",null,a,u),r.push({event:a,listeners:s}))}var xa=null,Ta=null;function nw(r){Wp(r,0)}function Hl(r){var s=so(r);if(Qe(s))return r}function rw(r,s){if(r==="change")return s}var Ap=!1;if(h){var id;if(h){var sd="oninput"in document;if(!sd){var kp=document.createElement("div");kp.setAttribute("oninput","return;"),sd=typeof kp.oninput=="function"}id=sd}else id=!1;Ap=id&&(!document.documentMode||9<document.documentMode)}function Pp(){xa&&(xa.detachEvent("onpropertychange",bp),Ta=xa=null)}function bp(r){if(r.propertyName==="value"&&Hl(Ta)){var s=[];Rp(s,Ta,r,Ds(r)),ca(nw,s)}}function iw(r,s,a){r==="focusin"?(Pp(),xa=s,Ta=a,xa.attachEvent("onpropertychange",bp)):r==="focusout"&&Pp()}function sw(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Hl(Ta)}function ow(r,s){if(r==="click")return Hl(s)}function aw(r,s){if(r==="input"||r==="change")return Hl(s)}function lw(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Qn=typeof Object.is=="function"?Object.is:lw;function Ia(r,s){if(Qn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),u=Object.keys(s);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var f=a[u];if(!p.call(s,f)||!Qn(r[f],s[f]))return!1}return!0}function Np(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Dp(r,s){var a=Np(r);r=0;for(var u;a;){if(a.nodeType===3){if(u=r+a.textContent.length,r<=s&&u>=s)return{node:a,offset:s-r};r=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Np(a)}}function Op(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Op(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function jp(){for(var r=window,s=Ye();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=Ye(r.document)}return s}function od(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function cw(r){var s=jp(),a=r.focusedElem,u=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&Op(a.ownerDocument.documentElement,a)){if(u!==null&&od(a)){if(s=u.start,r=u.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=a.textContent.length,y=Math.min(u.start,f);u=u.end===void 0?y:Math.min(u.end,f),!r.extend&&y>u&&(f=u,u=y,y=f),f=Dp(a,y);var x=Dp(a,u);f&&x&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==x.node||r.focusOffset!==x.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),y>u?(r.addRange(s),r.extend(x.node,x.offset)):(s.setEnd(x.node,x.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var uw=h&&"documentMode"in document&&11>=document.documentMode,to=null,ad=null,Sa=null,ld=!1;function Lp(r,s,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ld||to==null||to!==Ye(u)||(u=to,"selectionStart"in u&&od(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Sa&&Ia(Sa,u)||(Sa=u,u=Yl(ad,"onSelect"),0<u.length&&(s=new Gs("onSelect","select",null,s,a),r.push({event:s,listeners:u}),s.target=to)))}function Gl(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var no={animationend:Gl("Animation","AnimationEnd"),animationiteration:Gl("Animation","AnimationIteration"),animationstart:Gl("Animation","AnimationStart"),transitionend:Gl("Transition","TransitionEnd")},cd={},Vp={};h&&(Vp=document.createElement("div").style,"AnimationEvent"in window||(delete no.animationend.animation,delete no.animationiteration.animation,delete no.animationstart.animation),"TransitionEvent"in window||delete no.transitionend.transition);function Kl(r){if(cd[r])return cd[r];if(!no[r])return r;var s=no[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in Vp)return cd[r]=s[a];return r}var Mp=Kl("animationend"),Fp=Kl("animationiteration"),Up=Kl("animationstart"),zp=Kl("transitionend"),Bp=new Map,$p="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hi(r,s){Bp.set(r,s),l(s,[r])}for(var ud=0;ud<$p.length;ud++){var dd=$p[ud],dw=dd.toLowerCase(),hw=dd[0].toUpperCase()+dd.slice(1);hi(dw,"on"+hw)}hi(Mp,"onAnimationEnd"),hi(Fp,"onAnimationIteration"),hi(Up,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi(zp,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ca));function qp(r,s,a){var u=r.type||"unknown-event";r.currentTarget=a,Il(u,s,void 0,r),r.currentTarget=null}function Wp(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var u=r[a],f=u.event;u=u.listeners;e:{var y=void 0;if(s)for(var x=u.length-1;0<=x;x--){var P=u[x],L=P.instance,G=P.currentTarget;if(P=P.listener,L!==y&&f.isPropagationStopped())break e;qp(f,P,G),y=L}else for(x=0;x<u.length;x++){if(P=u[x],L=P.instance,G=P.currentTarget,P=P.listener,L!==y&&f.isPropagationStopped())break e;qp(f,P,G),y=L}}}if(zn)throw r=ua,zn=!1,ua=null,r}function it(r,s){var a=s[_d];a===void 0&&(a=s[_d]=new Set);var u=r+"__bubble";a.has(u)||(Hp(s,r,2,!1),a.add(u))}function hd(r,s,a){var u=0;s&&(u|=4),Hp(a,r,u,s)}var Ql="_reactListening"+Math.random().toString(36).slice(2);function Ra(r){if(!r[Ql]){r[Ql]=!0,i.forEach(function(a){a!=="selectionchange"&&(fw.has(a)||hd(a,!1,r),hd(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Ql]||(s[Ql]=!0,hd("selectionchange",!1,s))}}function Hp(r,s,a,u){switch(ya(s)){case 1:var f=at;break;case 4:f=nd;break;default:f=ga}a=f.bind(null,s,a,r),f=void 0,!Ls||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(s,a,{capture:!0,passive:f}):r.addEventListener(s,a,!0):f!==void 0?r.addEventListener(s,a,{passive:f}):r.addEventListener(s,a,!1)}function fd(r,s,a,u,f){var y=u;if(!(s&1)&&!(s&2)&&u!==null)e:for(;;){if(u===null)return;var x=u.tag;if(x===3||x===4){var P=u.stateNode.containerInfo;if(P===f||P.nodeType===8&&P.parentNode===f)break;if(x===4)for(x=u.return;x!==null;){var L=x.tag;if((L===3||L===4)&&(L=x.stateNode.containerInfo,L===f||L.nodeType===8&&L.parentNode===f))return;x=x.return}for(;P!==null;){if(x=as(P),x===null)return;if(L=x.tag,L===5||L===6){u=y=x;continue e}P=P.parentNode}}u=u.return}ca(function(){var G=y,ee=Ds(a),te=[];e:{var Z=Bp.get(r);if(Z!==void 0){var le=Gs,me=r;switch(r){case"keypress":if(Hs(a)===0)break e;case"keydown":case"keyup":le=g;break;case"focusin":me="focus",le=Xs;break;case"focusout":me="blur",le=Xs;break;case"beforeblur":case"afterblur":le=Xs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Qs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Fl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=Q;break;case Mp:case Fp:case Up:le=Dr;break;case zp:le=Je;break;case"scroll":le=rd;break;case"wheel":le=ze;break;case"copy":case"cut":case"paste":le=Bl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=I}var ye=(s&4)!==0,gt=!ye&&r==="scroll",q=ye?Z!==null?Z+"Capture":null:Z;ye=[];for(var V=G,W;V!==null;){W=V;var re=W.stateNode;if(W.tag===5&&re!==null&&(W=re,q!==null&&(re=mt(V,q),re!=null&&ye.push(Aa(V,re,W)))),gt)break;V=V.return}0<ye.length&&(Z=new le(Z,me,null,a,ee),te.push({event:Z,listeners:ye}))}}if(!(s&7)){e:{if(Z=r==="mouseover"||r==="pointerover",le=r==="mouseout"||r==="pointerout",Z&&a!==Ki&&(me=a.relatedTarget||a.fromElement)&&(as(me)||me[Or]))break e;if((le||Z)&&(Z=ee.window===ee?ee:(Z=ee.ownerDocument)?Z.defaultView||Z.parentWindow:window,le?(me=a.relatedTarget||a.toElement,le=G,me=me?as(me):null,me!==null&&(gt=Bn(me),me!==gt||me.tag!==5&&me.tag!==6)&&(me=null)):(le=null,me=G),le!==me)){if(ye=Qs,re="onMouseLeave",q="onMouseEnter",V="mouse",(r==="pointerout"||r==="pointerover")&&(ye=I,re="onPointerLeave",q="onPointerEnter",V="pointer"),gt=le==null?Z:so(le),W=me==null?Z:so(me),Z=new ye(re,V+"leave",le,a,ee),Z.target=gt,Z.relatedTarget=W,re=null,as(ee)===G&&(ye=new ye(q,V+"enter",me,a,ee),ye.target=W,ye.relatedTarget=gt,re=ye),gt=re,le&&me)t:{for(ye=le,q=me,V=0,W=ye;W;W=ro(W))V++;for(W=0,re=q;re;re=ro(re))W++;for(;0<V-W;)ye=ro(ye),V--;for(;0<W-V;)q=ro(q),W--;for(;V--;){if(ye===q||q!==null&&ye===q.alternate)break t;ye=ro(ye),q=ro(q)}ye=null}else ye=null;le!==null&&Gp(te,Z,le,ye,!1),me!==null&&gt!==null&&Gp(te,gt,me,ye,!0)}}e:{if(Z=G?so(G):window,le=Z.nodeName&&Z.nodeName.toLowerCase(),le==="select"||le==="input"&&Z.type==="file")var _e=rw;else if(Cp(Z))if(Ap)_e=aw;else{_e=sw;var xe=iw}else(le=Z.nodeName)&&le.toLowerCase()==="input"&&(Z.type==="checkbox"||Z.type==="radio")&&(_e=ow);if(_e&&(_e=_e(r,G))){Rp(te,_e,a,ee);break e}xe&&xe(r,Z,G),r==="focusout"&&(xe=Z._wrapperState)&&xe.controlled&&Z.type==="number"&&en(Z,"number",Z.value)}switch(xe=G?so(G):window,r){case"focusin":(Cp(xe)||xe.contentEditable==="true")&&(to=xe,ad=G,Sa=null);break;case"focusout":Sa=ad=to=null;break;case"mousedown":ld=!0;break;case"contextmenu":case"mouseup":case"dragend":ld=!1,Lp(te,a,ee);break;case"selectionchange":if(uw)break;case"keydown":case"keyup":Lp(te,a,ee)}var Te;if(_t)e:{switch(r){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else eo?Ip(r,a)&&(Se="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(os&&a.locale!=="ko"&&(eo||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&eo&&(Te=va()):(wn=ee,Ws="value"in wn?wn.value:wn.textContent,eo=!0)),xe=Yl(G,Se),0<xe.length&&(Se=new Ea(Se,r,null,a,ee),te.push({event:Se,listeners:xe}),Te?Se.data=Te:(Te=Sp(a),Te!==null&&(Se.data=Te)))),(Te=En?Z_(r,a):ew(r,a))&&(G=Yl(G,"onBeforeInput"),0<G.length&&(ee=new Ea("onBeforeInput","beforeinput",null,a,ee),te.push({event:ee,listeners:G}),ee.data=Te))}Wp(te,s)})}function Aa(r,s,a){return{instance:r,listener:s,currentTarget:a}}function Yl(r,s){for(var a=s+"Capture",u=[];r!==null;){var f=r,y=f.stateNode;f.tag===5&&y!==null&&(f=y,y=mt(r,a),y!=null&&u.unshift(Aa(r,y,f)),y=mt(r,s),y!=null&&u.push(Aa(r,y,f))),r=r.return}return u}function ro(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Gp(r,s,a,u,f){for(var y=s._reactName,x=[];a!==null&&a!==u;){var P=a,L=P.alternate,G=P.stateNode;if(L!==null&&L===u)break;P.tag===5&&G!==null&&(P=G,f?(L=mt(a,y),L!=null&&x.unshift(Aa(a,L,P))):f||(L=mt(a,y),L!=null&&x.push(Aa(a,L,P)))),a=a.return}x.length!==0&&r.push({event:s,listeners:x})}var pw=/\r\n?/g,mw=/\u0000|\uFFFD/g;function Kp(r){return(typeof r=="string"?r:""+r).replace(pw,`
`).replace(mw,"")}function Xl(r,s,a){if(s=Kp(s),Kp(r)!==s&&a)throw Error(t(425))}function Jl(){}var pd=null,md=null;function gd(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var yd=typeof setTimeout=="function"?setTimeout:void 0,gw=typeof clearTimeout=="function"?clearTimeout:void 0,Qp=typeof Promise=="function"?Promise:void 0,yw=typeof queueMicrotask=="function"?queueMicrotask:typeof Qp<"u"?function(r){return Qp.resolve(null).then(r).catch(vw)}:yd;function vw(r){setTimeout(function(){throw r})}function vd(r,s){var a=s,u=0;do{var f=a.nextSibling;if(r.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(u===0){r.removeChild(f),Gn(s);return}u--}else a!=="$"&&a!=="$?"&&a!=="$!"||u++;a=f}while(a);Gn(s)}function fi(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function Yp(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var io=Math.random().toString(36).slice(2),fr="__reactFiber$"+io,ka="__reactProps$"+io,Or="__reactContainer$"+io,_d="__reactEvents$"+io,_w="__reactListeners$"+io,ww="__reactHandles$"+io;function as(r){var s=r[fr];if(s)return s;for(var a=r.parentNode;a;){if(s=a[Or]||a[fr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=Yp(r);r!==null;){if(a=r[fr])return a;r=Yp(r)}return s}r=a,a=r.parentNode}return null}function Pa(r){return r=r[fr]||r[Or],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function so(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Zl(r){return r[ka]||null}var wd=[],oo=-1;function pi(r){return{current:r}}function st(r){0>oo||(r.current=wd[oo],wd[oo]=null,oo--)}function rt(r,s){oo++,wd[oo]=r.current,r.current=s}var mi={},qt=pi(mi),cn=pi(!1),ls=mi;function ao(r,s){var a=r.type.contextTypes;if(!a)return mi;var u=r.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===s)return u.__reactInternalMemoizedMaskedChildContext;var f={},y;for(y in a)f[y]=s[y];return u&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function un(r){return r=r.childContextTypes,r!=null}function ec(){st(cn),st(qt)}function Xp(r,s,a){if(qt.current!==mi)throw Error(t(168));rt(qt,s),rt(cn,a)}function Jp(r,s,a){var u=r.stateNode;if(s=s.childContextTypes,typeof u.getChildContext!="function")return a;u=u.getChildContext();for(var f in u)if(!(f in s))throw Error(t(108,qe(r)||"Unknown",f));return ae({},a,u)}function tc(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||mi,ls=qt.current,rt(qt,r),rt(cn,cn.current),!0}function Zp(r,s,a){var u=r.stateNode;if(!u)throw Error(t(169));a?(r=Jp(r,s,ls),u.__reactInternalMemoizedMergedChildContext=r,st(cn),st(qt),rt(qt,r)):st(cn),rt(cn,a)}var jr=null,nc=!1,Ed=!1;function em(r){jr===null?jr=[r]:jr.push(r)}function Ew(r){nc=!0,em(r)}function gi(){if(!Ed&&jr!==null){Ed=!0;var r=0,s=Fe;try{var a=jr;for(Fe=1;r<a.length;r++){var u=a[r];do u=u(!0);while(u!==null)}jr=null,nc=!1}catch(f){throw jr!==null&&(jr=jr.slice(r+1)),Us(Zi,gi),f}finally{Fe=s,Ed=!1}}return null}var lo=[],co=0,rc=null,ic=0,bn=[],Nn=0,cs=null,Lr=1,Vr="";function us(r,s){lo[co++]=ic,lo[co++]=rc,rc=r,ic=s}function tm(r,s,a){bn[Nn++]=Lr,bn[Nn++]=Vr,bn[Nn++]=cs,cs=r;var u=Lr;r=Vr;var f=32-tn(u)-1;u&=~(1<<f),a+=1;var y=32-tn(s)+f;if(30<y){var x=f-f%5;y=(u&(1<<x)-1).toString(32),u>>=x,f-=x,Lr=1<<32-tn(s)+f|a<<f|u,Vr=y+r}else Lr=1<<y|a<<f|u,Vr=r}function xd(r){r.return!==null&&(us(r,1),tm(r,1,0))}function Td(r){for(;r===rc;)rc=lo[--co],lo[co]=null,ic=lo[--co],lo[co]=null;for(;r===cs;)cs=bn[--Nn],bn[Nn]=null,Vr=bn[--Nn],bn[Nn]=null,Lr=bn[--Nn],bn[Nn]=null}var xn=null,Tn=null,lt=!1,Yn=null;function nm(r,s){var a=Ln(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function rm(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,xn=r,Tn=fi(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,xn=r,Tn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=cs!==null?{id:Lr,overflow:Vr}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Ln(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,xn=r,Tn=null,!0):!1;default:return!1}}function Id(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Sd(r){if(lt){var s=Tn;if(s){var a=s;if(!rm(r,s)){if(Id(r))throw Error(t(418));s=fi(a.nextSibling);var u=xn;s&&rm(r,s)?nm(u,a):(r.flags=r.flags&-4097|2,lt=!1,xn=r)}}else{if(Id(r))throw Error(t(418));r.flags=r.flags&-4097|2,lt=!1,xn=r}}}function im(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;xn=r}function sc(r){if(r!==xn)return!1;if(!lt)return im(r),lt=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!gd(r.type,r.memoizedProps)),s&&(s=Tn)){if(Id(r))throw sm(),Error(t(418));for(;s;)nm(r,s),s=fi(s.nextSibling)}if(im(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){Tn=fi(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}Tn=null}}else Tn=xn?fi(r.stateNode.nextSibling):null;return!0}function sm(){for(var r=Tn;r;)r=fi(r.nextSibling)}function uo(){Tn=xn=null,lt=!1}function Cd(r){Yn===null?Yn=[r]:Yn.push(r)}var xw=K.ReactCurrentBatchConfig;function ba(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var u=a.stateNode}if(!u)throw Error(t(147,r));var f=u,y=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(x){var P=f.refs;x===null?delete P[y]:P[y]=x},s._stringRef=y,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function oc(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function om(r){var s=r._init;return s(r._payload)}function am(r){function s(q,V){if(r){var W=q.deletions;W===null?(q.deletions=[V],q.flags|=16):W.push(V)}}function a(q,V){if(!r)return null;for(;V!==null;)s(q,V),V=V.sibling;return null}function u(q,V){for(q=new Map;V!==null;)V.key!==null?q.set(V.key,V):q.set(V.index,V),V=V.sibling;return q}function f(q,V){return q=Ii(q,V),q.index=0,q.sibling=null,q}function y(q,V,W){return q.index=W,r?(W=q.alternate,W!==null?(W=W.index,W<V?(q.flags|=2,V):W):(q.flags|=2,V)):(q.flags|=1048576,V)}function x(q){return r&&q.alternate===null&&(q.flags|=2),q}function P(q,V,W,re){return V===null||V.tag!==6?(V=yh(W,q.mode,re),V.return=q,V):(V=f(V,W),V.return=q,V)}function L(q,V,W,re){var _e=W.type;return _e===O?ee(q,V,W.props.children,re,W.key):V!==null&&(V.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===Ne&&om(_e)===V.type)?(re=f(V,W.props),re.ref=ba(q,V,W),re.return=q,re):(re=Pc(W.type,W.key,W.props,null,q.mode,re),re.ref=ba(q,V,W),re.return=q,re)}function G(q,V,W,re){return V===null||V.tag!==4||V.stateNode.containerInfo!==W.containerInfo||V.stateNode.implementation!==W.implementation?(V=vh(W,q.mode,re),V.return=q,V):(V=f(V,W.children||[]),V.return=q,V)}function ee(q,V,W,re,_e){return V===null||V.tag!==7?(V=vs(W,q.mode,re,_e),V.return=q,V):(V=f(V,W),V.return=q,V)}function te(q,V,W){if(typeof V=="string"&&V!==""||typeof V=="number")return V=yh(""+V,q.mode,W),V.return=q,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case ge:return W=Pc(V.type,V.key,V.props,null,q.mode,W),W.ref=ba(q,null,V),W.return=q,W;case ce:return V=vh(V,q.mode,W),V.return=q,V;case Ne:var re=V._init;return te(q,re(V._payload),W)}if(on(V)||pe(V))return V=vs(V,q.mode,W,null),V.return=q,V;oc(q,V)}return null}function Z(q,V,W,re){var _e=V!==null?V.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return _e!==null?null:P(q,V,""+W,re);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case ge:return W.key===_e?L(q,V,W,re):null;case ce:return W.key===_e?G(q,V,W,re):null;case Ne:return _e=W._init,Z(q,V,_e(W._payload),re)}if(on(W)||pe(W))return _e!==null?null:ee(q,V,W,re,null);oc(q,W)}return null}function le(q,V,W,re,_e){if(typeof re=="string"&&re!==""||typeof re=="number")return q=q.get(W)||null,P(V,q,""+re,_e);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case ge:return q=q.get(re.key===null?W:re.key)||null,L(V,q,re,_e);case ce:return q=q.get(re.key===null?W:re.key)||null,G(V,q,re,_e);case Ne:var xe=re._init;return le(q,V,W,xe(re._payload),_e)}if(on(re)||pe(re))return q=q.get(W)||null,ee(V,q,re,_e,null);oc(V,re)}return null}function me(q,V,W,re){for(var _e=null,xe=null,Te=V,Se=V=0,Dt=null;Te!==null&&Se<W.length;Se++){Te.index>Se?(Dt=Te,Te=null):Dt=Te.sibling;var Ge=Z(q,Te,W[Se],re);if(Ge===null){Te===null&&(Te=Dt);break}r&&Te&&Ge.alternate===null&&s(q,Te),V=y(Ge,V,Se),xe===null?_e=Ge:xe.sibling=Ge,xe=Ge,Te=Dt}if(Se===W.length)return a(q,Te),lt&&us(q,Se),_e;if(Te===null){for(;Se<W.length;Se++)Te=te(q,W[Se],re),Te!==null&&(V=y(Te,V,Se),xe===null?_e=Te:xe.sibling=Te,xe=Te);return lt&&us(q,Se),_e}for(Te=u(q,Te);Se<W.length;Se++)Dt=le(Te,q,Se,W[Se],re),Dt!==null&&(r&&Dt.alternate!==null&&Te.delete(Dt.key===null?Se:Dt.key),V=y(Dt,V,Se),xe===null?_e=Dt:xe.sibling=Dt,xe=Dt);return r&&Te.forEach(function(Si){return s(q,Si)}),lt&&us(q,Se),_e}function ye(q,V,W,re){var _e=pe(W);if(typeof _e!="function")throw Error(t(150));if(W=_e.call(W),W==null)throw Error(t(151));for(var xe=_e=null,Te=V,Se=V=0,Dt=null,Ge=W.next();Te!==null&&!Ge.done;Se++,Ge=W.next()){Te.index>Se?(Dt=Te,Te=null):Dt=Te.sibling;var Si=Z(q,Te,Ge.value,re);if(Si===null){Te===null&&(Te=Dt);break}r&&Te&&Si.alternate===null&&s(q,Te),V=y(Si,V,Se),xe===null?_e=Si:xe.sibling=Si,xe=Si,Te=Dt}if(Ge.done)return a(q,Te),lt&&us(q,Se),_e;if(Te===null){for(;!Ge.done;Se++,Ge=W.next())Ge=te(q,Ge.value,re),Ge!==null&&(V=y(Ge,V,Se),xe===null?_e=Ge:xe.sibling=Ge,xe=Ge);return lt&&us(q,Se),_e}for(Te=u(q,Te);!Ge.done;Se++,Ge=W.next())Ge=le(Te,q,Se,Ge.value,re),Ge!==null&&(r&&Ge.alternate!==null&&Te.delete(Ge.key===null?Se:Ge.key),V=y(Ge,V,Se),xe===null?_e=Ge:xe.sibling=Ge,xe=Ge);return r&&Te.forEach(function(tE){return s(q,tE)}),lt&&us(q,Se),_e}function gt(q,V,W,re){if(typeof W=="object"&&W!==null&&W.type===O&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case ge:e:{for(var _e=W.key,xe=V;xe!==null;){if(xe.key===_e){if(_e=W.type,_e===O){if(xe.tag===7){a(q,xe.sibling),V=f(xe,W.props.children),V.return=q,q=V;break e}}else if(xe.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===Ne&&om(_e)===xe.type){a(q,xe.sibling),V=f(xe,W.props),V.ref=ba(q,xe,W),V.return=q,q=V;break e}a(q,xe);break}else s(q,xe);xe=xe.sibling}W.type===O?(V=vs(W.props.children,q.mode,re,W.key),V.return=q,q=V):(re=Pc(W.type,W.key,W.props,null,q.mode,re),re.ref=ba(q,V,W),re.return=q,q=re)}return x(q);case ce:e:{for(xe=W.key;V!==null;){if(V.key===xe)if(V.tag===4&&V.stateNode.containerInfo===W.containerInfo&&V.stateNode.implementation===W.implementation){a(q,V.sibling),V=f(V,W.children||[]),V.return=q,q=V;break e}else{a(q,V);break}else s(q,V);V=V.sibling}V=vh(W,q.mode,re),V.return=q,q=V}return x(q);case Ne:return xe=W._init,gt(q,V,xe(W._payload),re)}if(on(W))return me(q,V,W,re);if(pe(W))return ye(q,V,W,re);oc(q,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,V!==null&&V.tag===6?(a(q,V.sibling),V=f(V,W),V.return=q,q=V):(a(q,V),V=yh(W,q.mode,re),V.return=q,q=V),x(q)):a(q,V)}return gt}var ho=am(!0),lm=am(!1),ac=pi(null),lc=null,fo=null,Rd=null;function Ad(){Rd=fo=lc=null}function kd(r){var s=ac.current;st(ac),r._currentValue=s}function Pd(r,s,a){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===a)break;r=r.return}}function po(r,s){lc=r,Rd=fo=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&s&&(dn=!0),r.firstContext=null)}function Dn(r){var s=r._currentValue;if(Rd!==r)if(r={context:r,memoizedValue:s,next:null},fo===null){if(lc===null)throw Error(t(308));fo=r,lc.dependencies={lanes:0,firstContext:r}}else fo=fo.next=r;return s}var ds=null;function bd(r){ds===null?ds=[r]:ds.push(r)}function cm(r,s,a,u){var f=s.interleaved;return f===null?(a.next=a,bd(s)):(a.next=f.next,f.next=a),s.interleaved=a,Mr(r,u)}function Mr(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var yi=!1;function Nd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function um(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Fr(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function vi(r,s,a){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,We&2){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,Mr(r,a)}return f=u.interleaved,f===null?(s.next=s,bd(u)):(s.next=f.next,f.next=s),u.interleaved=s,Mr(r,a)}function cc(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var u=s.lanes;u&=r.pendingLanes,a|=u,s.lanes=a,ai(r,a)}}function dm(r,s){var a=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var f=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var x={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};y===null?f=y=x:y=y.next=x,a=a.next}while(a!==null);y===null?f=y=s:y=y.next=s}else f=y=s;a={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:y,shared:u.shared,effects:u.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function uc(r,s,a,u){var f=r.updateQueue;yi=!1;var y=f.firstBaseUpdate,x=f.lastBaseUpdate,P=f.shared.pending;if(P!==null){f.shared.pending=null;var L=P,G=L.next;L.next=null,x===null?y=G:x.next=G,x=L;var ee=r.alternate;ee!==null&&(ee=ee.updateQueue,P=ee.lastBaseUpdate,P!==x&&(P===null?ee.firstBaseUpdate=G:P.next=G,ee.lastBaseUpdate=L))}if(y!==null){var te=f.baseState;x=0,ee=G=L=null,P=y;do{var Z=P.lane,le=P.eventTime;if((u&Z)===Z){ee!==null&&(ee=ee.next={eventTime:le,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var me=r,ye=P;switch(Z=s,le=a,ye.tag){case 1:if(me=ye.payload,typeof me=="function"){te=me.call(le,te,Z);break e}te=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ye.payload,Z=typeof me=="function"?me.call(le,te,Z):me,Z==null)break e;te=ae({},te,Z);break e;case 2:yi=!0}}P.callback!==null&&P.lane!==0&&(r.flags|=64,Z=f.effects,Z===null?f.effects=[P]:Z.push(P))}else le={eventTime:le,lane:Z,tag:P.tag,payload:P.payload,callback:P.callback,next:null},ee===null?(G=ee=le,L=te):ee=ee.next=le,x|=Z;if(P=P.next,P===null){if(P=f.shared.pending,P===null)break;Z=P,P=Z.next,Z.next=null,f.lastBaseUpdate=Z,f.shared.pending=null}}while(!0);if(ee===null&&(L=te),f.baseState=L,f.firstBaseUpdate=G,f.lastBaseUpdate=ee,s=f.shared.interleaved,s!==null){f=s;do x|=f.lane,f=f.next;while(f!==s)}else y===null&&(f.shared.lanes=0);ps|=x,r.lanes=x,r.memoizedState=te}}function hm(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var u=r[s],f=u.callback;if(f!==null){if(u.callback=null,u=a,typeof f!="function")throw Error(t(191,f));f.call(u)}}}var Na={},pr=pi(Na),Da=pi(Na),Oa=pi(Na);function hs(r){if(r===Na)throw Error(t(174));return r}function Dd(r,s){switch(rt(Oa,s),rt(Da,r),rt(pr,Na),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:It(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=It(s,r)}st(pr),rt(pr,s)}function mo(){st(pr),st(Da),st(Oa)}function fm(r){hs(Oa.current);var s=hs(pr.current),a=It(s,r.type);s!==a&&(rt(Da,r),rt(pr,a))}function Od(r){Da.current===r&&(st(pr),st(Da))}var ct=pi(0);function dc(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var jd=[];function Ld(){for(var r=0;r<jd.length;r++)jd[r]._workInProgressVersionPrimary=null;jd.length=0}var hc=K.ReactCurrentDispatcher,Vd=K.ReactCurrentBatchConfig,fs=0,ut=null,Ct=null,bt=null,fc=!1,ja=!1,La=0,Tw=0;function Wt(){throw Error(t(321))}function Md(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!Qn(r[a],s[a]))return!1;return!0}function Fd(r,s,a,u,f,y){if(fs=y,ut=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,hc.current=r===null||r.memoizedState===null?Rw:Aw,r=a(u,f),ja){y=0;do{if(ja=!1,La=0,25<=y)throw Error(t(301));y+=1,bt=Ct=null,s.updateQueue=null,hc.current=kw,r=a(u,f)}while(ja)}if(hc.current=gc,s=Ct!==null&&Ct.next!==null,fs=0,bt=Ct=ut=null,fc=!1,s)throw Error(t(300));return r}function Ud(){var r=La!==0;return La=0,r}function mr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?ut.memoizedState=bt=r:bt=bt.next=r,bt}function On(){if(Ct===null){var r=ut.alternate;r=r!==null?r.memoizedState:null}else r=Ct.next;var s=bt===null?ut.memoizedState:bt.next;if(s!==null)bt=s,Ct=r;else{if(r===null)throw Error(t(310));Ct=r,r={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},bt===null?ut.memoizedState=bt=r:bt=bt.next=r}return bt}function Va(r,s){return typeof s=="function"?s(r):s}function zd(r){var s=On(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var u=Ct,f=u.baseQueue,y=a.pending;if(y!==null){if(f!==null){var x=f.next;f.next=y.next,y.next=x}u.baseQueue=f=y,a.pending=null}if(f!==null){y=f.next,u=u.baseState;var P=x=null,L=null,G=y;do{var ee=G.lane;if((fs&ee)===ee)L!==null&&(L=L.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),u=G.hasEagerState?G.eagerState:r(u,G.action);else{var te={lane:ee,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};L===null?(P=L=te,x=u):L=L.next=te,ut.lanes|=ee,ps|=ee}G=G.next}while(G!==null&&G!==y);L===null?x=u:L.next=P,Qn(u,s.memoizedState)||(dn=!0),s.memoizedState=u,s.baseState=x,s.baseQueue=L,a.lastRenderedState=u}if(r=a.interleaved,r!==null){f=r;do y=f.lane,ut.lanes|=y,ps|=y,f=f.next;while(f!==r)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Bd(r){var s=On(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var u=a.dispatch,f=a.pending,y=s.memoizedState;if(f!==null){a.pending=null;var x=f=f.next;do y=r(y,x.action),x=x.next;while(x!==f);Qn(y,s.memoizedState)||(dn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),a.lastRenderedState=y}return[y,u]}function pm(){}function mm(r,s){var a=ut,u=On(),f=s(),y=!Qn(u.memoizedState,f);if(y&&(u.memoizedState=f,dn=!0),u=u.queue,$d(vm.bind(null,a,u,r),[r]),u.getSnapshot!==s||y||bt!==null&&bt.memoizedState.tag&1){if(a.flags|=2048,Ma(9,ym.bind(null,a,u,f,s),void 0,null),Nt===null)throw Error(t(349));fs&30||gm(a,s,f)}return f}function gm(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=ut.updateQueue,s===null?(s={lastEffect:null,stores:null},ut.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function ym(r,s,a,u){s.value=a,s.getSnapshot=u,_m(s)&&wm(r)}function vm(r,s,a){return a(function(){_m(s)&&wm(r)})}function _m(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!Qn(r,a)}catch{return!0}}function wm(r){var s=Mr(r,1);s!==null&&er(s,r,1,-1)}function Em(r){var s=mr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:r},s.queue=r,r=r.dispatch=Cw.bind(null,ut,r),[s.memoizedState,r]}function Ma(r,s,a,u){return r={tag:r,create:s,destroy:a,deps:u,next:null},s=ut.updateQueue,s===null?(s={lastEffect:null,stores:null},ut.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(u=a.next,a.next=r,r.next=u,s.lastEffect=r)),r}function xm(){return On().memoizedState}function pc(r,s,a,u){var f=mr();ut.flags|=r,f.memoizedState=Ma(1|s,a,void 0,u===void 0?null:u)}function mc(r,s,a,u){var f=On();u=u===void 0?null:u;var y=void 0;if(Ct!==null){var x=Ct.memoizedState;if(y=x.destroy,u!==null&&Md(u,x.deps)){f.memoizedState=Ma(s,a,y,u);return}}ut.flags|=r,f.memoizedState=Ma(1|s,a,y,u)}function Tm(r,s){return pc(8390656,8,r,s)}function $d(r,s){return mc(2048,8,r,s)}function Im(r,s){return mc(4,2,r,s)}function Sm(r,s){return mc(4,4,r,s)}function Cm(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Rm(r,s,a){return a=a!=null?a.concat([r]):null,mc(4,4,Cm.bind(null,s,r),a)}function qd(){}function Am(r,s){var a=On();s=s===void 0?null:s;var u=a.memoizedState;return u!==null&&s!==null&&Md(s,u[1])?u[0]:(a.memoizedState=[r,s],r)}function km(r,s){var a=On();s=s===void 0?null:s;var u=a.memoizedState;return u!==null&&s!==null&&Md(s,u[1])?u[0]:(r=r(),a.memoizedState=[r,s],r)}function Pm(r,s,a){return fs&21?(Qn(a,s)||(a=ns(),ut.lanes|=a,ps|=a,r.baseState=!0),s):(r.baseState&&(r.baseState=!1,dn=!0),r.memoizedState=a)}function Iw(r,s){var a=Fe;Fe=a!==0&&4>a?a:4,r(!0);var u=Vd.transition;Vd.transition={};try{r(!1),s()}finally{Fe=a,Vd.transition=u}}function bm(){return On().memoizedState}function Sw(r,s,a){var u=xi(r);if(a={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null},Nm(r))Dm(s,a);else if(a=cm(r,s,a,u),a!==null){var f=sn();er(a,r,u,f),Om(a,s,u)}}function Cw(r,s,a){var u=xi(r),f={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null};if(Nm(r))Dm(s,f);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var x=s.lastRenderedState,P=y(x,a);if(f.hasEagerState=!0,f.eagerState=P,Qn(P,x)){var L=s.interleaved;L===null?(f.next=f,bd(s)):(f.next=L.next,L.next=f),s.interleaved=f;return}}catch{}finally{}a=cm(r,s,f,u),a!==null&&(f=sn(),er(a,r,u,f),Om(a,s,u))}}function Nm(r){var s=r.alternate;return r===ut||s!==null&&s===ut}function Dm(r,s){ja=fc=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function Om(r,s,a){if(a&4194240){var u=s.lanes;u&=r.pendingLanes,a|=u,s.lanes=a,ai(r,a)}}var gc={readContext:Dn,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},Rw={readContext:Dn,useCallback:function(r,s){return mr().memoizedState=[r,s===void 0?null:s],r},useContext:Dn,useEffect:Tm,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,pc(4194308,4,Cm.bind(null,s,r),a)},useLayoutEffect:function(r,s){return pc(4194308,4,r,s)},useInsertionEffect:function(r,s){return pc(4,2,r,s)},useMemo:function(r,s){var a=mr();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var u=mr();return s=a!==void 0?a(s):s,u.memoizedState=u.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},u.queue=r,r=r.dispatch=Sw.bind(null,ut,r),[u.memoizedState,r]},useRef:function(r){var s=mr();return r={current:r},s.memoizedState=r},useState:Em,useDebugValue:qd,useDeferredValue:function(r){return mr().memoizedState=r},useTransition:function(){var r=Em(!1),s=r[0];return r=Iw.bind(null,r[1]),mr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var u=ut,f=mr();if(lt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Nt===null)throw Error(t(349));fs&30||gm(u,s,a)}f.memoizedState=a;var y={value:a,getSnapshot:s};return f.queue=y,Tm(vm.bind(null,u,y,r),[r]),u.flags|=2048,Ma(9,ym.bind(null,u,y,a,s),void 0,null),a},useId:function(){var r=mr(),s=Nt.identifierPrefix;if(lt){var a=Vr,u=Lr;a=(u&~(1<<32-tn(u)-1)).toString(32)+a,s=":"+s+"R"+a,a=La++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=Tw++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},Aw={readContext:Dn,useCallback:Am,useContext:Dn,useEffect:$d,useImperativeHandle:Rm,useInsertionEffect:Im,useLayoutEffect:Sm,useMemo:km,useReducer:zd,useRef:xm,useState:function(){return zd(Va)},useDebugValue:qd,useDeferredValue:function(r){var s=On();return Pm(s,Ct.memoizedState,r)},useTransition:function(){var r=zd(Va)[0],s=On().memoizedState;return[r,s]},useMutableSource:pm,useSyncExternalStore:mm,useId:bm,unstable_isNewReconciler:!1},kw={readContext:Dn,useCallback:Am,useContext:Dn,useEffect:$d,useImperativeHandle:Rm,useInsertionEffect:Im,useLayoutEffect:Sm,useMemo:km,useReducer:Bd,useRef:xm,useState:function(){return Bd(Va)},useDebugValue:qd,useDeferredValue:function(r){var s=On();return Ct===null?s.memoizedState=r:Pm(s,Ct.memoizedState,r)},useTransition:function(){var r=Bd(Va)[0],s=On().memoizedState;return[r,s]},useMutableSource:pm,useSyncExternalStore:mm,useId:bm,unstable_isNewReconciler:!1};function Xn(r,s){if(r&&r.defaultProps){s=ae({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function Wd(r,s,a,u){s=r.memoizedState,a=a(u,s),a=a==null?s:ae({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var yc={isMounted:function(r){return(r=r._reactInternals)?Bn(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var u=sn(),f=xi(r),y=Fr(u,f);y.payload=s,a!=null&&(y.callback=a),s=vi(r,y,f),s!==null&&(er(s,r,f,u),cc(s,r,f))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var u=sn(),f=xi(r),y=Fr(u,f);y.tag=1,y.payload=s,a!=null&&(y.callback=a),s=vi(r,y,f),s!==null&&(er(s,r,f,u),cc(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=sn(),u=xi(r),f=Fr(a,u);f.tag=2,s!=null&&(f.callback=s),s=vi(r,f,u),s!==null&&(er(s,r,u,a),cc(s,r,u))}};function jm(r,s,a,u,f,y,x){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,y,x):s.prototype&&s.prototype.isPureReactComponent?!Ia(a,u)||!Ia(f,y):!0}function Lm(r,s,a){var u=!1,f=mi,y=s.contextType;return typeof y=="object"&&y!==null?y=Dn(y):(f=un(s)?ls:qt.current,u=s.contextTypes,y=(u=u!=null)?ao(r,f):mi),s=new s(a,y),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=yc,r.stateNode=s,s._reactInternals=r,u&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=y),s}function Vm(r,s,a,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,u),s.state!==r&&yc.enqueueReplaceState(s,s.state,null)}function Hd(r,s,a,u){var f=r.stateNode;f.props=a,f.state=r.memoizedState,f.refs={},Nd(r);var y=s.contextType;typeof y=="object"&&y!==null?f.context=Dn(y):(y=un(s)?ls:qt.current,f.context=ao(r,y)),f.state=r.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(Wd(r,s,y,a),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&yc.enqueueReplaceState(f,f.state,null),uc(r,a,f,u),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function go(r,s){try{var a="",u=s;do a+=be(u),u=u.return;while(u);var f=a}catch(y){f=`
Error generating stack: `+y.message+`
`+y.stack}return{value:r,source:s,stack:f,digest:null}}function Gd(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function Kd(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Pw=typeof WeakMap=="function"?WeakMap:Map;function Mm(r,s,a){a=Fr(-1,a),a.tag=3,a.payload={element:null};var u=s.value;return a.callback=function(){Ic||(Ic=!0,ch=u),Kd(r,s)},a}function Fm(r,s,a){a=Fr(-1,a),a.tag=3;var u=r.type.getDerivedStateFromError;if(typeof u=="function"){var f=s.value;a.payload=function(){return u(f)},a.callback=function(){Kd(r,s)}}var y=r.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(a.callback=function(){Kd(r,s),typeof u!="function"&&(wi===null?wi=new Set([this]):wi.add(this));var x=s.stack;this.componentDidCatch(s.value,{componentStack:x!==null?x:""})}),a}function Um(r,s,a){var u=r.pingCache;if(u===null){u=r.pingCache=new Pw;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(a)||(f.add(a),r=qw.bind(null,r,s,a),s.then(r,r))}function zm(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Bm(r,s,a,u,f){return r.mode&1?(r.flags|=65536,r.lanes=f,r):(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Fr(-1,1),s.tag=2,vi(a,s,1))),a.lanes|=1),r)}var bw=K.ReactCurrentOwner,dn=!1;function rn(r,s,a,u){s.child=r===null?lm(s,null,a,u):ho(s,r.child,a,u)}function $m(r,s,a,u,f){a=a.render;var y=s.ref;return po(s,f),u=Fd(r,s,a,u,y,f),a=Ud(),r!==null&&!dn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Ur(r,s,f)):(lt&&a&&xd(s),s.flags|=1,rn(r,s,u,f),s.child)}function qm(r,s,a,u,f){if(r===null){var y=a.type;return typeof y=="function"&&!gh(y)&&y.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=y,Wm(r,s,y,u,f)):(r=Pc(a.type,null,u,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(y=r.child,!(r.lanes&f)){var x=y.memoizedProps;if(a=a.compare,a=a!==null?a:Ia,a(x,u)&&r.ref===s.ref)return Ur(r,s,f)}return s.flags|=1,r=Ii(y,u),r.ref=s.ref,r.return=s,s.child=r}function Wm(r,s,a,u,f){if(r!==null){var y=r.memoizedProps;if(Ia(y,u)&&r.ref===s.ref)if(dn=!1,s.pendingProps=u=y,(r.lanes&f)!==0)r.flags&131072&&(dn=!0);else return s.lanes=r.lanes,Ur(r,s,f)}return Qd(r,s,a,u,f)}function Hm(r,s,a){var u=s.pendingProps,f=u.children,y=r!==null?r.memoizedState:null;if(u.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(vo,In),In|=a;else{if(!(a&1073741824))return r=y!==null?y.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,rt(vo,In),In|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=y!==null?y.baseLanes:a,rt(vo,In),In|=u}else y!==null?(u=y.baseLanes|a,s.memoizedState=null):u=a,rt(vo,In),In|=u;return rn(r,s,f,a),s.child}function Gm(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Qd(r,s,a,u,f){var y=un(a)?ls:qt.current;return y=ao(s,y),po(s,f),a=Fd(r,s,a,u,y,f),u=Ud(),r!==null&&!dn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Ur(r,s,f)):(lt&&u&&xd(s),s.flags|=1,rn(r,s,a,f),s.child)}function Km(r,s,a,u,f){if(un(a)){var y=!0;tc(s)}else y=!1;if(po(s,f),s.stateNode===null)_c(r,s),Lm(s,a,u),Hd(s,a,u,f),u=!0;else if(r===null){var x=s.stateNode,P=s.memoizedProps;x.props=P;var L=x.context,G=a.contextType;typeof G=="object"&&G!==null?G=Dn(G):(G=un(a)?ls:qt.current,G=ao(s,G));var ee=a.getDerivedStateFromProps,te=typeof ee=="function"||typeof x.getSnapshotBeforeUpdate=="function";te||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(P!==u||L!==G)&&Vm(s,x,u,G),yi=!1;var Z=s.memoizedState;x.state=Z,uc(s,u,x,f),L=s.memoizedState,P!==u||Z!==L||cn.current||yi?(typeof ee=="function"&&(Wd(s,a,ee,u),L=s.memoizedState),(P=yi||jm(s,a,P,u,Z,L,G))?(te||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(s.flags|=4194308)):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=L),x.props=u,x.state=L,x.context=G,u=P):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{x=s.stateNode,um(r,s),P=s.memoizedProps,G=s.type===s.elementType?P:Xn(s.type,P),x.props=G,te=s.pendingProps,Z=x.context,L=a.contextType,typeof L=="object"&&L!==null?L=Dn(L):(L=un(a)?ls:qt.current,L=ao(s,L));var le=a.getDerivedStateFromProps;(ee=typeof le=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(P!==te||Z!==L)&&Vm(s,x,u,L),yi=!1,Z=s.memoizedState,x.state=Z,uc(s,u,x,f);var me=s.memoizedState;P!==te||Z!==me||cn.current||yi?(typeof le=="function"&&(Wd(s,a,le,u),me=s.memoizedState),(G=yi||jm(s,a,G,u,Z,me,L)||!1)?(ee||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(u,me,L),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(u,me,L)),typeof x.componentDidUpdate=="function"&&(s.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof x.componentDidUpdate!="function"||P===r.memoizedProps&&Z===r.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||P===r.memoizedProps&&Z===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=me),x.props=u,x.state=me,x.context=L,u=G):(typeof x.componentDidUpdate!="function"||P===r.memoizedProps&&Z===r.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||P===r.memoizedProps&&Z===r.memoizedState||(s.flags|=1024),u=!1)}return Yd(r,s,a,u,y,f)}function Yd(r,s,a,u,f,y){Gm(r,s);var x=(s.flags&128)!==0;if(!u&&!x)return f&&Zp(s,a,!1),Ur(r,s,y);u=s.stateNode,bw.current=s;var P=x&&typeof a.getDerivedStateFromError!="function"?null:u.render();return s.flags|=1,r!==null&&x?(s.child=ho(s,r.child,null,y),s.child=ho(s,null,P,y)):rn(r,s,P,y),s.memoizedState=u.state,f&&Zp(s,a,!0),s.child}function Qm(r){var s=r.stateNode;s.pendingContext?Xp(r,s.pendingContext,s.pendingContext!==s.context):s.context&&Xp(r,s.context,!1),Dd(r,s.containerInfo)}function Ym(r,s,a,u,f){return uo(),Cd(f),s.flags|=256,rn(r,s,a,u),s.child}var Xd={dehydrated:null,treeContext:null,retryLane:0};function Jd(r){return{baseLanes:r,cachePool:null,transitions:null}}function Xm(r,s,a){var u=s.pendingProps,f=ct.current,y=!1,x=(s.flags&128)!==0,P;if((P=x)||(P=r!==null&&r.memoizedState===null?!1:(f&2)!==0),P?(y=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),rt(ct,f&1),r===null)return Sd(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(s.mode&1?r.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(x=u.children,r=u.fallback,y?(u=s.mode,y=s.child,x={mode:"hidden",children:x},!(u&1)&&y!==null?(y.childLanes=0,y.pendingProps=x):y=bc(x,u,0,null),r=vs(r,u,a,null),y.return=s,r.return=s,y.sibling=r,s.child=y,s.child.memoizedState=Jd(a),s.memoizedState=Xd,r):Zd(s,x));if(f=r.memoizedState,f!==null&&(P=f.dehydrated,P!==null))return Nw(r,s,x,u,P,f,a);if(y){y=u.fallback,x=s.mode,f=r.child,P=f.sibling;var L={mode:"hidden",children:u.children};return!(x&1)&&s.child!==f?(u=s.child,u.childLanes=0,u.pendingProps=L,s.deletions=null):(u=Ii(f,L),u.subtreeFlags=f.subtreeFlags&14680064),P!==null?y=Ii(P,y):(y=vs(y,x,a,null),y.flags|=2),y.return=s,u.return=s,u.sibling=y,s.child=u,u=y,y=s.child,x=r.child.memoizedState,x=x===null?Jd(a):{baseLanes:x.baseLanes|a,cachePool:null,transitions:x.transitions},y.memoizedState=x,y.childLanes=r.childLanes&~a,s.memoizedState=Xd,u}return y=r.child,r=y.sibling,u=Ii(y,{mode:"visible",children:u.children}),!(s.mode&1)&&(u.lanes=a),u.return=s,u.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=u,s.memoizedState=null,u}function Zd(r,s){return s=bc({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function vc(r,s,a,u){return u!==null&&Cd(u),ho(s,r.child,null,a),r=Zd(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function Nw(r,s,a,u,f,y,x){if(a)return s.flags&256?(s.flags&=-257,u=Gd(Error(t(422))),vc(r,s,x,u)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(y=u.fallback,f=s.mode,u=bc({mode:"visible",children:u.children},f,0,null),y=vs(y,f,x,null),y.flags|=2,u.return=s,y.return=s,u.sibling=y,s.child=u,s.mode&1&&ho(s,r.child,null,x),s.child.memoizedState=Jd(x),s.memoizedState=Xd,y);if(!(s.mode&1))return vc(r,s,x,null);if(f.data==="$!"){if(u=f.nextSibling&&f.nextSibling.dataset,u)var P=u.dgst;return u=P,y=Error(t(419)),u=Gd(y,u,void 0),vc(r,s,x,u)}if(P=(x&r.childLanes)!==0,dn||P){if(u=Nt,u!==null){switch(x&-x){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(u.suspendedLanes|x)?0:f,f!==0&&f!==y.retryLane&&(y.retryLane=f,Mr(r,f),er(u,r,f,-1))}return mh(),u=Gd(Error(t(421))),vc(r,s,x,u)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=Ww.bind(null,r),f._reactRetry=s,null):(r=y.treeContext,Tn=fi(f.nextSibling),xn=s,lt=!0,Yn=null,r!==null&&(bn[Nn++]=Lr,bn[Nn++]=Vr,bn[Nn++]=cs,Lr=r.id,Vr=r.overflow,cs=s),s=Zd(s,u.children),s.flags|=4096,s)}function Jm(r,s,a){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),Pd(r.return,s,a)}function eh(r,s,a,u,f){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:f}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=u,y.tail=a,y.tailMode=f)}function Zm(r,s,a){var u=s.pendingProps,f=u.revealOrder,y=u.tail;if(rn(r,s,u.children,a),u=ct.current,u&2)u=u&1|2,s.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Jm(r,a,s);else if(r.tag===19)Jm(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}if(rt(ct,u),!(s.mode&1))s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)r=a.alternate,r!==null&&dc(r)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),eh(s,!1,f,a,y);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&dc(r)===null){s.child=f;break}r=f.sibling,f.sibling=a,a=f,f=r}eh(s,!0,a,null,y);break;case"together":eh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function _c(r,s){!(s.mode&1)&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Ur(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),ps|=s.lanes,!(a&s.childLanes))return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=Ii(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=Ii(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function Dw(r,s,a){switch(s.tag){case 3:Qm(s),uo();break;case 5:fm(s);break;case 1:un(s.type)&&tc(s);break;case 4:Dd(s,s.stateNode.containerInfo);break;case 10:var u=s.type._context,f=s.memoizedProps.value;rt(ac,u._currentValue),u._currentValue=f;break;case 13:if(u=s.memoizedState,u!==null)return u.dehydrated!==null?(rt(ct,ct.current&1),s.flags|=128,null):a&s.child.childLanes?Xm(r,s,a):(rt(ct,ct.current&1),r=Ur(r,s,a),r!==null?r.sibling:null);rt(ct,ct.current&1);break;case 19:if(u=(a&s.childLanes)!==0,r.flags&128){if(u)return Zm(r,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),rt(ct,ct.current),u)break;return null;case 22:case 23:return s.lanes=0,Hm(r,s,a)}return Ur(r,s,a)}var eg,th,tg,ng;eg=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},th=function(){},tg=function(r,s,a,u){var f=r.memoizedProps;if(f!==u){r=s.stateNode,hs(pr.current);var y=null;switch(a){case"input":f=Vn(r,f),u=Vn(r,u),y=[];break;case"select":f=ae({},f,{value:void 0}),u=ae({},u,{value:void 0}),y=[];break;case"textarea":f=Zo(r,f),u=Zo(r,u),y=[];break;default:typeof f.onClick!="function"&&typeof u.onClick=="function"&&(r.onclick=Jl)}sa(a,u);var x;a=null;for(G in f)if(!u.hasOwnProperty(G)&&f.hasOwnProperty(G)&&f[G]!=null)if(G==="style"){var P=f[G];for(x in P)P.hasOwnProperty(x)&&(a||(a={}),a[x]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(o.hasOwnProperty(G)?y||(y=[]):(y=y||[]).push(G,null));for(G in u){var L=u[G];if(P=f!=null?f[G]:void 0,u.hasOwnProperty(G)&&L!==P&&(L!=null||P!=null))if(G==="style")if(P){for(x in P)!P.hasOwnProperty(x)||L&&L.hasOwnProperty(x)||(a||(a={}),a[x]="");for(x in L)L.hasOwnProperty(x)&&P[x]!==L[x]&&(a||(a={}),a[x]=L[x])}else a||(y||(y=[]),y.push(G,a)),a=L;else G==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,P=P?P.__html:void 0,L!=null&&P!==L&&(y=y||[]).push(G,L)):G==="children"?typeof L!="string"&&typeof L!="number"||(y=y||[]).push(G,""+L):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(o.hasOwnProperty(G)?(L!=null&&G==="onScroll"&&it("scroll",r),y||P===L||(y=[])):(y=y||[]).push(G,L))}a&&(y=y||[]).push("style",a);var G=y;(s.updateQueue=G)&&(s.flags|=4)}},ng=function(r,s,a,u){a!==u&&(s.flags|=4)};function Fa(r,s){if(!lt)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Ht(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,u=0;if(s)for(var f=r.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags&14680064,u|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=a,s}function Ow(r,s,a){var u=s.pendingProps;switch(Td(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(s),null;case 1:return un(s.type)&&ec(),Ht(s),null;case 3:return u=s.stateNode,mo(),st(cn),st(qt),Ld(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(sc(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Yn!==null&&(hh(Yn),Yn=null))),th(r,s),Ht(s),null;case 5:Od(s);var f=hs(Oa.current);if(a=s.type,r!==null&&s.stateNode!=null)tg(r,s,a,u,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!u){if(s.stateNode===null)throw Error(t(166));return Ht(s),null}if(r=hs(pr.current),sc(s)){u=s.stateNode,a=s.type;var y=s.memoizedProps;switch(u[fr]=s,u[ka]=y,r=(s.mode&1)!==0,a){case"dialog":it("cancel",u),it("close",u);break;case"iframe":case"object":case"embed":it("load",u);break;case"video":case"audio":for(f=0;f<Ca.length;f++)it(Ca[f],u);break;case"source":it("error",u);break;case"img":case"image":case"link":it("error",u),it("load",u);break;case"details":it("toggle",u);break;case"input":ti(u,y),it("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!y.multiple},it("invalid",u);break;case"textarea":bs(u,y),it("invalid",u)}sa(a,y),f=null;for(var x in y)if(y.hasOwnProperty(x)){var P=y[x];x==="children"?typeof P=="string"?u.textContent!==P&&(y.suppressHydrationWarning!==!0&&Xl(u.textContent,P,r),f=["children",P]):typeof P=="number"&&u.textContent!==""+P&&(y.suppressHydrationWarning!==!0&&Xl(u.textContent,P,r),f=["children",""+P]):o.hasOwnProperty(x)&&P!=null&&x==="onScroll"&&it("scroll",u)}switch(a){case"input":ue(u),Ps(u,y,!0);break;case"textarea":ue(u),ea(u);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(u.onclick=Jl)}u=f,s.updateQueue=u,u!==null&&(s.flags|=4)}else{x=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Tt(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=x.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof u.is=="string"?r=x.createElement(a,{is:u.is}):(r=x.createElement(a),a==="select"&&(x=r,u.multiple?x.multiple=!0:u.size&&(x.size=u.size))):r=x.createElementNS(r,a),r[fr]=s,r[ka]=u,eg(r,s,!1,!1),s.stateNode=r;e:{switch(x=oa(a,u),a){case"dialog":it("cancel",r),it("close",r),f=u;break;case"iframe":case"object":case"embed":it("load",r),f=u;break;case"video":case"audio":for(f=0;f<Ca.length;f++)it(Ca[f],r);f=u;break;case"source":it("error",r),f=u;break;case"img":case"image":case"link":it("error",r),it("load",r),f=u;break;case"details":it("toggle",r),f=u;break;case"input":ti(r,u),f=Vn(r,u),it("invalid",r);break;case"option":f=u;break;case"select":r._wrapperState={wasMultiple:!!u.multiple},f=ae({},u,{value:void 0}),it("invalid",r);break;case"textarea":bs(r,u),f=Zo(r,u),it("invalid",r);break;default:f=u}sa(a,f),P=f;for(y in P)if(P.hasOwnProperty(y)){var L=P[y];y==="style"?ra(r,L):y==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&ta(r,L)):y==="children"?typeof L=="string"?(a!=="textarea"||L!=="")&&ni(r,L):typeof L=="number"&&ni(r,""+L):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?L!=null&&y==="onScroll"&&it("scroll",r):L!=null&&H(r,y,L,x))}switch(a){case"input":ue(r),Ps(r,u,!1);break;case"textarea":ue(r),ea(r);break;case"option":u.value!=null&&r.setAttribute("value",""+Me(u.value));break;case"select":r.multiple=!!u.multiple,y=u.value,y!=null?Cr(r,!!u.multiple,y,!1):u.defaultValue!=null&&Cr(r,!!u.multiple,u.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=Jl)}switch(a){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ht(s),null;case 6:if(r&&s.stateNode!=null)ng(r,s,r.memoizedProps,u);else{if(typeof u!="string"&&s.stateNode===null)throw Error(t(166));if(a=hs(Oa.current),hs(pr.current),sc(s)){if(u=s.stateNode,a=s.memoizedProps,u[fr]=s,(y=u.nodeValue!==a)&&(r=xn,r!==null))switch(r.tag){case 3:Xl(u.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Xl(u.nodeValue,a,(r.mode&1)!==0)}y&&(s.flags|=4)}else u=(a.nodeType===9?a:a.ownerDocument).createTextNode(u),u[fr]=s,s.stateNode=u}return Ht(s),null;case 13:if(st(ct),u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(lt&&Tn!==null&&s.mode&1&&!(s.flags&128))sm(),uo(),s.flags|=98560,y=!1;else if(y=sc(s),u!==null&&u.dehydrated!==null){if(r===null){if(!y)throw Error(t(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[fr]=s}else uo(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Ht(s),y=!1}else Yn!==null&&(hh(Yn),Yn=null),y=!0;if(!y)return s.flags&65536?s:null}return s.flags&128?(s.lanes=a,s):(u=u!==null,u!==(r!==null&&r.memoizedState!==null)&&u&&(s.child.flags|=8192,s.mode&1&&(r===null||ct.current&1?Rt===0&&(Rt=3):mh())),s.updateQueue!==null&&(s.flags|=4),Ht(s),null);case 4:return mo(),th(r,s),r===null&&Ra(s.stateNode.containerInfo),Ht(s),null;case 10:return kd(s.type._context),Ht(s),null;case 17:return un(s.type)&&ec(),Ht(s),null;case 19:if(st(ct),y=s.memoizedState,y===null)return Ht(s),null;if(u=(s.flags&128)!==0,x=y.rendering,x===null)if(u)Fa(y,!1);else{if(Rt!==0||r!==null&&r.flags&128)for(r=s.child;r!==null;){if(x=dc(r),x!==null){for(s.flags|=128,Fa(y,!1),u=x.updateQueue,u!==null&&(s.updateQueue=u,s.flags|=4),s.subtreeFlags=0,u=a,a=s.child;a!==null;)y=a,r=u,y.flags&=14680066,x=y.alternate,x===null?(y.childLanes=0,y.lanes=r,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=x.childLanes,y.lanes=x.lanes,y.child=x.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=x.memoizedProps,y.memoizedState=x.memoizedState,y.updateQueue=x.updateQueue,y.type=x.type,r=x.dependencies,y.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return rt(ct,ct.current&1|2),s.child}r=r.sibling}y.tail!==null&&nt()>_o&&(s.flags|=128,u=!0,Fa(y,!1),s.lanes=4194304)}else{if(!u)if(r=dc(x),r!==null){if(s.flags|=128,u=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Fa(y,!0),y.tail===null&&y.tailMode==="hidden"&&!x.alternate&&!lt)return Ht(s),null}else 2*nt()-y.renderingStartTime>_o&&a!==1073741824&&(s.flags|=128,u=!0,Fa(y,!1),s.lanes=4194304);y.isBackwards?(x.sibling=s.child,s.child=x):(a=y.last,a!==null?a.sibling=x:s.child=x,y.last=x)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=nt(),s.sibling=null,a=ct.current,rt(ct,u?a&1|2:a&1),s):(Ht(s),null);case 22:case 23:return ph(),u=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==u&&(s.flags|=8192),u&&s.mode&1?In&1073741824&&(Ht(s),s.subtreeFlags&6&&(s.flags|=8192)):Ht(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function jw(r,s){switch(Td(s),s.tag){case 1:return un(s.type)&&ec(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return mo(),st(cn),st(qt),Ld(),r=s.flags,r&65536&&!(r&128)?(s.flags=r&-65537|128,s):null;case 5:return Od(s),null;case 13:if(st(ct),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));uo()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return st(ct),null;case 4:return mo(),null;case 10:return kd(s.type._context),null;case 22:case 23:return ph(),null;case 24:return null;default:return null}}var wc=!1,Gt=!1,Lw=typeof WeakSet=="function"?WeakSet:Set,he=null;function yo(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(u){ft(r,s,u)}else a.current=null}function nh(r,s,a){try{a()}catch(u){ft(r,s,u)}}var rg=!1;function Vw(r,s){if(pd=ui,r=jp(),od(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var f=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var x=0,P=-1,L=-1,G=0,ee=0,te=r,Z=null;t:for(;;){for(var le;te!==a||f!==0&&te.nodeType!==3||(P=x+f),te!==y||u!==0&&te.nodeType!==3||(L=x+u),te.nodeType===3&&(x+=te.nodeValue.length),(le=te.firstChild)!==null;)Z=te,te=le;for(;;){if(te===r)break t;if(Z===a&&++G===f&&(P=x),Z===y&&++ee===u&&(L=x),(le=te.nextSibling)!==null)break;te=Z,Z=te.parentNode}te=le}a=P===-1||L===-1?null:{start:P,end:L}}else a=null}a=a||{start:0,end:0}}else a=null;for(md={focusedElem:r,selectionRange:a},ui=!1,he=s;he!==null;)if(s=he,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,he=r;else for(;he!==null;){s=he;try{var me=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var ye=me.memoizedProps,gt=me.memoizedState,q=s.stateNode,V=q.getSnapshotBeforeUpdate(s.elementType===s.type?ye:Xn(s.type,ye),gt);q.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var W=s.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){ft(s,s.return,re)}if(r=s.sibling,r!==null){r.return=s.return,he=r;break}he=s.return}return me=rg,rg=!1,me}function Ua(r,s,a){var u=s.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var f=u=u.next;do{if((f.tag&r)===r){var y=f.destroy;f.destroy=void 0,y!==void 0&&nh(s,a,y)}f=f.next}while(f!==u)}}function Ec(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var u=a.create;a.destroy=u()}a=a.next}while(a!==s)}}function rh(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function ig(r){var s=r.alternate;s!==null&&(r.alternate=null,ig(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[fr],delete s[ka],delete s[_d],delete s[_w],delete s[ww])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function sg(r){return r.tag===5||r.tag===3||r.tag===4}function og(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||sg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ih(r,s,a){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Jl));else if(u!==4&&(r=r.child,r!==null))for(ih(r,s,a),r=r.sibling;r!==null;)ih(r,s,a),r=r.sibling}function sh(r,s,a){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(u!==4&&(r=r.child,r!==null))for(sh(r,s,a),r=r.sibling;r!==null;)sh(r,s,a),r=r.sibling}var Ft=null,Jn=!1;function _i(r,s,a){for(a=a.child;a!==null;)ag(r,s,a),a=a.sibling}function ag(r,s,a){if(vn&&typeof vn.onCommitFiberUnmount=="function")try{vn.onCommitFiberUnmount(es,a)}catch{}switch(a.tag){case 5:Gt||yo(a,s);case 6:var u=Ft,f=Jn;Ft=null,_i(r,s,a),Ft=u,Jn=f,Ft!==null&&(Jn?(r=Ft,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):Ft.removeChild(a.stateNode));break;case 18:Ft!==null&&(Jn?(r=Ft,a=a.stateNode,r.nodeType===8?vd(r.parentNode,a):r.nodeType===1&&vd(r,a),Gn(r)):vd(Ft,a.stateNode));break;case 4:u=Ft,f=Jn,Ft=a.stateNode.containerInfo,Jn=!0,_i(r,s,a),Ft=u,Jn=f;break;case 0:case 11:case 14:case 15:if(!Gt&&(u=a.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){f=u=u.next;do{var y=f,x=y.destroy;y=y.tag,x!==void 0&&(y&2||y&4)&&nh(a,s,x),f=f.next}while(f!==u)}_i(r,s,a);break;case 1:if(!Gt&&(yo(a,s),u=a.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=a.memoizedProps,u.state=a.memoizedState,u.componentWillUnmount()}catch(P){ft(a,s,P)}_i(r,s,a);break;case 21:_i(r,s,a);break;case 22:a.mode&1?(Gt=(u=Gt)||a.memoizedState!==null,_i(r,s,a),Gt=u):_i(r,s,a);break;default:_i(r,s,a)}}function lg(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new Lw),s.forEach(function(u){var f=Hw.bind(null,r,u);a.has(u)||(a.add(u),u.then(f,f))})}}function Zn(r,s){var a=s.deletions;if(a!==null)for(var u=0;u<a.length;u++){var f=a[u];try{var y=r,x=s,P=x;e:for(;P!==null;){switch(P.tag){case 5:Ft=P.stateNode,Jn=!1;break e;case 3:Ft=P.stateNode.containerInfo,Jn=!0;break e;case 4:Ft=P.stateNode.containerInfo,Jn=!0;break e}P=P.return}if(Ft===null)throw Error(t(160));ag(y,x,f),Ft=null,Jn=!1;var L=f.alternate;L!==null&&(L.return=null),f.return=null}catch(G){ft(f,s,G)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)cg(s,r),s=s.sibling}function cg(r,s){var a=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Zn(s,r),gr(r),u&4){try{Ua(3,r,r.return),Ec(3,r)}catch(ye){ft(r,r.return,ye)}try{Ua(5,r,r.return)}catch(ye){ft(r,r.return,ye)}}break;case 1:Zn(s,r),gr(r),u&512&&a!==null&&yo(a,a.return);break;case 5:if(Zn(s,r),gr(r),u&512&&a!==null&&yo(a,a.return),r.flags&32){var f=r.stateNode;try{ni(f,"")}catch(ye){ft(r,r.return,ye)}}if(u&4&&(f=r.stateNode,f!=null)){var y=r.memoizedProps,x=a!==null?a.memoizedProps:y,P=r.type,L=r.updateQueue;if(r.updateQueue=null,L!==null)try{P==="input"&&y.type==="radio"&&y.name!=null&&Mn(f,y),oa(P,x);var G=oa(P,y);for(x=0;x<L.length;x+=2){var ee=L[x],te=L[x+1];ee==="style"?ra(f,te):ee==="dangerouslySetInnerHTML"?ta(f,te):ee==="children"?ni(f,te):H(f,ee,te,G)}switch(P){case"input":Fn(f,y);break;case"textarea":Ns(f,y);break;case"select":var Z=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!y.multiple;var le=y.value;le!=null?Cr(f,!!y.multiple,le,!1):Z!==!!y.multiple&&(y.defaultValue!=null?Cr(f,!!y.multiple,y.defaultValue,!0):Cr(f,!!y.multiple,y.multiple?[]:"",!1))}f[ka]=y}catch(ye){ft(r,r.return,ye)}}break;case 6:if(Zn(s,r),gr(r),u&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,y=r.memoizedProps;try{f.nodeValue=y}catch(ye){ft(r,r.return,ye)}}break;case 3:if(Zn(s,r),gr(r),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Gn(s.containerInfo)}catch(ye){ft(r,r.return,ye)}break;case 4:Zn(s,r),gr(r);break;case 13:Zn(s,r),gr(r),f=r.child,f.flags&8192&&(y=f.memoizedState!==null,f.stateNode.isHidden=y,!y||f.alternate!==null&&f.alternate.memoizedState!==null||(lh=nt())),u&4&&lg(r);break;case 22:if(ee=a!==null&&a.memoizedState!==null,r.mode&1?(Gt=(G=Gt)||ee,Zn(s,r),Gt=G):Zn(s,r),gr(r),u&8192){if(G=r.memoizedState!==null,(r.stateNode.isHidden=G)&&!ee&&r.mode&1)for(he=r,ee=r.child;ee!==null;){for(te=he=ee;he!==null;){switch(Z=he,le=Z.child,Z.tag){case 0:case 11:case 14:case 15:Ua(4,Z,Z.return);break;case 1:yo(Z,Z.return);var me=Z.stateNode;if(typeof me.componentWillUnmount=="function"){u=Z,a=Z.return;try{s=u,me.props=s.memoizedProps,me.state=s.memoizedState,me.componentWillUnmount()}catch(ye){ft(u,a,ye)}}break;case 5:yo(Z,Z.return);break;case 22:if(Z.memoizedState!==null){hg(te);continue}}le!==null?(le.return=Z,he=le):hg(te)}ee=ee.sibling}e:for(ee=null,te=r;;){if(te.tag===5){if(ee===null){ee=te;try{f=te.stateNode,G?(y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(P=te.stateNode,L=te.memoizedProps.style,x=L!=null&&L.hasOwnProperty("display")?L.display:null,P.style.display=na("display",x))}catch(ye){ft(r,r.return,ye)}}}else if(te.tag===6){if(ee===null)try{te.stateNode.nodeValue=G?"":te.memoizedProps}catch(ye){ft(r,r.return,ye)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===r)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===r)break e;for(;te.sibling===null;){if(te.return===null||te.return===r)break e;ee===te&&(ee=null),te=te.return}ee===te&&(ee=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:Zn(s,r),gr(r),u&4&&lg(r);break;case 21:break;default:Zn(s,r),gr(r)}}function gr(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(sg(a)){var u=a;break e}a=a.return}throw Error(t(160))}switch(u.tag){case 5:var f=u.stateNode;u.flags&32&&(ni(f,""),u.flags&=-33);var y=og(r);sh(r,y,f);break;case 3:case 4:var x=u.stateNode.containerInfo,P=og(r);ih(r,P,x);break;default:throw Error(t(161))}}catch(L){ft(r,r.return,L)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function Mw(r,s,a){he=r,ug(r)}function ug(r,s,a){for(var u=(r.mode&1)!==0;he!==null;){var f=he,y=f.child;if(f.tag===22&&u){var x=f.memoizedState!==null||wc;if(!x){var P=f.alternate,L=P!==null&&P.memoizedState!==null||Gt;P=wc;var G=Gt;if(wc=x,(Gt=L)&&!G)for(he=f;he!==null;)x=he,L=x.child,x.tag===22&&x.memoizedState!==null?fg(f):L!==null?(L.return=x,he=L):fg(f);for(;y!==null;)he=y,ug(y),y=y.sibling;he=f,wc=P,Gt=G}dg(r)}else f.subtreeFlags&8772&&y!==null?(y.return=f,he=y):dg(r)}}function dg(r){for(;he!==null;){var s=he;if(s.flags&8772){var a=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Gt||Ec(5,s);break;case 1:var u=s.stateNode;if(s.flags&4&&!Gt)if(a===null)u.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:Xn(s.type,a.memoizedProps);u.componentDidUpdate(f,a.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&hm(s,y,u);break;case 3:var x=s.updateQueue;if(x!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}hm(s,x,a)}break;case 5:var P=s.stateNode;if(a===null&&s.flags&4){a=P;var L=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&a.focus();break;case"img":L.src&&(a.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var G=s.alternate;if(G!==null){var ee=G.memoizedState;if(ee!==null){var te=ee.dehydrated;te!==null&&Gn(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Gt||s.flags&512&&rh(s)}catch(Z){ft(s,s.return,Z)}}if(s===r){he=null;break}if(a=s.sibling,a!==null){a.return=s.return,he=a;break}he=s.return}}function hg(r){for(;he!==null;){var s=he;if(s===r){he=null;break}var a=s.sibling;if(a!==null){a.return=s.return,he=a;break}he=s.return}}function fg(r){for(;he!==null;){var s=he;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Ec(4,s)}catch(L){ft(s,a,L)}break;case 1:var u=s.stateNode;if(typeof u.componentDidMount=="function"){var f=s.return;try{u.componentDidMount()}catch(L){ft(s,f,L)}}var y=s.return;try{rh(s)}catch(L){ft(s,y,L)}break;case 5:var x=s.return;try{rh(s)}catch(L){ft(s,x,L)}}}catch(L){ft(s,s.return,L)}if(s===r){he=null;break}var P=s.sibling;if(P!==null){P.return=s.return,he=P;break}he=s.return}}var Fw=Math.ceil,xc=K.ReactCurrentDispatcher,oh=K.ReactCurrentOwner,jn=K.ReactCurrentBatchConfig,We=0,Nt=null,wt=null,Ut=0,In=0,vo=pi(0),Rt=0,za=null,ps=0,Tc=0,ah=0,Ba=null,hn=null,lh=0,_o=1/0,zr=null,Ic=!1,ch=null,wi=null,Sc=!1,Ei=null,Cc=0,$a=0,uh=null,Rc=-1,Ac=0;function sn(){return We&6?nt():Rc!==-1?Rc:Rc=nt()}function xi(r){return r.mode&1?We&2&&Ut!==0?Ut&-Ut:xw.transition!==null?(Ac===0&&(Ac=ns()),Ac):(r=Fe,r!==0||(r=window.event,r=r===void 0?16:ya(r.type)),r):1}function er(r,s,a,u){if(50<$a)throw $a=0,uh=null,Error(t(185));oi(r,a,u),(!(We&2)||r!==Nt)&&(r===Nt&&(!(We&2)&&(Tc|=a),Rt===4&&Ti(r,Ut)),fn(r,u),a===1&&We===0&&!(s.mode&1)&&(_o=nt()+500,nc&&gi()))}function fn(r,s){var a=r.callbackNode;kr(r,s);var u=ts(r,r===Nt?Ut:0);if(u===0)a!==null&&ha(a),r.callbackNode=null,r.callbackPriority=0;else if(s=u&-u,r.callbackPriority!==s){if(a!=null&&ha(a),s===1)r.tag===0?Ew(mg.bind(null,r)):em(mg.bind(null,r)),yw(function(){!(We&6)&&gi()}),a=null;else{switch(li(u)){case 1:a=Zi;break;case 4:a=ri;break;case 16:a=An;break;case 536870912:a=Al;break;default:a=An}a=Tg(a,pg.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function pg(r,s){if(Rc=-1,Ac=0,We&6)throw Error(t(327));var a=r.callbackNode;if(wo()&&r.callbackNode!==a)return null;var u=ts(r,r===Nt?Ut:0);if(u===0)return null;if(u&30||u&r.expiredLanes||s)s=kc(r,u);else{s=u;var f=We;We|=2;var y=yg();(Nt!==r||Ut!==s)&&(zr=null,_o=nt()+500,gs(r,s));do try{Bw();break}catch(P){gg(r,P)}while(!0);Ad(),xc.current=y,We=f,wt!==null?s=0:(Nt=null,Ut=0,s=Rt)}if(s!==0){if(s===2&&(f=_n(r),f!==0&&(u=f,s=dh(r,f))),s===1)throw a=za,gs(r,0),Ti(r,u),fn(r,nt()),a;if(s===6)Ti(r,u);else{if(f=r.current.alternate,!(u&30)&&!Uw(f)&&(s=kc(r,u),s===2&&(y=_n(r),y!==0&&(u=y,s=dh(r,y))),s===1))throw a=za,gs(r,0),Ti(r,u),fn(r,nt()),a;switch(r.finishedWork=f,r.finishedLanes=u,s){case 0:case 1:throw Error(t(345));case 2:ys(r,hn,zr);break;case 3:if(Ti(r,u),(u&130023424)===u&&(s=lh+500-nt(),10<s)){if(ts(r,0)!==0)break;if(f=r.suspendedLanes,(f&u)!==u){sn(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=yd(ys.bind(null,r,hn,zr),s);break}ys(r,hn,zr);break;case 4:if(Ti(r,u),(u&4194240)===u)break;for(s=r.eventTimes,f=-1;0<u;){var x=31-tn(u);y=1<<x,x=s[x],x>f&&(f=x),u&=~y}if(u=f,u=nt()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Fw(u/1960))-u,10<u){r.timeoutHandle=yd(ys.bind(null,r,hn,zr),u);break}ys(r,hn,zr);break;case 5:ys(r,hn,zr);break;default:throw Error(t(329))}}}return fn(r,nt()),r.callbackNode===a?pg.bind(null,r):null}function dh(r,s){var a=Ba;return r.current.memoizedState.isDehydrated&&(gs(r,s).flags|=256),r=kc(r,s),r!==2&&(s=hn,hn=a,s!==null&&hh(s)),r}function hh(r){hn===null?hn=r:hn.push.apply(hn,r)}function Uw(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var u=0;u<a.length;u++){var f=a[u],y=f.getSnapshot;f=f.value;try{if(!Qn(y(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ti(r,s){for(s&=~ah,s&=~Tc,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-tn(s),u=1<<a;r[a]=-1,s&=~u}}function mg(r){if(We&6)throw Error(t(327));wo();var s=ts(r,0);if(!(s&1))return fn(r,nt()),null;var a=kc(r,s);if(r.tag!==0&&a===2){var u=_n(r);u!==0&&(s=u,a=dh(r,u))}if(a===1)throw a=za,gs(r,0),Ti(r,s),fn(r,nt()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,ys(r,hn,zr),fn(r,nt()),null}function fh(r,s){var a=We;We|=1;try{return r(s)}finally{We=a,We===0&&(_o=nt()+500,nc&&gi())}}function ms(r){Ei!==null&&Ei.tag===0&&!(We&6)&&wo();var s=We;We|=1;var a=jn.transition,u=Fe;try{if(jn.transition=null,Fe=1,r)return r()}finally{Fe=u,jn.transition=a,We=s,!(We&6)&&gi()}}function ph(){In=vo.current,st(vo)}function gs(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,gw(a)),wt!==null)for(a=wt.return;a!==null;){var u=a;switch(Td(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&ec();break;case 3:mo(),st(cn),st(qt),Ld();break;case 5:Od(u);break;case 4:mo();break;case 13:st(ct);break;case 19:st(ct);break;case 10:kd(u.type._context);break;case 22:case 23:ph()}a=a.return}if(Nt=r,wt=r=Ii(r.current,null),Ut=In=s,Rt=0,za=null,ah=Tc=ps=0,hn=Ba=null,ds!==null){for(s=0;s<ds.length;s++)if(a=ds[s],u=a.interleaved,u!==null){a.interleaved=null;var f=u.next,y=a.pending;if(y!==null){var x=y.next;y.next=f,u.next=x}a.pending=u}ds=null}return r}function gg(r,s){do{var a=wt;try{if(Ad(),hc.current=gc,fc){for(var u=ut.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}fc=!1}if(fs=0,bt=Ct=ut=null,ja=!1,La=0,oh.current=null,a===null||a.return===null){Rt=1,za=s,wt=null;break}e:{var y=r,x=a.return,P=a,L=s;if(s=Ut,P.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var G=L,ee=P,te=ee.tag;if(!(ee.mode&1)&&(te===0||te===11||te===15)){var Z=ee.alternate;Z?(ee.updateQueue=Z.updateQueue,ee.memoizedState=Z.memoizedState,ee.lanes=Z.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var le=zm(x);if(le!==null){le.flags&=-257,Bm(le,x,P,y,s),le.mode&1&&Um(y,G,s),s=le,L=G;var me=s.updateQueue;if(me===null){var ye=new Set;ye.add(L),s.updateQueue=ye}else me.add(L);break e}else{if(!(s&1)){Um(y,G,s),mh();break e}L=Error(t(426))}}else if(lt&&P.mode&1){var gt=zm(x);if(gt!==null){!(gt.flags&65536)&&(gt.flags|=256),Bm(gt,x,P,y,s),Cd(go(L,P));break e}}y=L=go(L,P),Rt!==4&&(Rt=2),Ba===null?Ba=[y]:Ba.push(y),y=x;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var q=Mm(y,L,s);dm(y,q);break e;case 1:P=L;var V=y.type,W=y.stateNode;if(!(y.flags&128)&&(typeof V.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(wi===null||!wi.has(W)))){y.flags|=65536,s&=-s,y.lanes|=s;var re=Fm(y,P,s);dm(y,re);break e}}y=y.return}while(y!==null)}_g(a)}catch(_e){s=_e,wt===a&&a!==null&&(wt=a=a.return);continue}break}while(!0)}function yg(){var r=xc.current;return xc.current=gc,r===null?gc:r}function mh(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),Nt===null||!(ps&268435455)&&!(Tc&268435455)||Ti(Nt,Ut)}function kc(r,s){var a=We;We|=2;var u=yg();(Nt!==r||Ut!==s)&&(zr=null,gs(r,s));do try{zw();break}catch(f){gg(r,f)}while(!0);if(Ad(),We=a,xc.current=u,wt!==null)throw Error(t(261));return Nt=null,Ut=0,Rt}function zw(){for(;wt!==null;)vg(wt)}function Bw(){for(;wt!==null&&!Cl();)vg(wt)}function vg(r){var s=xg(r.alternate,r,In);r.memoizedProps=r.pendingProps,s===null?_g(r):wt=s,oh.current=null}function _g(r){var s=r;do{var a=s.alternate;if(r=s.return,s.flags&32768){if(a=jw(a,s),a!==null){a.flags&=32767,wt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Rt=6,wt=null;return}}else if(a=Ow(a,s,In),a!==null){wt=a;return}if(s=s.sibling,s!==null){wt=s;return}wt=s=r}while(s!==null);Rt===0&&(Rt=5)}function ys(r,s,a){var u=Fe,f=jn.transition;try{jn.transition=null,Fe=1,$w(r,s,a,u)}finally{jn.transition=f,Fe=u}return null}function $w(r,s,a,u){do wo();while(Ei!==null);if(We&6)throw Error(t(327));a=r.finishedWork;var f=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var y=a.lanes|a.childLanes;if(et(r,y),r===Nt&&(wt=Nt=null,Ut=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Sc||(Sc=!0,Tg(An,function(){return wo(),null})),y=(a.flags&15990)!==0,a.subtreeFlags&15990||y){y=jn.transition,jn.transition=null;var x=Fe;Fe=1;var P=We;We|=4,oh.current=null,Vw(r,a),cg(a,r),cw(md),ui=!!pd,md=pd=null,r.current=a,Mw(a),Ju(),We=P,Fe=x,jn.transition=y}else r.current=a;if(Sc&&(Sc=!1,Ei=r,Cc=f),y=r.pendingLanes,y===0&&(wi=null),kl(a.stateNode),fn(r,nt()),s!==null)for(u=r.onRecoverableError,a=0;a<s.length;a++)f=s[a],u(f.value,{componentStack:f.stack,digest:f.digest});if(Ic)throw Ic=!1,r=ch,ch=null,r;return Cc&1&&r.tag!==0&&wo(),y=r.pendingLanes,y&1?r===uh?$a++:($a=0,uh=r):$a=0,gi(),null}function wo(){if(Ei!==null){var r=li(Cc),s=jn.transition,a=Fe;try{if(jn.transition=null,Fe=16>r?16:r,Ei===null)var u=!1;else{if(r=Ei,Ei=null,Cc=0,We&6)throw Error(t(331));var f=We;for(We|=4,he=r.current;he!==null;){var y=he,x=y.child;if(he.flags&16){var P=y.deletions;if(P!==null){for(var L=0;L<P.length;L++){var G=P[L];for(he=G;he!==null;){var ee=he;switch(ee.tag){case 0:case 11:case 15:Ua(8,ee,y)}var te=ee.child;if(te!==null)te.return=ee,he=te;else for(;he!==null;){ee=he;var Z=ee.sibling,le=ee.return;if(ig(ee),ee===G){he=null;break}if(Z!==null){Z.return=le,he=Z;break}he=le}}}var me=y.alternate;if(me!==null){var ye=me.child;if(ye!==null){me.child=null;do{var gt=ye.sibling;ye.sibling=null,ye=gt}while(ye!==null)}}he=y}}if(y.subtreeFlags&2064&&x!==null)x.return=y,he=x;else e:for(;he!==null;){if(y=he,y.flags&2048)switch(y.tag){case 0:case 11:case 15:Ua(9,y,y.return)}var q=y.sibling;if(q!==null){q.return=y.return,he=q;break e}he=y.return}}var V=r.current;for(he=V;he!==null;){x=he;var W=x.child;if(x.subtreeFlags&2064&&W!==null)W.return=x,he=W;else e:for(x=V;he!==null;){if(P=he,P.flags&2048)try{switch(P.tag){case 0:case 11:case 15:Ec(9,P)}}catch(_e){ft(P,P.return,_e)}if(P===x){he=null;break e}var re=P.sibling;if(re!==null){re.return=P.return,he=re;break e}he=P.return}}if(We=f,gi(),vn&&typeof vn.onPostCommitFiberRoot=="function")try{vn.onPostCommitFiberRoot(es,r)}catch{}u=!0}return u}finally{Fe=a,jn.transition=s}}return!1}function wg(r,s,a){s=go(a,s),s=Mm(r,s,1),r=vi(r,s,1),s=sn(),r!==null&&(oi(r,1,s),fn(r,s))}function ft(r,s,a){if(r.tag===3)wg(r,r,a);else for(;s!==null;){if(s.tag===3){wg(s,r,a);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(wi===null||!wi.has(u))){r=go(a,r),r=Fm(s,r,1),s=vi(s,r,1),r=sn(),s!==null&&(oi(s,1,r),fn(s,r));break}}s=s.return}}function qw(r,s,a){var u=r.pingCache;u!==null&&u.delete(s),s=sn(),r.pingedLanes|=r.suspendedLanes&a,Nt===r&&(Ut&a)===a&&(Rt===4||Rt===3&&(Ut&130023424)===Ut&&500>nt()-lh?gs(r,0):ah|=a),fn(r,s)}function Eg(r,s){s===0&&(r.mode&1?(s=Bs,Bs<<=1,!(Bs&130023424)&&(Bs=4194304)):s=1);var a=sn();r=Mr(r,s),r!==null&&(oi(r,s,a),fn(r,a))}function Ww(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),Eg(r,a)}function Hw(r,s){var a=0;switch(r.tag){case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(a=f.retryLane);break;case 19:u=r.stateNode;break;default:throw Error(t(314))}u!==null&&u.delete(s),Eg(r,a)}var xg;xg=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||cn.current)dn=!0;else{if(!(r.lanes&a)&&!(s.flags&128))return dn=!1,Dw(r,s,a);dn=!!(r.flags&131072)}else dn=!1,lt&&s.flags&1048576&&tm(s,ic,s.index);switch(s.lanes=0,s.tag){case 2:var u=s.type;_c(r,s),r=s.pendingProps;var f=ao(s,qt.current);po(s,a),f=Fd(null,s,u,r,f,a);var y=Ud();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,un(u)?(y=!0,tc(s)):y=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Nd(s),f.updater=yc,s.stateNode=f,f._reactInternals=s,Hd(s,u,r,a),s=Yd(null,s,u,!0,y,a)):(s.tag=0,lt&&y&&xd(s),rn(null,s,f,a),s=s.child),s;case 16:u=s.elementType;e:{switch(_c(r,s),r=s.pendingProps,f=u._init,u=f(u._payload),s.type=u,f=s.tag=Kw(u),r=Xn(u,r),f){case 0:s=Qd(null,s,u,r,a);break e;case 1:s=Km(null,s,u,r,a);break e;case 11:s=$m(null,s,u,r,a);break e;case 14:s=qm(null,s,u,Xn(u.type,r),a);break e}throw Error(t(306,u,""))}return s;case 0:return u=s.type,f=s.pendingProps,f=s.elementType===u?f:Xn(u,f),Qd(r,s,u,f,a);case 1:return u=s.type,f=s.pendingProps,f=s.elementType===u?f:Xn(u,f),Km(r,s,u,f,a);case 3:e:{if(Qm(s),r===null)throw Error(t(387));u=s.pendingProps,y=s.memoizedState,f=y.element,um(r,s),uc(s,u,null,a);var x=s.memoizedState;if(u=x.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){f=go(Error(t(423)),s),s=Ym(r,s,u,a,f);break e}else if(u!==f){f=go(Error(t(424)),s),s=Ym(r,s,u,a,f);break e}else for(Tn=fi(s.stateNode.containerInfo.firstChild),xn=s,lt=!0,Yn=null,a=lm(s,null,u,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(uo(),u===f){s=Ur(r,s,a);break e}rn(r,s,u,a)}s=s.child}return s;case 5:return fm(s),r===null&&Sd(s),u=s.type,f=s.pendingProps,y=r!==null?r.memoizedProps:null,x=f.children,gd(u,f)?x=null:y!==null&&gd(u,y)&&(s.flags|=32),Gm(r,s),rn(r,s,x,a),s.child;case 6:return r===null&&Sd(s),null;case 13:return Xm(r,s,a);case 4:return Dd(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=ho(s,null,u,a):rn(r,s,u,a),s.child;case 11:return u=s.type,f=s.pendingProps,f=s.elementType===u?f:Xn(u,f),$m(r,s,u,f,a);case 7:return rn(r,s,s.pendingProps,a),s.child;case 8:return rn(r,s,s.pendingProps.children,a),s.child;case 12:return rn(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(u=s.type._context,f=s.pendingProps,y=s.memoizedProps,x=f.value,rt(ac,u._currentValue),u._currentValue=x,y!==null)if(Qn(y.value,x)){if(y.children===f.children&&!cn.current){s=Ur(r,s,a);break e}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var P=y.dependencies;if(P!==null){x=y.child;for(var L=P.firstContext;L!==null;){if(L.context===u){if(y.tag===1){L=Fr(-1,a&-a),L.tag=2;var G=y.updateQueue;if(G!==null){G=G.shared;var ee=G.pending;ee===null?L.next=L:(L.next=ee.next,ee.next=L),G.pending=L}}y.lanes|=a,L=y.alternate,L!==null&&(L.lanes|=a),Pd(y.return,a,s),P.lanes|=a;break}L=L.next}}else if(y.tag===10)x=y.type===s.type?null:y.child;else if(y.tag===18){if(x=y.return,x===null)throw Error(t(341));x.lanes|=a,P=x.alternate,P!==null&&(P.lanes|=a),Pd(x,a,s),x=y.sibling}else x=y.child;if(x!==null)x.return=y;else for(x=y;x!==null;){if(x===s){x=null;break}if(y=x.sibling,y!==null){y.return=x.return,x=y;break}x=x.return}y=x}rn(r,s,f.children,a),s=s.child}return s;case 9:return f=s.type,u=s.pendingProps.children,po(s,a),f=Dn(f),u=u(f),s.flags|=1,rn(r,s,u,a),s.child;case 14:return u=s.type,f=Xn(u,s.pendingProps),f=Xn(u.type,f),qm(r,s,u,f,a);case 15:return Wm(r,s,s.type,s.pendingProps,a);case 17:return u=s.type,f=s.pendingProps,f=s.elementType===u?f:Xn(u,f),_c(r,s),s.tag=1,un(u)?(r=!0,tc(s)):r=!1,po(s,a),Lm(s,u,f),Hd(s,u,f,a),Yd(null,s,u,!0,r,a);case 19:return Zm(r,s,a);case 22:return Hm(r,s,a)}throw Error(t(156,s.tag))};function Tg(r,s){return Us(r,s)}function Gw(r,s,a,u){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(r,s,a,u){return new Gw(r,s,a,u)}function gh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Kw(r){if(typeof r=="function")return gh(r)?1:0;if(r!=null){if(r=r.$$typeof,r===z)return 11;if(r===Ee)return 14}return 2}function Ii(r,s){var a=r.alternate;return a===null?(a=Ln(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Pc(r,s,a,u,f,y){var x=2;if(u=r,typeof r=="function")gh(r)&&(x=1);else if(typeof r=="string")x=5;else e:switch(r){case O:return vs(a.children,f,y,s);case R:x=8,f|=8;break;case b:return r=Ln(12,a,s,f|2),r.elementType=b,r.lanes=y,r;case k:return r=Ln(13,a,s,f),r.elementType=k,r.lanes=y,r;case ie:return r=Ln(19,a,s,f),r.elementType=ie,r.lanes=y,r;case Oe:return bc(a,f,y,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case j:x=10;break e;case M:x=9;break e;case z:x=11;break e;case Ee:x=14;break e;case Ne:x=16,u=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=Ln(x,a,s,f),s.elementType=r,s.type=u,s.lanes=y,s}function vs(r,s,a,u){return r=Ln(7,r,u,s),r.lanes=a,r}function bc(r,s,a,u){return r=Ln(22,r,u,s),r.elementType=Oe,r.lanes=a,r.stateNode={isHidden:!1},r}function yh(r,s,a){return r=Ln(6,r,null,s),r.lanes=a,r}function vh(r,s,a){return s=Ln(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function Qw(r,s,a,u,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=si(0),this.expirationTimes=si(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=si(0),this.identifierPrefix=u,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function _h(r,s,a,u,f,y,x,P,L){return r=new Qw(r,s,a,P,L),s===1?(s=1,y===!0&&(s|=8)):s=0,y=Ln(3,null,null,s),r.current=y,y.stateNode=r,y.memoizedState={element:u,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nd(y),r}function Yw(r,s,a){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ce,key:u==null?null:""+u,children:r,containerInfo:s,implementation:a}}function Ig(r){if(!r)return mi;r=r._reactInternals;e:{if(Bn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(un(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(un(a))return Jp(r,a,s)}return s}function Sg(r,s,a,u,f,y,x,P,L){return r=_h(a,u,!0,r,f,y,x,P,L),r.context=Ig(null),a=r.current,u=sn(),f=xi(a),y=Fr(u,f),y.callback=s??null,vi(a,y,f),r.current.lanes=f,oi(r,f,u),fn(r,u),r}function Nc(r,s,a,u){var f=s.current,y=sn(),x=xi(f);return a=Ig(a),s.context===null?s.context=a:s.pendingContext=a,s=Fr(y,x),s.payload={element:r},u=u===void 0?null:u,u!==null&&(s.callback=u),r=vi(f,s,x),r!==null&&(er(r,f,x,y),cc(r,f,x)),x}function Dc(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Cg(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function wh(r,s){Cg(r,s),(r=r.alternate)&&Cg(r,s)}function Xw(){return null}var Rg=typeof reportError=="function"?reportError:function(r){console.error(r)};function Eh(r){this._internalRoot=r}Oc.prototype.render=Eh.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));Nc(r,s,null,null)},Oc.prototype.unmount=Eh.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;ms(function(){Nc(null,r,null,null)}),s[Or]=null}};function Oc(r){this._internalRoot=r}Oc.prototype.unstable_scheduleHydration=function(r){if(r){var s=Ol();r={blockedOn:null,target:r,priority:s};for(var a=0;a<cr.length&&s!==0&&s<cr[a].priority;a++);cr.splice(a,0,r),a===0&&Vl(r)}};function xh(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function jc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Ag(){}function Jw(r,s,a,u,f){if(f){if(typeof u=="function"){var y=u;u=function(){var G=Dc(x);y.call(G)}}var x=Sg(s,u,r,0,null,!1,!1,"",Ag);return r._reactRootContainer=x,r[Or]=x.current,Ra(r.nodeType===8?r.parentNode:r),ms(),x}for(;f=r.lastChild;)r.removeChild(f);if(typeof u=="function"){var P=u;u=function(){var G=Dc(L);P.call(G)}}var L=_h(r,0,!1,null,null,!1,!1,"",Ag);return r._reactRootContainer=L,r[Or]=L.current,Ra(r.nodeType===8?r.parentNode:r),ms(function(){Nc(s,L,a,u)}),L}function Lc(r,s,a,u,f){var y=a._reactRootContainer;if(y){var x=y;if(typeof f=="function"){var P=f;f=function(){var L=Dc(x);P.call(L)}}Nc(s,x,r,f)}else x=Jw(a,s,r,f,u);return Dc(x)}Nl=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=ii(s.pendingLanes);a!==0&&(ai(s,a|1),fn(s,nt()),!(We&6)&&(_o=nt()+500,gi()))}break;case 13:ms(function(){var u=Mr(r,1);if(u!==null){var f=sn();er(u,r,1,f)}}),wh(r,1)}},$s=function(r){if(r.tag===13){var s=Mr(r,134217728);if(s!==null){var a=sn();er(s,r,134217728,a)}wh(r,134217728)}},Dl=function(r){if(r.tag===13){var s=xi(r),a=Mr(r,s);if(a!==null){var u=sn();er(a,r,s,u)}wh(r,s)}},Ol=function(){return Fe},jl=function(r,s){var a=Fe;try{return Fe=r,s()}finally{Fe=a}},Os=function(r,s,a){switch(s){case"input":if(Fn(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var u=a[s];if(u!==r&&u.form===r.form){var f=Zl(u);if(!f)throw Error(t(90));Qe(u),Fn(u,f)}}}break;case"textarea":Ns(r,a);break;case"select":s=a.value,s!=null&&Cr(r,!!a.multiple,s,!1)}},Qi=fh,la=ms;var Zw={usingClientEntryPoint:!1,Events:[Pa,so,Zl,ar,aa,fh]},qa={findFiberByHostInstance:as,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eE={bundleType:qa.bundleType,version:qa.version,rendererPackageName:qa.rendererPackageName,rendererConfig:qa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=da(r),r===null?null:r.stateNode},findFiberByHostInstance:qa.findFiberByHostInstance||Xw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vc.isDisabled&&Vc.supportsFiber)try{es=Vc.inject(eE),vn=Vc}catch{}}return pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zw,pn.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xh(s))throw Error(t(200));return Yw(r,s,null,a)},pn.createRoot=function(r,s){if(!xh(r))throw Error(t(299));var a=!1,u="",f=Rg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=_h(r,1,!1,null,null,a,!1,u,f),r[Or]=s.current,Ra(r.nodeType===8?r.parentNode:r),new Eh(s)},pn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=da(s),r=r===null?null:r.stateNode,r},pn.flushSync=function(r){return ms(r)},pn.hydrate=function(r,s,a){if(!jc(s))throw Error(t(200));return Lc(null,r,s,!0,a)},pn.hydrateRoot=function(r,s,a){if(!xh(r))throw Error(t(405));var u=a!=null&&a.hydratedSources||null,f=!1,y="",x=Rg;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),s=Sg(s,null,r,1,a??null,f,!1,y,x),r[Or]=s.current,Ra(r),u)for(r=0;r<u.length;r++)a=u[r],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Oc(s)},pn.render=function(r,s,a){if(!jc(s))throw Error(t(200));return Lc(null,r,s,!1,a)},pn.unmountComponentAtNode=function(r){if(!jc(r))throw Error(t(40));return r._reactRootContainer?(ms(function(){Lc(null,null,r,!1,function(){r._reactRootContainer=null,r[Or]=null})}),!0):!1},pn.unstable_batchedUpdates=fh,pn.unstable_renderSubtreeIntoContainer=function(r,s,a,u){if(!jc(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Lc(r,s,a,!1,u)},pn.version="18.3.1-next-f1338f8080-20240426",pn}var Lg;function cE(){if(Lg)return Sh.exports;Lg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Sh.exports=lE(),Sh.exports}var uE=cE();const dE=Sf(uE);var U=hl();const Ev=Sf(U),hE=nE({__proto__:null,default:Ev},[U]);/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nl(){return nl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},nl.apply(this,arguments)}var bi;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(bi||(bi={}));const Vg="popstate";function fE(n){n===void 0&&(n={});function e(i,o){let{pathname:l,search:d,hash:h}=i.location;return Hh("",{pathname:l,search:d,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:tu(o)}return mE(e,t,null,n)}function dt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function xv(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pE(){return Math.random().toString(36).substr(2,8)}function Mg(n,e){return{usr:n.state,key:n.key,idx:e}}function Hh(n,e,t,i){return t===void 0&&(t=null),nl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?$o(e):e,{state:t,key:e&&e.key||i||pE()})}function tu(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function $o(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function mE(n,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,d=o.history,h=bi.Pop,p=null,v=E();v==null&&(v=0,d.replaceState(nl({},d.state,{idx:v}),""));function E(){return(d.state||{idx:null}).idx}function _(){h=bi.Pop;let A=E(),F=A==null?null:A-v;v=A,p&&p({action:h,location:S.location,delta:F})}function T(A,F){h=bi.Push;let D=Hh(S.location,A,F);v=E()+1;let H=Mg(D,v),K=S.createHref(D);try{d.pushState(H,"",K)}catch(ge){if(ge instanceof DOMException&&ge.name==="DataCloneError")throw ge;o.location.assign(K)}l&&p&&p({action:h,location:S.location,delta:1})}function C(A,F){h=bi.Replace;let D=Hh(S.location,A,F);v=E();let H=Mg(D,v),K=S.createHref(D);d.replaceState(H,"",K),l&&p&&p({action:h,location:S.location,delta:0})}function N(A){let F=o.location.origin!=="null"?o.location.origin:o.location.href,D=typeof A=="string"?A:tu(A);return D=D.replace(/ $/,"%20"),dt(F,"No window.location.(origin|href) available to create URL for href: "+D),new URL(D,F)}let S={get action(){return h},get location(){return n(o,d)},listen(A){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Vg,_),p=A,()=>{o.removeEventListener(Vg,_),p=null}},createHref(A){return e(o,A)},createURL:N,encodeLocation(A){let F=N(A);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:T,replace:C,go(A){return d.go(A)}};return S}var Fg;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Fg||(Fg={}));function gE(n,e,t){return t===void 0&&(t="/"),yE(n,e,t,!1)}function yE(n,e,t,i){let o=typeof e=="string"?$o(e):e,l=No(o.pathname||"/",t);if(l==null)return null;let d=Tv(n);vE(d);let h=null;for(let p=0;h==null&&p<d.length;++p){let v=kE(l);h=RE(d[p],v,i)}return h}function Tv(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,d,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};p.relativePath.startsWith("/")&&(dt(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let v=Oi([i,p.relativePath]),E=t.concat(p);l.children&&l.children.length>0&&(dt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),Tv(l.children,e,E,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:SE(v,l.index),routesMeta:E})};return n.forEach((l,d)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))o(l,d);else for(let p of Iv(l.path))o(l,d,p)}),e}function Iv(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let d=Iv(i.join("/")),h=[];return h.push(...d.map(p=>p===""?l:[l,p].join("/"))),o&&h.push(...d),h.map(p=>n.startsWith("/")&&p===""?"/":p)}function vE(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:CE(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const _E=/^:[\w-]+$/,wE=3,EE=2,xE=1,TE=10,IE=-2,Ug=n=>n==="*";function SE(n,e){let t=n.split("/"),i=t.length;return t.some(Ug)&&(i+=IE),e&&(i+=EE),t.filter(o=>!Ug(o)).reduce((o,l)=>o+(_E.test(l)?wE:l===""?xE:TE),i)}function CE(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function RE(n,e,t){let{routesMeta:i}=n,o={},l="/",d=[];for(let h=0;h<i.length;++h){let p=i[h],v=h===i.length-1,E=l==="/"?e:e.slice(l.length)||"/",_=nu({path:p.relativePath,caseSensitive:p.caseSensitive,end:v},E),T=p.route;if(!_&&v&&t&&!i[i.length-1].route.index&&(_=nu({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!_)return null;Object.assign(o,_.params),d.push({params:o,pathname:Oi([l,_.pathname]),pathnameBase:DE(Oi([l,_.pathnameBase])),route:T}),_.pathnameBase!=="/"&&(l=Oi([l,_.pathnameBase]))}return d}function nu(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=AE(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:i.reduce((v,E,_)=>{let{paramName:T,isOptional:C}=E;if(T==="*"){let S=h[_]||"";d=l.slice(0,l.length-S.length).replace(/(.)\/+$/,"$1")}const N=h[_];return C&&!N?v[T]=void 0:v[T]=(N||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:d,pattern:n}}function AE(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),xv(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,h,p)=>(i.push({paramName:h,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function kE(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xv(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function No(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function PE(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?$o(n):n;return{pathname:t?t.startsWith("/")?t:bE(t,e):e,search:OE(i),hash:jE(o)}}function bE(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Ah(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function NE(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Cf(n,e){let t=NE(n);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Rf(n,e,t,i){i===void 0&&(i=!1);let o;typeof n=="string"?o=$o(n):(o=nl({},n),dt(!o.pathname||!o.pathname.includes("?"),Ah("?","pathname","search",o)),dt(!o.pathname||!o.pathname.includes("#"),Ah("#","pathname","hash",o)),dt(!o.search||!o.search.includes("#"),Ah("#","search","hash",o)));let l=n===""||o.pathname==="",d=l?"/":o.pathname,h;if(d==null)h=t;else{let _=e.length-1;if(!i&&d.startsWith("..")){let T=d.split("/");for(;T[0]==="..";)T.shift(),_-=1;o.pathname=T.join("/")}h=_>=0?e[_]:"/"}let p=PE(o,h),v=d&&d!=="/"&&d.endsWith("/"),E=(l||d===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(v||E)&&(p.pathname+="/"),p}const Oi=n=>n.join("/").replace(/\/\/+/g,"/"),DE=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),OE=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,jE=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function LE(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Sv=["post","put","patch","delete"];new Set(Sv);const VE=["get",...Sv];new Set(VE);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rl(){return rl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},rl.apply(this,arguments)}const Au=U.createContext(null),Cv=U.createContext(null),Zr=U.createContext(null),ku=U.createContext(null),ei=U.createContext({outlet:null,matches:[],isDataRoute:!1}),Rv=U.createContext(null);function ME(n,e){let{relative:t}=e===void 0?{}:e;qo()||dt(!1);let{basename:i,navigator:o}=U.useContext(Zr),{hash:l,pathname:d,search:h}=Pu(n,{relative:t}),p=d;return i!=="/"&&(p=d==="/"?i:Oi([i,d])),o.createHref({pathname:p,search:h,hash:l})}function qo(){return U.useContext(ku)!=null}function ir(){return qo()||dt(!1),U.useContext(ku).location}function Av(n){U.useContext(Zr).static||U.useLayoutEffect(n)}function Wo(){let{isDataRoute:n}=U.useContext(ei);return n?ZE():FE()}function FE(){qo()||dt(!1);let n=U.useContext(Au),{basename:e,future:t,navigator:i}=U.useContext(Zr),{matches:o}=U.useContext(ei),{pathname:l}=ir(),d=JSON.stringify(Cf(o,t.v7_relativeSplatPath)),h=U.useRef(!1);return Av(()=>{h.current=!0}),U.useCallback(function(v,E){if(E===void 0&&(E={}),!h.current)return;if(typeof v=="number"){i.go(v);return}let _=Rf(v,JSON.parse(d),l,E.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Oi([e,_.pathname])),(E.replace?i.replace:i.push)(_,E.state,E)},[e,i,d,l,n])}const UE=U.createContext(null);function zE(n){let e=U.useContext(ei).outlet;return e&&U.createElement(UE.Provider,{value:n},e)}function Pu(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=U.useContext(Zr),{matches:o}=U.useContext(ei),{pathname:l}=ir(),d=JSON.stringify(Cf(o,i.v7_relativeSplatPath));return U.useMemo(()=>Rf(n,JSON.parse(d),l,t==="path"),[n,d,l,t])}function BE(n,e){return $E(n,e)}function $E(n,e,t,i){qo()||dt(!1);let{navigator:o}=U.useContext(Zr),{matches:l}=U.useContext(ei),d=l[l.length-1],h=d?d.params:{};d&&d.pathname;let p=d?d.pathnameBase:"/";d&&d.route;let v=ir(),E;if(e){var _;let A=typeof e=="string"?$o(e):e;p==="/"||(_=A.pathname)!=null&&_.startsWith(p)||dt(!1),E=A}else E=v;let T=E.pathname||"/",C=T;if(p!=="/"){let A=p.replace(/^\//,"").split("/");C="/"+T.replace(/^\//,"").split("/").slice(A.length).join("/")}let N=gE(n,{pathname:C}),S=KE(N&&N.map(A=>Object.assign({},A,{params:Object.assign({},h,A.params),pathname:Oi([p,o.encodeLocation?o.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?p:Oi([p,o.encodeLocation?o.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),l,t,i);return e&&S?U.createElement(ku.Provider,{value:{location:rl({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:bi.Pop}},S):S}function qE(){let n=JE(),e=LE(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),t?U.createElement("pre",{style:o},t):null,null)}const WE=U.createElement(qE,null);class HE extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?U.createElement(ei.Provider,{value:this.props.routeContext},U.createElement(Rv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GE(n){let{routeContext:e,match:t,children:i}=n,o=U.useContext(Au);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),U.createElement(ei.Provider,{value:e},i)}function KE(n,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var l;if(!t)return null;if(t.errors)n=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let d=n,h=(o=t)==null?void 0:o.errors;if(h!=null){let E=d.findIndex(_=>_.route.id&&(h==null?void 0:h[_.route.id])!==void 0);E>=0||dt(!1),d=d.slice(0,Math.min(d.length,E+1))}let p=!1,v=-1;if(t&&i&&i.v7_partialHydration)for(let E=0;E<d.length;E++){let _=d[E];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(v=E),_.route.id){let{loaderData:T,errors:C}=t,N=_.route.loader&&T[_.route.id]===void 0&&(!C||C[_.route.id]===void 0);if(_.route.lazy||N){p=!0,v>=0?d=d.slice(0,v+1):d=[d[0]];break}}}return d.reduceRight((E,_,T)=>{let C,N=!1,S=null,A=null;t&&(C=h&&_.route.id?h[_.route.id]:void 0,S=_.route.errorElement||WE,p&&(v<0&&T===0?(N=!0,A=null):v===T&&(N=!0,A=_.route.hydrateFallbackElement||null)));let F=e.concat(d.slice(0,T+1)),D=()=>{let H;return C?H=S:N?H=A:_.route.Component?H=U.createElement(_.route.Component,null):_.route.element?H=_.route.element:H=E,U.createElement(GE,{match:_,routeContext:{outlet:E,matches:F,isDataRoute:t!=null},children:H})};return t&&(_.route.ErrorBoundary||_.route.errorElement||T===0)?U.createElement(HE,{location:t.location,revalidation:t.revalidation,component:S,error:C,children:D(),routeContext:{outlet:null,matches:F,isDataRoute:!0}}):D()},null)}var kv=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(kv||{}),ru=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(ru||{});function QE(n){let e=U.useContext(Au);return e||dt(!1),e}function YE(n){let e=U.useContext(Cv);return e||dt(!1),e}function XE(n){let e=U.useContext(ei);return e||dt(!1),e}function Pv(n){let e=XE(),t=e.matches[e.matches.length-1];return t.route.id||dt(!1),t.route.id}function JE(){var n;let e=U.useContext(Rv),t=YE(ru.UseRouteError),i=Pv(ru.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function ZE(){let{router:n}=QE(kv.UseNavigateStable),e=Pv(ru.UseNavigateStable),t=U.useRef(!1);return Av(()=>{t.current=!0}),U.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,rl({fromRouteId:e},l)))},[n,e])}const zg={};function ex(n,e){zg[e]||(zg[e]=!0,console.warn(e))}const Bg=(n,e,t)=>ex(n,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+n+"` future flag to opt-in early. ")+("For more information, see "+t+"."));function tx(n,e){n!=null&&n.v7_startTransition||Bg("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(n!=null&&n.v7_relativeSplatPath)&&!e&&Bg("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function iu(n){let{to:e,replace:t,state:i,relative:o}=n;qo()||dt(!1);let{future:l,static:d}=U.useContext(Zr),{matches:h}=U.useContext(ei),{pathname:p}=ir(),v=Wo(),E=Rf(e,Cf(h,l.v7_relativeSplatPath),p,o==="path"),_=JSON.stringify(E);return U.useEffect(()=>v(JSON.parse(_),{replace:t,state:i,relative:o}),[v,_,o,t,i]),null}function nx(n){return zE(n.context)}function Qt(n){dt(!1)}function rx(n){let{basename:e="/",children:t=null,location:i,navigationType:o=bi.Pop,navigator:l,static:d=!1,future:h}=n;qo()&&dt(!1);let p=e.replace(/^\/*/,"/"),v=U.useMemo(()=>({basename:p,navigator:l,static:d,future:rl({v7_relativeSplatPath:!1},h)}),[p,h,l,d]);typeof i=="string"&&(i=$o(i));let{pathname:E="/",search:_="",hash:T="",state:C=null,key:N="default"}=i,S=U.useMemo(()=>{let A=No(E,p);return A==null?null:{location:{pathname:A,search:_,hash:T,state:C,key:N},navigationType:o}},[p,E,_,T,C,N,o]);return S==null?null:U.createElement(Zr.Provider,{value:v},U.createElement(ku.Provider,{children:t,value:S}))}function ix(n){let{children:e,location:t}=n;return BE(Gh(e),t)}new Promise(()=>{});function Gh(n,e){e===void 0&&(e=[]);let t=[];return U.Children.forEach(n,(i,o)=>{if(!U.isValidElement(i))return;let l=[...e,o];if(i.type===U.Fragment){t.push.apply(t,Gh(i.props.children,l));return}i.type!==Qt&&dt(!1),!i.props.index||!i.props.children||dt(!1);let d={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=Gh(i.props.children,l)),t.push(d)}),t}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function su(){return su=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},su.apply(this,arguments)}function bv(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function sx(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ox(n,e){return n.button===0&&(!e||e==="_self")&&!sx(n)}const ax=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],lx=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],cx="6";try{window.__reactRouterVersion=cx}catch{}const ux=U.createContext({isTransitioning:!1}),dx="startTransition",$g=hE[dx];function hx(n){let{basename:e,children:t,future:i,window:o}=n,l=U.useRef();l.current==null&&(l.current=fE({window:o,v5Compat:!0}));let d=l.current,[h,p]=U.useState({action:d.action,location:d.location}),{v7_startTransition:v}=i||{},E=U.useCallback(_=>{v&&$g?$g(()=>p(_)):p(_)},[p,v]);return U.useLayoutEffect(()=>d.listen(E),[d,E]),U.useEffect(()=>tx(i),[i]),U.createElement(rx,{basename:e,children:t,location:h.location,navigationType:h.action,navigator:d,future:i})}const fx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",px=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mx=U.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:d,state:h,target:p,to:v,preventScrollReset:E,viewTransition:_}=e,T=bv(e,ax),{basename:C}=U.useContext(Zr),N,S=!1;if(typeof v=="string"&&px.test(v)&&(N=v,fx))try{let H=new URL(window.location.href),K=v.startsWith("//")?new URL(H.protocol+v):new URL(v),ge=No(K.pathname,C);K.origin===H.origin&&ge!=null?v=ge+K.search+K.hash:S=!0}catch{}let A=ME(v,{relative:o}),F=vx(v,{replace:d,state:h,target:p,preventScrollReset:E,relative:o,viewTransition:_});function D(H){i&&i(H),H.defaultPrevented||F(H)}return U.createElement("a",su({},T,{href:N||A,onClick:S||l?i:D,ref:t,target:p}))}),gx=U.forwardRef(function(e,t){let{"aria-current":i="page",caseSensitive:o=!1,className:l="",end:d=!1,style:h,to:p,viewTransition:v,children:E}=e,_=bv(e,lx),T=Pu(p,{relative:_.relative}),C=ir(),N=U.useContext(Cv),{navigator:S,basename:A}=U.useContext(Zr),F=N!=null&&_x(T)&&v===!0,D=S.encodeLocation?S.encodeLocation(T).pathname:T.pathname,H=C.pathname,K=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;o||(H=H.toLowerCase(),K=K?K.toLowerCase():null,D=D.toLowerCase()),K&&A&&(K=No(K,A)||K);const ge=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let ce=H===D||!d&&H.startsWith(D)&&H.charAt(ge)==="/",O=K!=null&&(K===D||!d&&K.startsWith(D)&&K.charAt(D.length)==="/"),R={isActive:ce,isPending:O,isTransitioning:F},b=ce?i:void 0,j;typeof l=="function"?j=l(R):j=[l,ce?"active":null,O?"pending":null,F?"transitioning":null].filter(Boolean).join(" ");let M=typeof h=="function"?h(R):h;return U.createElement(mx,su({},_,{"aria-current":b,className:j,ref:t,style:M,to:p,viewTransition:v}),typeof E=="function"?E(R):E)});var Kh;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Kh||(Kh={}));var qg;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(qg||(qg={}));function yx(n){let e=U.useContext(Au);return e||dt(!1),e}function vx(n,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:d,viewTransition:h}=e===void 0?{}:e,p=Wo(),v=ir(),E=Pu(n,{relative:d});return U.useCallback(_=>{if(ox(_,t)){_.preventDefault();let T=i!==void 0?i:tu(v)===tu(E);p(n,{replace:T,state:o,preventScrollReset:l,relative:d,viewTransition:h})}},[v,p,E,i,o,t,n,l,d,h])}function _x(n,e){e===void 0&&(e={});let t=U.useContext(ux);t==null&&dt(!1);let{basename:i}=yx(Kh.useViewTransitionState),o=Pu(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=No(t.currentLocation.pathname,i)||t.currentLocation.pathname,d=No(t.nextLocation.pathname,i)||t.nextLocation.pathname;return nu(o.pathname,d)!=null||nu(o.pathname,l)!=null}const wx={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADMIN_EMAIL:"vit@gmail.com",VITE_ADMIN_PASSWORD:"vit",VITE_FIREBASE_API_KEY:"AIzaSyANKJphDLlTyzYGmQcamq-BqRJcRuvQ3YQ",VITE_FIREBASE_APP_ID:"1:233185416924:web:fe49116fc148bce1544619",VITE_FIREBASE_AUTH_DOMAIN:"teacher-fb2b7.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"233185416924",VITE_FIREBASE_PROJECT_ID:"teacher-fb2b7",VITE_FIREBASE_STORAGE_BUCKET:"teacher-fb2b7.appspot.com"},Wg=n=>{let e;const t=new Set,i=(E,_)=>{const T=typeof E=="function"?E(e):E;if(!Object.is(T,e)){const C=e;e=_??(typeof T!="object"||T===null)?T:Object.assign({},e,T),t.forEach(N=>N(e,C))}},o=()=>e,p={setState:i,getState:o,getInitialState:()=>v,subscribe:E=>(t.add(E),()=>t.delete(E)),destroy:()=>{(wx?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},v=e=n(i,o,p);return p},Ex=n=>n?Wg(n):Wg;var kh={exports:{}},Ph={},bh={exports:{}},Nh={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hg;function xx(){if(Hg)return Nh;Hg=1;var n=hl();function e(_,T){return _===T&&(_!==0||1/_===1/T)||_!==_&&T!==T}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,o=n.useEffect,l=n.useLayoutEffect,d=n.useDebugValue;function h(_,T){var C=T(),N=i({inst:{value:C,getSnapshot:T}}),S=N[0].inst,A=N[1];return l(function(){S.value=C,S.getSnapshot=T,p(S)&&A({inst:S})},[_,C,T]),o(function(){return p(S)&&A({inst:S}),_(function(){p(S)&&A({inst:S})})},[_]),d(C),C}function p(_){var T=_.getSnapshot;_=_.value;try{var C=T();return!t(_,C)}catch{return!0}}function v(_,T){return T()}var E=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?v:h;return Nh.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:E,Nh}var Gg;function Tx(){return Gg||(Gg=1,bh.exports=xx()),bh.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kg;function Ix(){if(Kg)return Ph;Kg=1;var n=hl(),e=Tx();function t(v,E){return v===E&&(v!==0||1/v===1/E)||v!==v&&E!==E}var i=typeof Object.is=="function"?Object.is:t,o=e.useSyncExternalStore,l=n.useRef,d=n.useEffect,h=n.useMemo,p=n.useDebugValue;return Ph.useSyncExternalStoreWithSelector=function(v,E,_,T,C){var N=l(null);if(N.current===null){var S={hasValue:!1,value:null};N.current=S}else S=N.current;N=h(function(){function F(ce){if(!D){if(D=!0,H=ce,ce=T(ce),C!==void 0&&S.hasValue){var O=S.value;if(C(O,ce))return K=O}return K=ce}if(O=K,i(H,ce))return O;var R=T(ce);return C!==void 0&&C(O,R)?O:(H=ce,K=R)}var D=!1,H,K,ge=_===void 0?null:_;return[function(){return F(E())},ge===null?void 0:function(){return F(ge())}]},[E,_,T,C]);var A=o(v,N[0],N[1]);return d(function(){S.hasValue=!0,S.value=A},[A]),p(A),A},Ph}var Qg;function Sx(){return Qg||(Qg=1,kh.exports=Ix()),kh.exports}var Cx=Sx();const Rx=Sf(Cx),Nv={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADMIN_EMAIL:"vit@gmail.com",VITE_ADMIN_PASSWORD:"vit",VITE_FIREBASE_API_KEY:"AIzaSyANKJphDLlTyzYGmQcamq-BqRJcRuvQ3YQ",VITE_FIREBASE_APP_ID:"1:233185416924:web:fe49116fc148bce1544619",VITE_FIREBASE_AUTH_DOMAIN:"teacher-fb2b7.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"233185416924",VITE_FIREBASE_PROJECT_ID:"teacher-fb2b7",VITE_FIREBASE_STORAGE_BUCKET:"teacher-fb2b7.appspot.com"},{useDebugValue:Ax}=Ev,{useSyncExternalStoreWithSelector:kx}=Rx;let Yg=!1;const Px=n=>n;function bx(n,e=Px,t){(Nv?"production":void 0)!=="production"&&t&&!Yg&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Yg=!0);const i=kx(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return Ax(i),i}const Xg=n=>{(Nv?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?Ex(n):n,t=(i,o)=>bx(e,i,o);return Object.assign(t,e),t},Nx=n=>n?Xg(n):Xg;var Jg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Dx=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],d=n[t++],h=n[t++],p=((o&7)<<18|(l&63)<<12|(d&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],d=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|d&63)}}return e.join("")},Ov={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],d=o+1<n.length,h=d?n[o+1]:0,p=o+2<n.length,v=p?n[o+2]:0,E=l>>2,_=(l&3)<<4|h>>4;let T=(h&15)<<2|v>>6,C=v&63;p||(C=64,d||(T=64)),i.push(t[E],t[_],t[T],t[C])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Dv(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Dx(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],h=o<n.length?t[n.charAt(o)]:0;++o;const v=o<n.length?t[n.charAt(o)]:64;++o;const _=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||h==null||v==null||_==null)throw new Ox;const T=l<<2|h>>4;if(i.push(T),v!==64){const C=h<<4&240|v>>2;if(i.push(C),_!==64){const N=v<<6&192|_;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Ox extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jx=function(n){const e=Dv(n);return Ov.encodeByteArray(e,!0)},ou=function(n){return jx(n).replace(/\./g,"")},jv=function(n){try{return Ov.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=()=>Lx().__FIREBASE_DEFAULTS__,Mx=()=>{if(typeof process>"u"||typeof Jg>"u")return;const n=Jg.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Fx=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&jv(n[1]);return e&&JSON.parse(e)},bu=()=>{try{return Vx()||Mx()||Fx()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Lv=n=>{var e,t;return(t=(e=bu())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Vv=n=>{const e=Lv(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Mv=()=>{var n;return(n=bu())===null||n===void 0?void 0:n.config},Fv=n=>{var e;return(e=bu())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ou(JSON.stringify(t)),ou(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jt())}function Bx(){var n;const e=(n=bu())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $x(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qx(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Wx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Hx(){const n=Jt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Gx(){return!Bx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Kx(){try{return typeof indexedDB=="object"}catch{return!1}}function Qx(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="FirebaseError";class Ir extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Yx,Object.setPrototypeOf(this,Ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fl.prototype.create)}}class fl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],d=l?Xx(l,i):"Error",h=`${this.serviceName}: ${d} (${o}).`;return new Ir(o,h,i)}}function Xx(n,e){return n.replace(Jx,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Jx=/\{\$([^}]+)}/g;function Zx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function au(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],d=e[o];if(Zg(l)&&Zg(d)){if(!au(l,d))return!1}else if(l!==d)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Zg(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function eT(n,e){const t=new tT(n,e);return t.subscribe.bind(t)}class tT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");nT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Dh),o.error===void 0&&(o.error=Dh),o.complete===void 0&&(o.complete=Dh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nT(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Dh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(n){return n&&n._delegate?n._delegate:n}class Mi{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Ux;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sT(e))try{this.getOrInitializeService({instanceIdentifier:_s})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=_s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_s){return this.instances.has(e)}getOptions(e=_s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,d]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);i===h&&d.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const d=this.instances.get(o);return d&&e(d,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:iT(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=_s){return this.component?this.component.multipleInstances?e:_s:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iT(n){return n===_s?void 0:n}function sT(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new rT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const aT={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},lT=Le.INFO,cT={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},uT=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=cT[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Af{constructor(e){this.name=e,this._logLevel=lT,this._logHandler=uT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const dT=(n,e)=>e.some(t=>n instanceof t);let ey,ty;function hT(){return ey||(ey=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fT(){return ty||(ty=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zv=new WeakMap,Qh=new WeakMap,Bv=new WeakMap,Oh=new WeakMap,kf=new WeakMap;function pT(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",d)},l=()=>{t(ji(n.result)),o()},d=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&zv.set(t,n)}).catch(()=>{}),kf.set(e,n),e}function mT(n){if(Qh.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",d),n.removeEventListener("abort",d)},l=()=>{t(),o()},d=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",d),n.addEventListener("abort",d)});Qh.set(n,e)}let Yh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Qh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Bv.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ji(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function gT(n){Yh=n(Yh)}function yT(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(jh(this),e,...t);return Bv.set(i,e.sort?e.sort():[e]),ji(i)}:fT().includes(n)?function(...e){return n.apply(jh(this),e),ji(zv.get(this))}:function(...e){return ji(n.apply(jh(this),e))}}function vT(n){return typeof n=="function"?yT(n):(n instanceof IDBTransaction&&mT(n),dT(n,hT())?new Proxy(n,Yh):n)}function ji(n){if(n instanceof IDBRequest)return pT(n);if(Oh.has(n))return Oh.get(n);const e=vT(n);return e!==n&&(Oh.set(n,e),kf.set(e,n)),e}const jh=n=>kf.get(n);function _T(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const d=indexedDB.open(n,e),h=ji(d);return i&&d.addEventListener("upgradeneeded",p=>{i(ji(d.result),p.oldVersion,p.newVersion,ji(d.transaction),p)}),t&&d.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),h}const wT=["get","getKey","getAll","getAllKeys","count"],ET=["put","add","delete","clear"],Lh=new Map;function ny(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Lh.get(e))return Lh.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=ET.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||wT.includes(t)))return;const l=async function(d,...h){const p=this.transaction(d,o?"readwrite":"readonly");let v=p.store;return i&&(v=v.index(h.shift())),(await Promise.all([v[t](...h),o&&p.done]))[0]};return Lh.set(e,l),l}gT(n=>({...n,get:(e,t,i)=>ny(e,t)||n.get(e,t,i),has:(e,t)=>!!ny(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(TT(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function TT(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xh="@firebase/app",ry="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr=new Af("@firebase/app"),IT="@firebase/app-compat",ST="@firebase/analytics-compat",CT="@firebase/analytics",RT="@firebase/app-check-compat",AT="@firebase/app-check",kT="@firebase/auth",PT="@firebase/auth-compat",bT="@firebase/database",NT="@firebase/data-connect",DT="@firebase/database-compat",OT="@firebase/functions",jT="@firebase/functions-compat",LT="@firebase/installations",VT="@firebase/installations-compat",MT="@firebase/messaging",FT="@firebase/messaging-compat",UT="@firebase/performance",zT="@firebase/performance-compat",BT="@firebase/remote-config",$T="@firebase/remote-config-compat",qT="@firebase/storage",WT="@firebase/storage-compat",HT="@firebase/firestore",GT="@firebase/vertexai",KT="@firebase/firestore-compat",QT="firebase",YT="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh="[DEFAULT]",XT={[Xh]:"fire-core",[IT]:"fire-core-compat",[CT]:"fire-analytics",[ST]:"fire-analytics-compat",[AT]:"fire-app-check",[RT]:"fire-app-check-compat",[kT]:"fire-auth",[PT]:"fire-auth-compat",[bT]:"fire-rtdb",[NT]:"fire-data-connect",[DT]:"fire-rtdb-compat",[OT]:"fire-fn",[jT]:"fire-fn-compat",[LT]:"fire-iid",[VT]:"fire-iid-compat",[MT]:"fire-fcm",[FT]:"fire-fcm-compat",[UT]:"fire-perf",[zT]:"fire-perf-compat",[BT]:"fire-rc",[$T]:"fire-rc-compat",[qT]:"fire-gcs",[WT]:"fire-gcs-compat",[HT]:"fire-fst",[KT]:"fire-fst-compat",[GT]:"fire-vertex","fire-js":"fire-js",[QT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu=new Map,JT=new Map,Zh=new Map;function iy(n,e){try{n.container.addComponent(e)}catch(t){Hr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ts(n){const e=n.name;if(Zh.has(e))return Hr.debug(`There were multiple attempts to register component ${e}.`),!1;Zh.set(e,n);for(const t of lu.values())iy(t,n);for(const t of JT.values())iy(t,n);return!0}function Nu(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ni(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Li=new fl("app","Firebase",ZT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Mi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Li.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=YT;function $v(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Jh,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw Li.create("bad-app-name",{appName:String(o)});if(t||(t=Mv()),!t)throw Li.create("no-options");const l=lu.get(o);if(l){if(au(t,l.options)&&au(i,l.config))return l;throw Li.create("duplicate-app",{appName:o})}const d=new oT(o);for(const p of Zh.values())d.addComponent(p);const h=new e1(t,i,d);return lu.set(o,h),h}function Pf(n=Jh){const e=lu.get(n);if(!e&&n===Jh&&Mv())return $v();if(!e)throw Li.create("no-app",{appName:n});return e}function yr(n,e,t){var i;let o=(i=XT[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),d=e.match(/\s|\//);if(l||d){const h=[`Unable to register library "${o}" with version "${e}":`];l&&h.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&d&&h.push("and"),d&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hr.warn(h.join(" "));return}Ts(new Mi(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="firebase-heartbeat-database",n1=1,il="firebase-heartbeat-store";let Vh=null;function qv(){return Vh||(Vh=_T(t1,n1,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(il)}catch(t){console.warn(t)}}}}).catch(n=>{throw Li.create("idb-open",{originalErrorMessage:n.message})})),Vh}async function r1(n){try{const t=(await qv()).transaction(il),i=await t.objectStore(il).get(Wv(n));return await t.done,i}catch(e){if(e instanceof Ir)Hr.warn(e.message);else{const t=Li.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hr.warn(t.message)}}}async function sy(n,e){try{const i=(await qv()).transaction(il,"readwrite");await i.objectStore(il).put(e,Wv(n)),await i.done}catch(t){if(t instanceof Ir)Hr.warn(t.message);else{const i=Li.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Hr.warn(i.message)}}}function Wv(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=1024,s1=30*24*60*60*1e3;class o1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new l1(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=oy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(d=>d.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(d=>{const h=new Date(d.date).valueOf();return Date.now()-h<=s1}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Hr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=oy(),{heartbeatsToSend:i,unsentEntries:o}=a1(this._heartbeatsCache.heartbeats),l=ou(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Hr.warn(t),""}}}function oy(){return new Date().toISOString().substring(0,10)}function a1(n,e=i1){const t=[];let i=n.slice();for(const o of n){const l=t.find(d=>d.agent===o.agent);if(l){if(l.dates.push(o.date),ay(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ay(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class l1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Kx()?Qx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await r1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return sy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return sy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function ay(n){return ou(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(n){Ts(new Mi("platform-logger",e=>new xT(e),"PRIVATE")),Ts(new Mi("heartbeat",e=>new o1(e),"PRIVATE")),yr(Xh,ry,n),yr(Xh,ry,"esm2017"),yr("fire-js","")}c1("");var u1="firebase",d1="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yr(u1,d1,"app");function bf(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function Hv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const h1=Hv,Gv=new fl("auth","Firebase",Hv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=new Af("@firebase/auth");function f1(n,...e){cu.logLevel<=Le.WARN&&cu.warn(`Auth (${Cs}): ${n}`,...e)}function Wc(n,...e){cu.logLevel<=Le.ERROR&&cu.error(`Auth (${Cs}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(n,...e){throw Nf(n,...e)}function vr(n,...e){return Nf(n,...e)}function Kv(n,e,t){const i=Object.assign(Object.assign({},h1()),{[e]:t});return new fl("auth","Firebase",i).create(e,{appName:n.name})}function Es(n){return Kv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nf(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return Gv.create(n,...e)}function Re(n,e,...t){if(!n)throw Nf(e,...t)}function Br(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Wc(e),new Error(e)}function Kr(n,e){n||Br(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function p1(){return ly()==="http:"||ly()==="https:"}function ly(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(p1()||qx()||"connection"in navigator)?navigator.onLine:!0}function g1(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,t){this.shortDelay=e,this.longDelay=t,Kr(t>e,"Short delay should be less than long delay!"),this.isMobile=zx()||Wx()}get(){return m1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(n,e){Kr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=new ml(3e4,6e4);function Of(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ho(n,e,t,i,o={}){return Yv(n,o,async()=>{let l={},d={};i&&(e==="GET"?d=i:l={body:JSON.stringify(i)});const h=pl(Object.assign({key:n.config.apiKey},d)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const v=Object.assign({method:e,headers:p},l);return $x()||(v.referrerPolicy="no-referrer"),Qv.fetch()(Xv(n,n.config.apiHost,t,h),v)})}async function Yv(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},y1),e);try{const o=new w1(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw Mc(n,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const h=l.ok?d.errorMessage:d.error.message,[p,v]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mc(n,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw Mc(n,"email-already-in-use",d);if(p==="USER_DISABLED")throw Mc(n,"user-disabled",d);const E=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Kv(n,E,v);Gr(n,E)}}catch(o){if(o instanceof Ir)throw o;Gr(n,"network-request-failed",{message:String(o)})}}async function _1(n,e,t,i,o={}){const l=await Ho(n,e,t,i,o);return"mfaPendingCredential"in l&&Gr(n,"multi-factor-auth-required",{_serverResponse:l}),l}function Xv(n,e,t,i){const o=`${e}${t}?${i}`;return n.config.emulator?Df(n.config,o):`${n.config.apiScheme}://${o}`}class w1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(vr(this.auth,"network-request-failed")),v1.get())})}}function Mc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=vr(n,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E1(n,e){return Ho(n,"POST","/v1/accounts:delete",e)}async function Jv(n,e){return Ho(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function x1(n,e=!1){const t=Zt(n),i=await t.getIdToken(e),o=jf(i);Re(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,d=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:Xa(Mh(o.auth_time)),issuedAtTime:Xa(Mh(o.iat)),expirationTime:Xa(Mh(o.exp)),signInProvider:d||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Mh(n){return Number(n)*1e3}function jf(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Wc("JWT malformed, contained fewer than 3 sections"),null;try{const o=jv(t);return o?JSON.parse(o):(Wc("Failed to decode base64 JWT payload"),null)}catch(o){return Wc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function cy(n){const e=jf(n);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ir&&T1(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function T1({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xa(this.lastLoginAt),this.creationTime=Xa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uu(n){var e;const t=n.auth,i=await n.getIdToken(),o=await sl(n,Jv(t,{idToken:i}));Re(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];n._notifyReloadListener(l);const d=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Zv(l.providerUserInfo):[],h=C1(n.providerData,d),p=n.isAnonymous,v=!(n.email&&l.passwordHash)&&!(h!=null&&h.length),E=p?v:!1,_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new tf(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(n,_)}async function S1(n){const e=Zt(n);await uu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function C1(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Zv(n){return n.map(e=>{var{providerId:t}=e,i=bf(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R1(n,e){const t=await Yv(n,{},async()=>{const i=pl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,d=Xv(n,o,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",Qv.fetch()(d,{method:"POST",headers:h,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function A1(n,e){return Ho(n,"POST","/v2/accounts:revokeToken",Of(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=cy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await R1(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,d=new Ro;return i&&(Re(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(Re(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),l&&(Re(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ro,this.toJSON())}_performRefresh(){return Br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(n,e){Re(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class $r{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=bf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new I1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new tf(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await sl(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return x1(this,e)}reload(){return S1(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new $r(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await uu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ni(this.auth.app))return Promise.reject(Es(this.auth));const e=await this.getIdToken();return await sl(this,E1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,d,h,p,v,E;const _=(i=t.displayName)!==null&&i!==void 0?i:void 0,T=(o=t.email)!==null&&o!==void 0?o:void 0,C=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,N=(d=t.photoURL)!==null&&d!==void 0?d:void 0,S=(h=t.tenantId)!==null&&h!==void 0?h:void 0,A=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,F=(v=t.createdAt)!==null&&v!==void 0?v:void 0,D=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:H,emailVerified:K,isAnonymous:ge,providerData:ce,stsTokenManager:O}=t;Re(H&&O,e,"internal-error");const R=Ro.fromJSON(this.name,O);Re(typeof H=="string",e,"internal-error"),Ci(_,e.name),Ci(T,e.name),Re(typeof K=="boolean",e,"internal-error"),Re(typeof ge=="boolean",e,"internal-error"),Ci(C,e.name),Ci(N,e.name),Ci(S,e.name),Ci(A,e.name),Ci(F,e.name),Ci(D,e.name);const b=new $r({uid:H,auth:e,email:T,emailVerified:K,displayName:_,isAnonymous:ge,photoURL:N,phoneNumber:C,tenantId:S,stsTokenManager:R,createdAt:F,lastLoginAt:D});return ce&&Array.isArray(ce)&&(b.providerData=ce.map(j=>Object.assign({},j))),A&&(b._redirectEventId=A),b}static async _fromIdTokenResponse(e,t,i=!1){const o=new Ro;o.updateFromServerResponse(t);const l=new $r({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await uu(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Re(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Zv(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),h=new Ro;h.updateFromIdToken(i);const p=new $r({uid:o.localId,auth:e,stsTokenManager:h,isAnonymous:d}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new tf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,v),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy=new Map;function qr(n){Kr(n instanceof Function,"Expected a class definition");let e=uy.get(n);return e?(Kr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,uy.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}e0.type="NONE";const dy=e0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(n,e,t){return`firebase:${n}:${e}:${t}`}class Ao{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Hc(this.userKey,o.apiKey,l),this.fullPersistenceKey=Hc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?$r._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ao(qr(dy),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||qr(dy);const d=Hc(i,e.config.apiKey,e.name);let h=null;for(const v of t)try{const E=await v._get(d);if(E){const _=$r._fromJSON(e,E);v!==l&&(h=_),l=v;break}}catch{}const p=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Ao(l,e,i):(l=p[0],h&&await l._set(d,h.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(d)}catch{}})),new Ao(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(i0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(t0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(o0(e))return"Blackberry";if(a0(e))return"Webos";if(n0(e))return"Safari";if((e.includes("chrome/")||r0(e))&&!e.includes("edge/"))return"Chrome";if(s0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function t0(n=Jt()){return/firefox\//i.test(n)}function n0(n=Jt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function r0(n=Jt()){return/crios\//i.test(n)}function i0(n=Jt()){return/iemobile/i.test(n)}function s0(n=Jt()){return/android/i.test(n)}function o0(n=Jt()){return/blackberry/i.test(n)}function a0(n=Jt()){return/webos/i.test(n)}function Lf(n=Jt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function k1(n=Jt()){var e;return Lf(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function P1(){return Hx()&&document.documentMode===10}function l0(n=Jt()){return Lf(n)||s0(n)||a0(n)||o0(n)||/windows phone/i.test(n)||i0(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(n,e=[]){let t;switch(n){case"Browser":t=hy(Jt());break;case"Worker":t=`${hy(Jt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Cs}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((d,h)=>{try{const p=e(l);d(p)}catch(p){h(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N1(n,e={}){return Ho(n,"GET","/v2/passwordPolicy",Of(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=6;class O1{constructor(e){var t,i,o,l;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=d.minPasswordLength)!==null&&t!==void 0?t:D1,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,d,h;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(d=p.containsNumericCharacter)!==null&&d!==void 0?d:!0),p.isValid&&(p.isValid=(h=p.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fy(this),this.idTokenSubscription=new fy(this),this.beforeStateQueue=new b1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=qr(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await Ao.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Jv(this,{idToken:e}),i=await $r._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ni(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!d||d===h)&&(p!=null&&p.user)&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await uu(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=g1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ni(this.app))return Promise.reject(Es(this));const t=e?Zt(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ni(this.app)?Promise.reject(Es(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ni(this.app)?Promise.reject(Es(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await N1(this),t=new O1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new fl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await A1(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&qr(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await Ao.create(this,[qr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(h,this,"internal-error"),h.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{d=!0,p()}}else{const p=e.addObserver(t);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=c0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&f1(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Vf(n){return Zt(n)}class fy{constructor(e){this.auth=e,this.observer=null,this.addObserver=eT(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function L1(n){Mf=n}function V1(n){return Mf.loadJS(n)}function M1(){return Mf.gapiScript}function F1(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(n,e){const t=Nu(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(au(l,e??{}))return o;Gr(o,"already-initialized")}return t.initialize({options:e})}function z1(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(qr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function B1(n,e,t){const i=Vf(n);Re(i._canInitEmulator,i,"emulator-config-failed"),Re(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=u0(e),{host:d,port:h}=$1(e),p=h===null?"":`:${h}`;i.config.emulator={url:`${l}//${d}${p}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:d,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})}),q1()}function u0(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function $1(n){const e=u0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:py(i.substr(l.length+1))}}else{const[l,d]=i.split(":");return{host:l,port:py(d)}}}function py(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function q1(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Br("not implemented")}_getIdTokenResponse(e){return Br("not implemented")}_linkToIdToken(e,t){return Br("not implemented")}_getReauthenticationResolver(e){return Br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(n,e){return _1(n,"POST","/v1/accounts:signInWithIdp",Of(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1="http://localhost";class Is extends d0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Is(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Gr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=bf(t,["providerId","signInMethod"]);if(!i||!o)return null;const d=new Is(i,o);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return ko(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,ko(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ko(e,t)}buildRequest(){const e={requestUri:W1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl extends h0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends gl{constructor(){super("facebook.com")}static credential(e){return Is._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ri.credential(e.oauthAccessToken)}catch{return null}}}Ri.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ri.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends gl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Is._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ai.credential(t,i)}catch{return null}}}Ai.GOOGLE_SIGN_IN_METHOD="google.com";Ai.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends gl{constructor(){super("github.com")}static credential(e){return Is._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.GITHUB_SIGN_IN_METHOD="github.com";ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends gl{constructor(){super("twitter.com")}static credential(e,t){return Is._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Pi.credential(t,i)}catch{return null}}}Pi.TWITTER_SIGN_IN_METHOD="twitter.com";Pi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await $r._fromIdTokenResponse(e,i,o),d=my(i);return new Do({user:l,providerId:d,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=my(i);return new Do({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function my(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends Ir{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,du.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new du(e,t,i,o)}}function f0(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?du._fromErrorAndOperation(n,l,e,i):l})}async function H1(n,e,t=!1){const i=await sl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Do._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G1(n,e,t=!1){const{auth:i}=n;if(Ni(i.app))return Promise.reject(Es(i));const o="reauthenticate";try{const l=await sl(n,f0(i,o,e,n),t);Re(l.idToken,i,"internal-error");const d=jf(l.idToken);Re(d,i,"internal-error");const{sub:h}=d;return Re(n.uid===h,i,"user-mismatch"),Do._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Gr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K1(n,e,t=!1){if(Ni(n.app))return Promise.reject(Es(n));const i="signIn",o=await f0(n,i,e),l=await Do._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}function Q1(n,e,t,i){return Zt(n).onIdTokenChanged(e,t,i)}function Y1(n,e,t){return Zt(n).beforeAuthStateChanged(e,t)}const hu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hu,"1"),this.storage.removeItem(hu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=1e3,J1=10;class m0 extends p0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=l0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,h,p)=>{this.notifyListeners(d,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!t&&this.localCache[i]===d||this.notifyListeners(i,d)},l=this.storage.getItem(i);P1()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,J1):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},X1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}m0.type="LOCAL";const Z1=m0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0 extends p0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}g0.type="SESSION";const y0=g0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Du(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const h=Array.from(d).map(async v=>v(t.origin,l)),p=await eI(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Du.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,d;return new Promise((h,p)=>{const v=Ff("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(_){const T=_;if(T.data.eventId===v)switch(T.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(T.data.response);break;default:clearTimeout(E),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(){return window}function nI(n){_r().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(){return typeof _r().WorkerGlobalScope<"u"&&typeof _r().importScripts=="function"}async function rI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iI(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function sI(){return v0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="firebaseLocalStorageDb",oI=1,fu="firebaseLocalStorage",w0="fbase_key";class yl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ou(n,e){return n.transaction([fu],e?"readwrite":"readonly").objectStore(fu)}function aI(){const n=indexedDB.deleteDatabase(_0);return new yl(n).toPromise()}function nf(){const n=indexedDB.open(_0,oI);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(fu,{keyPath:w0})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(fu)?e(i):(i.close(),await aI(),e(await nf()))})})}async function gy(n,e,t){const i=Ou(n,!0).put({[w0]:e,value:t});return new yl(i).toPromise()}async function lI(n,e){const t=Ou(n,!1).get(e),i=await new yl(t).toPromise();return i===void 0?null:i.value}function yy(n,e){const t=Ou(n,!0).delete(e);return new yl(t).toPromise()}const cI=800,uI=3;class E0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>uI)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return v0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Du._getInstance(sI()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await rI(),!this.activeServiceWorker)return;this.sender=new tI(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||iI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nf();return await gy(e,hu,"1"),await yy(e,hu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>gy(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>lI(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>yy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Ou(o,!1).getAll();return new yl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}E0.type="LOCAL";const dI=E0;new ml(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(n,e){return e?qr(e):(Re(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf extends d0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ko(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ko(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function fI(n){return K1(n.auth,new Uf(n),n.bypassAuthState)}function pI(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),G1(t,new Uf(n),n.bypassAuthState)}async function mI(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),H1(t,new Uf(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:d,type:h}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fI;case"linkViaPopup":case"linkViaRedirect":return mI;case"reauthViaPopup":case"reauthViaRedirect":return pI;default:Gr(this.auth,"internal-error")}}resolve(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=new ml(2e3,1e4);class Co extends x0{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Co.currentPopupAction&&Co.currentPopupAction.cancel(),Co.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Kr(this.filter.length===1,"Popup operations only handle one event");const e=Ff();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(vr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(vr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Co.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gI.get())};e()}}Co.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="pendingRedirect",Gc=new Map;class vI extends x0{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Gc.get(this.auth._key());if(!e){try{const i=await _I(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Gc.set(this.auth._key(),e)}return this.bypassAuthState||Gc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _I(n,e){const t=xI(e),i=EI(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function wI(n,e){Gc.set(n._key(),e)}function EI(n){return qr(n._redirectPersistence)}function xI(n){return Hc(yI,n.config.apiKey,n.name)}async function TI(n,e,t=!1){if(Ni(n.app))return Promise.reject(Es(n));const i=Vf(n),o=hI(i,e),d=await new vI(i,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=10*60*1e3;class SI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!CI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!T0(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(vr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=II&&this.cachedEventUids.clear(),this.cachedEventUids.has(vy(e))}saveEventToCache(e){this.cachedEventUids.add(vy(e)),this.lastProcessedEventTime=Date.now()}}function vy(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function T0({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function CI(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return T0(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RI(n,e={}){return Ho(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kI=/^https?/;async function PI(n){if(n.config.emulator)return;const{authorizedDomains:e}=await RI(n);for(const t of e)try{if(bI(t))return}catch{}Gr(n,"unauthorized-domain")}function bI(n){const e=ef(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const d=new URL(n);return d.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===i}if(!kI.test(t))return!1;if(AI.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=new ml(3e4,6e4);function _y(){const n=_r().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function DI(n){return new Promise((e,t)=>{var i,o,l;function d(){_y(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_y(),t(vr(n,"network-request-failed"))},timeout:NI.get()})}if(!((o=(i=_r().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=_r().gapi)===null||l===void 0)&&l.load)d();else{const h=F1("iframefcb");return _r()[h]=()=>{gapi.load?d():t(vr(n,"network-request-failed"))},V1(`${M1()}?onload=${h}`).catch(p=>t(p))}}).catch(e=>{throw Kc=null,e})}let Kc=null;function OI(n){return Kc=Kc||DI(n),Kc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI=new ml(5e3,15e3),LI="__/auth/iframe",VI="emulator/auth/iframe",MI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UI(n){const e=n.config;Re(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Df(e,VI):`https://${n.config.authDomain}/${LI}`,i={apiKey:e.apiKey,appName:n.name,v:Cs},o=FI.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${pl(i).slice(1)}`}async function zI(n){const e=await OI(n),t=_r().gapi;return Re(t,n,"internal-error"),e.open({where:document.body,url:UI(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MI,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const d=vr(n,"network-request-failed"),h=_r().setTimeout(()=>{l(d)},jI.get());function p(){_r().clearTimeout(h),o(i)}i.ping(p).then(p,()=>{l(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$I=500,qI=600,WI="_blank",HI="http://localhost";class wy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GI(n,e,t,i=$I,o=qI){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const p=Object.assign(Object.assign({},BI),{width:i.toString(),height:o.toString(),top:l,left:d}),v=Jt().toLowerCase();t&&(h=r0(v)?WI:t),t0(v)&&(e=e||HI,p.scrollbars="yes");const E=Object.entries(p).reduce((T,[C,N])=>`${T}${C}=${N},`,"");if(k1(v)&&h!=="_self")return KI(e||"",h),new wy(null);const _=window.open(e||"",h,E);Re(_,n,"popup-blocked");try{_.focus()}catch{}return new wy(_)}function KI(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="__/auth/handler",YI="emulator/auth/handler",XI=encodeURIComponent("fac");async function Ey(n,e,t,i,o,l){Re(n.config.authDomain,n,"auth-domain-config-required"),Re(n.config.apiKey,n,"invalid-api-key");const d={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Cs,eventId:o};if(e instanceof h0){e.setDefaultLanguage(n.languageCode),d.providerId=e.providerId||"",Zx(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,_]of Object.entries({}))d[E]=_}if(e instanceof gl){const E=e.getScopes().filter(_=>_!=="");E.length>0&&(d.scopes=E.join(","))}n.tenantId&&(d.tid=n.tenantId);const h=d;for(const E of Object.keys(h))h[E]===void 0&&delete h[E];const p=await n._getAppCheckToken(),v=p?`#${XI}=${encodeURIComponent(p)}`:"";return`${JI(n)}?${pl(h).slice(1)}${v}`}function JI({config:n}){return n.emulator?Df(n,YI):`https://${n.authDomain}/${QI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh="webStorageSupport";class ZI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=y0,this._completeRedirectFn=TI,this._overrideRedirectResult=wI}async _openPopup(e,t,i,o){var l;Kr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const d=await Ey(e,t,i,ef(),o);return GI(e,d,Ff())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await Ey(e,t,i,ef(),o);return nI(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Kr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await zI(e),i=new SI(e);return t.register("authEvent",o=>(Re(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fh,{type:Fh},o=>{var l;const d=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Fh];d!==void 0&&t(!!d),Gr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=PI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return l0()||n0()||Lf()}}const eS=ZI;var xy="@firebase/auth",Ty="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rS(n){Ts(new Mi("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:h}=i.options;Re(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:d,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:c0(n)},v=new j1(i,o,l,p);return z1(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ts(new Mi("auth-internal",e=>{const t=Vf(e.getProvider("auth").getImmediate());return(i=>new tS(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),yr(xy,Ty,nS(n)),yr(xy,Ty,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=5*60,sS=Fv("authIdTokenMaxAge")||iS;let Iy=null;const oS=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>sS)return;const o=t==null?void 0:t.token;Iy!==o&&(Iy=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function aS(n=Pf()){const e=Nu(n,"auth");if(e.isInitialized())return e.getImmediate();const t=U1(n,{popupRedirectResolver:eS,persistence:[dI,Z1,y0]}),i=Fv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const d=oS(l.toString());Y1(t,d,()=>d(t.currentUser)),Q1(t,h=>d(h))}}const o=Lv("auth");return o&&B1(t,`http://${o}`),t}function lS(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}L1({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=vr("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",lS().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rS("Browser");var Sy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xs,I0;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,R){function b(){}b.prototype=R.prototype,O.D=R.prototype,O.prototype=new b,O.prototype.constructor=O,O.C=function(j,M,z){for(var k=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)k[ie-2]=arguments[ie];return R.prototype[M].apply(j,k)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,R,b){b||(b=0);var j=Array(16);if(typeof R=="string")for(var M=0;16>M;++M)j[M]=R.charCodeAt(b++)|R.charCodeAt(b++)<<8|R.charCodeAt(b++)<<16|R.charCodeAt(b++)<<24;else for(M=0;16>M;++M)j[M]=R[b++]|R[b++]<<8|R[b++]<<16|R[b++]<<24;R=O.g[0],b=O.g[1],M=O.g[2];var z=O.g[3],k=R+(z^b&(M^z))+j[0]+3614090360&4294967295;R=b+(k<<7&4294967295|k>>>25),k=z+(M^R&(b^M))+j[1]+3905402710&4294967295,z=R+(k<<12&4294967295|k>>>20),k=M+(b^z&(R^b))+j[2]+606105819&4294967295,M=z+(k<<17&4294967295|k>>>15),k=b+(R^M&(z^R))+j[3]+3250441966&4294967295,b=M+(k<<22&4294967295|k>>>10),k=R+(z^b&(M^z))+j[4]+4118548399&4294967295,R=b+(k<<7&4294967295|k>>>25),k=z+(M^R&(b^M))+j[5]+1200080426&4294967295,z=R+(k<<12&4294967295|k>>>20),k=M+(b^z&(R^b))+j[6]+2821735955&4294967295,M=z+(k<<17&4294967295|k>>>15),k=b+(R^M&(z^R))+j[7]+4249261313&4294967295,b=M+(k<<22&4294967295|k>>>10),k=R+(z^b&(M^z))+j[8]+1770035416&4294967295,R=b+(k<<7&4294967295|k>>>25),k=z+(M^R&(b^M))+j[9]+2336552879&4294967295,z=R+(k<<12&4294967295|k>>>20),k=M+(b^z&(R^b))+j[10]+4294925233&4294967295,M=z+(k<<17&4294967295|k>>>15),k=b+(R^M&(z^R))+j[11]+2304563134&4294967295,b=M+(k<<22&4294967295|k>>>10),k=R+(z^b&(M^z))+j[12]+1804603682&4294967295,R=b+(k<<7&4294967295|k>>>25),k=z+(M^R&(b^M))+j[13]+4254626195&4294967295,z=R+(k<<12&4294967295|k>>>20),k=M+(b^z&(R^b))+j[14]+2792965006&4294967295,M=z+(k<<17&4294967295|k>>>15),k=b+(R^M&(z^R))+j[15]+1236535329&4294967295,b=M+(k<<22&4294967295|k>>>10),k=R+(M^z&(b^M))+j[1]+4129170786&4294967295,R=b+(k<<5&4294967295|k>>>27),k=z+(b^M&(R^b))+j[6]+3225465664&4294967295,z=R+(k<<9&4294967295|k>>>23),k=M+(R^b&(z^R))+j[11]+643717713&4294967295,M=z+(k<<14&4294967295|k>>>18),k=b+(z^R&(M^z))+j[0]+3921069994&4294967295,b=M+(k<<20&4294967295|k>>>12),k=R+(M^z&(b^M))+j[5]+3593408605&4294967295,R=b+(k<<5&4294967295|k>>>27),k=z+(b^M&(R^b))+j[10]+38016083&4294967295,z=R+(k<<9&4294967295|k>>>23),k=M+(R^b&(z^R))+j[15]+3634488961&4294967295,M=z+(k<<14&4294967295|k>>>18),k=b+(z^R&(M^z))+j[4]+3889429448&4294967295,b=M+(k<<20&4294967295|k>>>12),k=R+(M^z&(b^M))+j[9]+568446438&4294967295,R=b+(k<<5&4294967295|k>>>27),k=z+(b^M&(R^b))+j[14]+3275163606&4294967295,z=R+(k<<9&4294967295|k>>>23),k=M+(R^b&(z^R))+j[3]+4107603335&4294967295,M=z+(k<<14&4294967295|k>>>18),k=b+(z^R&(M^z))+j[8]+1163531501&4294967295,b=M+(k<<20&4294967295|k>>>12),k=R+(M^z&(b^M))+j[13]+2850285829&4294967295,R=b+(k<<5&4294967295|k>>>27),k=z+(b^M&(R^b))+j[2]+4243563512&4294967295,z=R+(k<<9&4294967295|k>>>23),k=M+(R^b&(z^R))+j[7]+1735328473&4294967295,M=z+(k<<14&4294967295|k>>>18),k=b+(z^R&(M^z))+j[12]+2368359562&4294967295,b=M+(k<<20&4294967295|k>>>12),k=R+(b^M^z)+j[5]+4294588738&4294967295,R=b+(k<<4&4294967295|k>>>28),k=z+(R^b^M)+j[8]+2272392833&4294967295,z=R+(k<<11&4294967295|k>>>21),k=M+(z^R^b)+j[11]+1839030562&4294967295,M=z+(k<<16&4294967295|k>>>16),k=b+(M^z^R)+j[14]+4259657740&4294967295,b=M+(k<<23&4294967295|k>>>9),k=R+(b^M^z)+j[1]+2763975236&4294967295,R=b+(k<<4&4294967295|k>>>28),k=z+(R^b^M)+j[4]+1272893353&4294967295,z=R+(k<<11&4294967295|k>>>21),k=M+(z^R^b)+j[7]+4139469664&4294967295,M=z+(k<<16&4294967295|k>>>16),k=b+(M^z^R)+j[10]+3200236656&4294967295,b=M+(k<<23&4294967295|k>>>9),k=R+(b^M^z)+j[13]+681279174&4294967295,R=b+(k<<4&4294967295|k>>>28),k=z+(R^b^M)+j[0]+3936430074&4294967295,z=R+(k<<11&4294967295|k>>>21),k=M+(z^R^b)+j[3]+3572445317&4294967295,M=z+(k<<16&4294967295|k>>>16),k=b+(M^z^R)+j[6]+76029189&4294967295,b=M+(k<<23&4294967295|k>>>9),k=R+(b^M^z)+j[9]+3654602809&4294967295,R=b+(k<<4&4294967295|k>>>28),k=z+(R^b^M)+j[12]+3873151461&4294967295,z=R+(k<<11&4294967295|k>>>21),k=M+(z^R^b)+j[15]+530742520&4294967295,M=z+(k<<16&4294967295|k>>>16),k=b+(M^z^R)+j[2]+3299628645&4294967295,b=M+(k<<23&4294967295|k>>>9),k=R+(M^(b|~z))+j[0]+4096336452&4294967295,R=b+(k<<6&4294967295|k>>>26),k=z+(b^(R|~M))+j[7]+1126891415&4294967295,z=R+(k<<10&4294967295|k>>>22),k=M+(R^(z|~b))+j[14]+2878612391&4294967295,M=z+(k<<15&4294967295|k>>>17),k=b+(z^(M|~R))+j[5]+4237533241&4294967295,b=M+(k<<21&4294967295|k>>>11),k=R+(M^(b|~z))+j[12]+1700485571&4294967295,R=b+(k<<6&4294967295|k>>>26),k=z+(b^(R|~M))+j[3]+2399980690&4294967295,z=R+(k<<10&4294967295|k>>>22),k=M+(R^(z|~b))+j[10]+4293915773&4294967295,M=z+(k<<15&4294967295|k>>>17),k=b+(z^(M|~R))+j[1]+2240044497&4294967295,b=M+(k<<21&4294967295|k>>>11),k=R+(M^(b|~z))+j[8]+1873313359&4294967295,R=b+(k<<6&4294967295|k>>>26),k=z+(b^(R|~M))+j[15]+4264355552&4294967295,z=R+(k<<10&4294967295|k>>>22),k=M+(R^(z|~b))+j[6]+2734768916&4294967295,M=z+(k<<15&4294967295|k>>>17),k=b+(z^(M|~R))+j[13]+1309151649&4294967295,b=M+(k<<21&4294967295|k>>>11),k=R+(M^(b|~z))+j[4]+4149444226&4294967295,R=b+(k<<6&4294967295|k>>>26),k=z+(b^(R|~M))+j[11]+3174756917&4294967295,z=R+(k<<10&4294967295|k>>>22),k=M+(R^(z|~b))+j[2]+718787259&4294967295,M=z+(k<<15&4294967295|k>>>17),k=b+(z^(M|~R))+j[9]+3951481745&4294967295,O.g[0]=O.g[0]+R&4294967295,O.g[1]=O.g[1]+(M+(k<<21&4294967295|k>>>11))&4294967295,O.g[2]=O.g[2]+M&4294967295,O.g[3]=O.g[3]+z&4294967295}i.prototype.u=function(O,R){R===void 0&&(R=O.length);for(var b=R-this.blockSize,j=this.B,M=this.h,z=0;z<R;){if(M==0)for(;z<=b;)o(this,O,z),z+=this.blockSize;if(typeof O=="string"){for(;z<R;)if(j[M++]=O.charCodeAt(z++),M==this.blockSize){o(this,j),M=0;break}}else for(;z<R;)if(j[M++]=O[z++],M==this.blockSize){o(this,j),M=0;break}}this.h=M,this.o+=R},i.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var R=1;R<O.length-8;++R)O[R]=0;var b=8*this.o;for(R=O.length-8;R<O.length;++R)O[R]=b&255,b/=256;for(this.u(O),O=Array(16),R=b=0;4>R;++R)for(var j=0;32>j;j+=8)O[b++]=this.g[R]>>>j&255;return O};function l(O,R){var b=h;return Object.prototype.hasOwnProperty.call(b,O)?b[O]:b[O]=R(O)}function d(O,R){this.h=R;for(var b=[],j=!0,M=O.length-1;0<=M;M--){var z=O[M]|0;j&&z==R||(b[M]=z,j=!1)}this.g=b}var h={};function p(O){return-128<=O&&128>O?l(O,function(R){return new d([R|0],0>R?-1:0)}):new d([O|0],0>O?-1:0)}function v(O){if(isNaN(O)||!isFinite(O))return _;if(0>O)return A(v(-O));for(var R=[],b=1,j=0;O>=b;j++)R[j]=O/b|0,b*=4294967296;return new d(R,0)}function E(O,R){if(O.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(O.charAt(0)=="-")return A(E(O.substring(1),R));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=v(Math.pow(R,8)),j=_,M=0;M<O.length;M+=8){var z=Math.min(8,O.length-M),k=parseInt(O.substring(M,M+z),R);8>z?(z=v(Math.pow(R,z)),j=j.j(z).add(v(k))):(j=j.j(b),j=j.add(v(k)))}return j}var _=p(0),T=p(1),C=p(16777216);n=d.prototype,n.m=function(){if(S(this))return-A(this).m();for(var O=0,R=1,b=0;b<this.g.length;b++){var j=this.i(b);O+=(0<=j?j:4294967296+j)*R,R*=4294967296}return O},n.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(N(this))return"0";if(S(this))return"-"+A(this).toString(O);for(var R=v(Math.pow(O,6)),b=this,j="";;){var M=K(b,R).g;b=F(b,M.j(R));var z=((0<b.g.length?b.g[0]:b.h)>>>0).toString(O);if(b=M,N(b))return z+j;for(;6>z.length;)z="0"+z;j=z+j}},n.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function N(O){if(O.h!=0)return!1;for(var R=0;R<O.g.length;R++)if(O.g[R]!=0)return!1;return!0}function S(O){return O.h==-1}n.l=function(O){return O=F(this,O),S(O)?-1:N(O)?0:1};function A(O){for(var R=O.g.length,b=[],j=0;j<R;j++)b[j]=~O.g[j];return new d(b,~O.h).add(T)}n.abs=function(){return S(this)?A(this):this},n.add=function(O){for(var R=Math.max(this.g.length,O.g.length),b=[],j=0,M=0;M<=R;M++){var z=j+(this.i(M)&65535)+(O.i(M)&65535),k=(z>>>16)+(this.i(M)>>>16)+(O.i(M)>>>16);j=k>>>16,z&=65535,k&=65535,b[M]=k<<16|z}return new d(b,b[b.length-1]&-2147483648?-1:0)};function F(O,R){return O.add(A(R))}n.j=function(O){if(N(this)||N(O))return _;if(S(this))return S(O)?A(this).j(A(O)):A(A(this).j(O));if(S(O))return A(this.j(A(O)));if(0>this.l(C)&&0>O.l(C))return v(this.m()*O.m());for(var R=this.g.length+O.g.length,b=[],j=0;j<2*R;j++)b[j]=0;for(j=0;j<this.g.length;j++)for(var M=0;M<O.g.length;M++){var z=this.i(j)>>>16,k=this.i(j)&65535,ie=O.i(M)>>>16,Ee=O.i(M)&65535;b[2*j+2*M]+=k*Ee,D(b,2*j+2*M),b[2*j+2*M+1]+=z*Ee,D(b,2*j+2*M+1),b[2*j+2*M+1]+=k*ie,D(b,2*j+2*M+1),b[2*j+2*M+2]+=z*ie,D(b,2*j+2*M+2)}for(j=0;j<R;j++)b[j]=b[2*j+1]<<16|b[2*j];for(j=R;j<2*R;j++)b[j]=0;return new d(b,0)};function D(O,R){for(;(O[R]&65535)!=O[R];)O[R+1]+=O[R]>>>16,O[R]&=65535,R++}function H(O,R){this.g=O,this.h=R}function K(O,R){if(N(R))throw Error("division by zero");if(N(O))return new H(_,_);if(S(O))return R=K(A(O),R),new H(A(R.g),A(R.h));if(S(R))return R=K(O,A(R)),new H(A(R.g),R.h);if(30<O.g.length){if(S(O)||S(R))throw Error("slowDivide_ only works with positive integers.");for(var b=T,j=R;0>=j.l(O);)b=ge(b),j=ge(j);var M=ce(b,1),z=ce(j,1);for(j=ce(j,2),b=ce(b,2);!N(j);){var k=z.add(j);0>=k.l(O)&&(M=M.add(b),z=k),j=ce(j,1),b=ce(b,1)}return R=F(O,M.j(R)),new H(M,R)}for(M=_;0<=O.l(R);){for(b=Math.max(1,Math.floor(O.m()/R.m())),j=Math.ceil(Math.log(b)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),z=v(b),k=z.j(R);S(k)||0<k.l(O);)b-=j,z=v(b),k=z.j(R);N(z)&&(z=T),M=M.add(z),O=F(O,k)}return new H(M,O)}n.A=function(O){return K(this,O).h},n.and=function(O){for(var R=Math.max(this.g.length,O.g.length),b=[],j=0;j<R;j++)b[j]=this.i(j)&O.i(j);return new d(b,this.h&O.h)},n.or=function(O){for(var R=Math.max(this.g.length,O.g.length),b=[],j=0;j<R;j++)b[j]=this.i(j)|O.i(j);return new d(b,this.h|O.h)},n.xor=function(O){for(var R=Math.max(this.g.length,O.g.length),b=[],j=0;j<R;j++)b[j]=this.i(j)^O.i(j);return new d(b,this.h^O.h)};function ge(O){for(var R=O.g.length+1,b=[],j=0;j<R;j++)b[j]=O.i(j)<<1|O.i(j-1)>>>31;return new d(b,O.h)}function ce(O,R){var b=R>>5;R%=32;for(var j=O.g.length-b,M=[],z=0;z<j;z++)M[z]=0<R?O.i(z+b)>>>R|O.i(z+b+1)<<32-R:O.i(z+b);return new d(M,O.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,I0=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=E,xs=d}).apply(typeof Sy<"u"?Sy:typeof self<"u"?self:typeof window<"u"?window:{});var Fc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var S0,Ga,C0,Qc,rf,R0,A0,k0;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,w){return c==Array.prototype||c==Object.prototype||(c[g]=w.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fc=="object"&&Fc];for(var g=0;g<c.length;++g){var w=c[g];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=t(this);function o(c,g){if(g)e:{var w=i;c=c.split(".");for(var I=0;I<c.length-1;I++){var $=c[I];if(!($ in w))break e;w=w[$]}c=c[c.length-1],I=w[c],g=g(I),g!=I&&g!=null&&e(w,c,{configurable:!0,writable:!0,value:g})}}function l(c,g){c instanceof String&&(c+="");var w=0,I=!1,$={next:function(){if(!I&&w<c.length){var Q=w++;return{value:g(Q,c[Q]),done:!1}}return I=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}o("Array.prototype.values",function(c){return c||function(){return l(this,function(g,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},h=this||self;function p(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function v(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function E(c,g,w){return c.call.apply(c.bind,arguments)}function _(c,g,w){if(!c)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,I),c.apply(g,$)}}return function(){return c.apply(g,arguments)}}function T(c,g,w){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:_,T.apply(null,arguments)}function C(c,g){var w=Array.prototype.slice.call(arguments,1);return function(){var I=w.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function N(c,g){function w(){}w.prototype=g.prototype,c.aa=g.prototype,c.prototype=new w,c.prototype.constructor=c,c.Qb=function(I,$,Q){for(var se=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)se[Je-2]=arguments[Je];return g.prototype[$].apply(I,se)}}function S(c){const g=c.length;if(0<g){const w=Array(g);for(let I=0;I<g;I++)w[I]=c[I];return w}return[]}function A(c,g){for(let w=1;w<arguments.length;w++){const I=arguments[w];if(p(I)){const $=c.length||0,Q=I.length||0;c.length=$+Q;for(let se=0;se<Q;se++)c[$+se]=I[se]}else c.push(I)}}class F{constructor(g,w){this.i=g,this.j=w,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function D(c){return/^[\s\xa0]*$/.test(c)}function H(){var c=h.navigator;return c&&(c=c.userAgent)?c:""}function K(c){return K[" "](c),c}K[" "]=function(){};var ge=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function ce(c,g,w){for(const I in c)g.call(w,c[I],I,c)}function O(c,g){for(const w in c)g.call(void 0,c[w],w,c)}function R(c){const g={};for(const w in c)g[w]=c[w];return g}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(c,g){let w,I;for(let $=1;$<arguments.length;$++){I=arguments[$];for(w in I)c[w]=I[w];for(let Q=0;Q<b.length;Q++)w=b[Q],Object.prototype.hasOwnProperty.call(I,w)&&(c[w]=I[w])}}function M(c){var g=1;c=c.split(":");const w=[];for(;0<g&&c.length;)w.push(c.shift()),g--;return c.length&&w.push(c.join(":")),w}function z(c){h.setTimeout(()=>{throw c},0)}function k(){var c=pe;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class ie{constructor(){this.h=this.g=null}add(g,w){const I=Ee.get();I.set(g,w),this.h?this.h.next=I:this.g=I,this.h=I}}var Ee=new F(()=>new Ne,c=>c.reset());class Ne{constructor(){this.next=this.g=this.h=null}set(g,w){this.h=g,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Oe,ne=!1,pe=new ie,ae=()=>{const c=h.Promise.resolve(void 0);Oe=()=>{c.then(B)}};var B=()=>{for(var c;c=k();){try{c.h.call(c.g)}catch(w){z(w)}var g=Ee;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}ne=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var Pe=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};h.addEventListener("test",w,g),h.removeEventListener("test",w,g)}catch{}return c}();function be(c,g){if(ve.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var w=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(ge){e:{try{K(g.nodeName);var $=!0;break e}catch{}$=!1}$||(g=null)}}else w=="mouseover"?g=c.fromElement:w=="mouseout"&&(g=c.toElement);this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:je[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&be.aa.h.call(this)}}N(be,ve);var je={2:"touch",3:"pen",4:"mouse"};be.prototype.h=function(){be.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var qe="closure_listenable_"+(1e6*Math.random()|0),Me=0;function He(c,g,w,I,$){this.listener=c,this.proxy=null,this.src=g,this.type=w,this.capture=!!I,this.ha=$,this.key=++Me,this.da=this.fa=!1}function vt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ue(c){this.src=c,this.g={},this.h=0}ue.prototype.add=function(c,g,w,I,$){var Q=c.toString();c=this.g[Q],c||(c=this.g[Q]=[],this.h++);var se=Ye(c,g,I,$);return-1<se?(g=c[se],w||(g.fa=!1)):(g=new He(g,this.src,Q,!!I,$),g.fa=w,c.push(g)),g};function Qe(c,g){var w=g.type;if(w in c.g){var I=c.g[w],$=Array.prototype.indexOf.call(I,g,void 0),Q;(Q=0<=$)&&Array.prototype.splice.call(I,$,1),Q&&(vt(g),c.g[w].length==0&&(delete c.g[w],c.h--))}}function Ye(c,g,w,I){for(var $=0;$<c.length;++$){var Q=c[$];if(!Q.da&&Q.listener==g&&Q.capture==!!w&&Q.ha==I)return $}return-1}var Vn="closure_lm_"+(1e6*Math.random()|0),ti={};function Mn(c,g,w,I,$){if(Array.isArray(g)){for(var Q=0;Q<g.length;Q++)Mn(c,g[Q],w,I,$);return null}return w=ea(w),c&&c[qe]?c.K(g,w,v(I)?!!I.capture:!!I,$):Fn(c,g,w,!1,I,$)}function Fn(c,g,w,I,$,Q){if(!g)throw Error("Invalid event type");var se=v($)?!!$.capture:!!$,Je=bs(c);if(Je||(c[Vn]=Je=new ue(c)),w=Je.add(g,w,I,se,Q),w.proxy)return w;if(I=Ps(),w.proxy=I,I.src=c,I.listener=w,c.addEventListener)Pe||($=se),$===void 0&&($=!1),c.addEventListener(g.toString(),I,$);else if(c.attachEvent)c.attachEvent(Cr(g.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Ps(){function c(w){return g.call(c.src,c.listener,w)}const g=Zo;return c}function en(c,g,w,I,$){if(Array.isArray(g))for(var Q=0;Q<g.length;Q++)en(c,g[Q],w,I,$);else I=v(I)?!!I.capture:!!I,w=ea(w),c&&c[qe]?(c=c.i,g=String(g).toString(),g in c.g&&(Q=c.g[g],w=Ye(Q,w,I,$),-1<w&&(vt(Q[w]),Array.prototype.splice.call(Q,w,1),Q.length==0&&(delete c.g[g],c.h--)))):c&&(c=bs(c))&&(g=c.g[g.toString()],c=-1,g&&(c=Ye(g,w,I,$)),(w=-1<c?g[c]:null)&&on(w))}function on(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[qe])Qe(g.i,c);else{var w=c.type,I=c.proxy;g.removeEventListener?g.removeEventListener(w,I,c.capture):g.detachEvent?g.detachEvent(Cr(w),I):g.addListener&&g.removeListener&&g.removeListener(I),(w=bs(g))?(Qe(w,c),w.h==0&&(w.src=null,g[Vn]=null)):vt(c)}}}function Cr(c){return c in ti?ti[c]:ti[c]="on"+c}function Zo(c,g){if(c.da)c=!0;else{g=new be(g,this);var w=c.listener,I=c.ha||c.src;c.fa&&on(c),c=w.call(I,g)}return c}function bs(c){return c=c[Vn],c instanceof ue?c:null}var Ns="__closure_events_fn_"+(1e9*Math.random()>>>0);function ea(c){return typeof c=="function"?c:(c[Ns]||(c[Ns]=function(g){return c.handleEvent(g)}),c[Ns])}function Tt(){Y.call(this),this.i=new ue(this),this.M=this,this.F=null}N(Tt,Y),Tt.prototype[qe]=!0,Tt.prototype.removeEventListener=function(c,g,w,I){en(this,c,g,w,I)};function It(c,g){var w,I=c.F;if(I)for(w=[];I;I=I.F)w.push(I);if(c=c.M,I=g.type||g,typeof g=="string")g=new ve(g,c);else if(g instanceof ve)g.target=g.target||c;else{var $=g;g=new ve(I,c),j(g,$)}if($=!0,w)for(var Q=w.length-1;0<=Q;Q--){var se=g.g=w[Q];$=Rr(se,I,!0,g)&&$}if(se=g.g=c,$=Rr(se,I,!0,g)&&$,$=Rr(se,I,!1,g)&&$,w)for(Q=0;Q<w.length;Q++)se=g.g=w[Q],$=Rr(se,I,!1,g)&&$}Tt.prototype.N=function(){if(Tt.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var w=c.g[g],I=0;I<w.length;I++)vt(w[I]);delete c.g[g],c.h--}}this.F=null},Tt.prototype.K=function(c,g,w,I){return this.i.add(String(c),g,!1,w,I)},Tt.prototype.L=function(c,g,w,I){return this.i.add(String(c),g,!0,w,I)};function Rr(c,g,w,I){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var $=!0,Q=0;Q<g.length;++Q){var se=g[Q];if(se&&!se.da&&se.capture==w){var Je=se.listener,St=se.ha||se.src;se.fa&&Qe(c.i,se),$=Je.call(St,I)!==!1&&$}}return $&&!I.defaultPrevented}function ta(c,g,w){if(typeof c=="function")w&&(c=T(c,w));else if(c&&typeof c.handleEvent=="function")c=T(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:h.setTimeout(c,g||0)}function ni(c){c.g=ta(()=>{c.g=null,c.i&&(c.i=!1,ni(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class Hi extends Y{constructor(g,w){super(),this.m=g,this.l=w,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ni(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gi(c){Y.call(this),this.h=c,this.g={}}N(Gi,Y);var na=[];function ra(c){ce(c.g,function(g,w){this.g.hasOwnProperty(w)&&on(g)},c),c.g={}}Gi.prototype.N=function(){Gi.aa.N.call(this),ra(this)},Gi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ia=h.JSON.stringify,sa=h.JSON.parse,oa=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function Ki(){}Ki.prototype.h=null;function Ds(c){return c.h||(c.h=c.i())}function Os(){}var Rn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function or(){ve.call(this,"d")}N(or,ve);function js(){ve.call(this,"c")}N(js,ve);var ar={},aa=null;function Qi(){return aa=aa||new Tt}ar.La="serverreachability";function la(c){ve.call(this,ar.La,c)}N(la,ve);function Ar(c){const g=Qi();It(g,new la(g))}ar.STAT_EVENT="statevent";function ca(c,g){ve.call(this,ar.STAT_EVENT,c),this.stat=g}N(ca,ve);function mt(c){const g=Qi();It(g,new ca(g,c))}ar.Ma="timingevent";function Ls(c,g){ve.call(this,ar.Ma,c),this.size=g}N(Ls,ve);function Un(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},g)}function Yi(){this.g=!0}Yi.prototype.xa=function(){this.g=!1};function Xi(c,g,w,I,$,Q){c.info(function(){if(c.g)if(Q)for(var se="",Je=Q.split("&"),St=0;St<Je.length;St++){var ze=Je[St].split("=");if(1<ze.length){var Pt=ze[0];ze=ze[1];var _t=Pt.split("_");se=2<=_t.length&&_t[1]=="type"?se+(Pt+"="+ze+"&"):se+(Pt+"=redacted&")}}else se=null;else se=Q;return"XMLHTTP REQ ("+I+") [attempt "+$+"]: "+g+`
`+w+`
`+se})}function Vs(c,g,w,I,$,Q,se){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+$+"]: "+g+`
`+w+`
`+Q+" "+se})}function zn(c,g,w,I){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Xu(c,w)+(I?" "+I:"")})}function ua(c,g){c.info(function(){return"TIMEOUT: "+g})}Yi.prototype.info=function(){};function Xu(c,g){if(!c.g)return g;if(!g)return null;try{var w=JSON.parse(g);if(w){for(c=0;c<w.length;c++)if(Array.isArray(w[c])){var I=w[c];if(!(2>I.length)){var $=I[1];if(Array.isArray($)&&!(1>$.length)){var Q=$[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var se=1;se<$.length;se++)$[se]=""}}}}return ia(w)}catch{return g}}var Ms={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Il={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bn;function Ji(){}N(Ji,Ki),Ji.prototype.g=function(){return new XMLHttpRequest},Ji.prototype.i=function(){return{}},Bn=new Ji;function $n(c,g,w,I){this.j=c,this.i=g,this.l=w,this.R=I||1,this.U=new Gi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Sl}function Sl(){this.i=null,this.g="",this.h=!1}var da={},Fs={};function Us(c,g,w){c.L=1,c.v=ai(_n(g)),c.m=w,c.P=!0,ha(c,null)}function ha(c,g){c.F=Date.now(),nt(c),c.A=_n(c.v);var w=c.A,I=c.R;Array.isArray(I)||(I=[String(I)]),ci(w.i,"t",I),c.C=0,w=c.j.J,c.h=new Sl,c.g=$l(c.j,w?g:null,!c.m),0<c.O&&(c.M=new Hi(T(c.Y,c,c.g),c.O)),g=c.U,w=c.g,I=c.ca;var $="readystatechange";Array.isArray($)||($&&(na[0]=$.toString()),$=na);for(var Q=0;Q<$.length;Q++){var se=Mn(w,$[Q],I||g.handleEvent,!1,g.h||g);if(!se)break;g.g[se.key]=se}g=c.H?R(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Ar(),Xi(c.i,c.u,c.A,c.l,c.R,c.m)}$n.prototype.ca=function(c){c=c.target;const g=this.M;g&&ln(c)==3?g.j():this.Y(c)},$n.prototype.Y=function(c){try{if(c==this.g)e:{const _t=ln(this.g);var g=this.g.Ba();const Pn=this.g.Z();if(!(3>_t)&&(_t!=3||this.g&&(this.h.h||this.g.oa()||va(this.g)))){this.J||_t!=4||g==7||(g==8||0>=Pn?Ar(3):Ar(2)),Zi(this);var w=this.g.Z();this.X=w;t:if(Cl(this)){var I=va(this.g);c="";var $=I.length,Q=ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){An(this),ri(this);var se="";break t}this.h.i=new h.TextDecoder}for(g=0;g<$;g++)this.h.h=!0,c+=this.h.i.decode(I[g],{stream:!(Q&&g==$-1)});I.length=0,this.h.g+=c,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=w==200,Vs(this.i,this.u,this.A,this.l,this.R,_t,w),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,St=this.g;if((Je=St.g?St.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(Je)){var ze=Je;break t}}ze=null}if(w=ze)zn(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fa(this,w);else{this.o=!1,this.s=3,mt(12),An(this),ri(this);break e}}if(this.P){w=!0;let En;for(;!this.J&&this.C<se.length;)if(En=Ju(this,se),En==Fs){_t==4&&(this.s=4,mt(14),w=!1),zn(this.i,this.l,null,"[Incomplete Response]");break}else if(En==da){this.s=4,mt(15),zn(this.i,this.l,se,"[Invalid Chunk]"),w=!1;break}else zn(this.i,this.l,En,null),fa(this,En);if(Cl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_t!=4||se.length!=0||this.h.h||(this.s=1,mt(16),w=!1),this.o=this.o&&w,!w)zn(this.i,this.l,se,"[Invalid Chunked Response]"),An(this),ri(this);else if(0<se.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),wa(Pt),Pt.M=!0,mt(11))}}else zn(this.i,this.l,se,null),fa(this,se);_t==4&&An(this),this.o&&!this.J&&(_t==4?Xs(this.j,this):(this.o=!1,nt(this)))}else Hs(this.g),w==400&&0<se.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),An(this),ri(this)}}}catch{}finally{}};function Cl(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Ju(c,g){var w=c.C,I=g.indexOf(`
`,w);return I==-1?Fs:(w=Number(g.substring(w,I)),isNaN(w)?da:(I+=1,I+w>g.length?Fs:(g=g.slice(I,I+w),c.C=I+w,g)))}$n.prototype.cancel=function(){this.J=!0,An(this)};function nt(c){c.S=Date.now()+c.I,Rl(c,c.I)}function Rl(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Un(T(c.ba,c),g)}function Zi(c){c.B&&(h.clearTimeout(c.B),c.B=null)}$n.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ua(this.i,this.A),this.L!=2&&(Ar(),mt(17)),An(this),this.s=2,ri(this)):Rl(this,this.S-c)};function ri(c){c.j.G==0||c.J||Xs(c.j,c)}function An(c){Zi(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,ra(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function fa(c,g){try{var w=c.j;if(w.G!=0&&(w.g==c||tn(w.h,c))){if(!c.K&&tn(w.h,c)&&w.G==3){try{var I=w.Da.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var $=I;if($[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<c.F)Ys(w),Kn(w);else break e;Qs(w),mt(18)}}else w.za=$[1],0<w.za-w.T&&37500>$[2]&&w.F&&w.v==0&&!w.C&&(w.C=Un(T(w.Za,w),6e3));if(1>=kl(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Dr(w,11)}else if((c.K||w.g==c)&&Ys(w),!D(g))for($=w.Da.g.parse(g),g=0;g<$.length;g++){let ze=$[g];if(w.T=ze[0],ze=ze[1],w.G==2)if(ze[0]=="c"){w.K=ze[1],w.ia=ze[2];const Pt=ze[3];Pt!=null&&(w.la=Pt,w.j.info("VER="+w.la));const _t=ze[4];_t!=null&&(w.Aa=_t,w.j.info("SVER="+w.Aa));const Pn=ze[5];Pn!=null&&typeof Pn=="number"&&0<Pn&&(I=1.5*Pn,w.L=I,w.j.info("backChannelRequestTimeoutMs_="+I)),I=w;const En=c.g;if(En){const os=En.g?En.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(os){var Q=I.h;Q.g||os.indexOf("spdy")==-1&&os.indexOf("quic")==-1&&os.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(pa(Q,Q.h),Q.h=null))}if(I.D){const Zs=En.g?En.g.getResponseHeader("X-HTTP-Session-Id"):null;Zs&&(I.ya=Zs,et(I.I,I.D,Zs))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-c.F,w.j.info("Handshake RTT: "+w.R+"ms")),I=w;var se=c;if(I.qa=Bl(I,I.J?I.ia:null,I.W),se.K){Pl(I.h,se);var Je=se,St=I.L;St&&(Je.I=St),Je.B&&(Zi(Je),nt(Je)),I.g=se}else ss(I);0<w.i.length&&dr(w)}else ze[0]!="stop"&&ze[0]!="close"||Dr(w,7);else w.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?Dr(w,7):Mt(w):ze[0]!="noop"&&w.l&&w.l.ta(ze),w.v=0)}}Ar(4)}catch{}}var Al=class{constructor(c,g){this.g=c,this.map=g}};function es(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function kl(c){return c.h?1:c.g?c.g.size:0}function tn(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function pa(c,g){c.g?c.g.add(g):c.h=g}function Pl(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}es.prototype.cancel=function(){if(this.i=bl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function bl(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const w of c.g.values())g=g.concat(w.D);return g}return S(c.i)}function zs(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var g=[],w=c.length,I=0;I<w;I++)g.push(c[I]);return g}g=[],w=0;for(I in c)g[w++]=c[I];return g}function Bs(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var g=[];c=c.length;for(var w=0;w<c;w++)g.push(w);return g}g=[],w=0;for(const I in c)g[w++]=I;return g}}}function ii(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var w=Bs(c),I=zs(c),$=I.length,Q=0;Q<$;Q++)g.call(void 0,I[Q],w&&w[Q],c)}var ts=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zu(c,g){if(c){c=c.split("&");for(var w=0;w<c.length;w++){var I=c[w].indexOf("="),$=null;if(0<=I){var Q=c[w].substring(0,I);$=c[w].substring(I+1)}else Q=c[w];g(Q,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function kr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof kr){this.h=c.h,ns(this,c.j),this.o=c.o,this.g=c.g,si(this,c.s),this.l=c.l;var g=c.i,w=new lr;w.i=g.i,g.g&&(w.g=new Map(g.g),w.h=g.h),oi(this,w),this.m=c.m}else c&&(g=String(c).match(ts))?(this.h=!1,ns(this,g[1]||"",!0),this.o=Fe(g[2]||""),this.g=Fe(g[3]||"",!0),si(this,g[4]),this.l=Fe(g[5]||"",!0),oi(this,g[6]||"",!0),this.m=Fe(g[7]||"")):(this.h=!1,this.i=new lr(null,this.h))}kr.prototype.toString=function(){var c=[],g=this.j;g&&c.push(li(g,$s,!0),":");var w=this.g;return(w||g=="file")&&(c.push("//"),(g=this.o)&&c.push(li(g,$s,!0),"@"),c.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&c.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(li(w,w.charAt(0)=="/"?Ol:Dl,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",li(w,ma)),c.join("")};function _n(c){return new kr(c)}function ns(c,g,w){c.j=w?Fe(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function si(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function oi(c,g,w){g instanceof lr?(c.i=g,cr(c.i,c.h)):(w||(g=li(g,jl)),c.i=new lr(g,c.h))}function et(c,g,w){c.i.set(g,w)}function ai(c){return et(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Fe(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function li(c,g,w){return typeof c=="string"?(c=encodeURI(c).replace(g,Nl),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Nl(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var $s=/[#\/\?@]/g,Dl=/[#\?:]/g,Ol=/[#\?]/g,jl=/[#\?@]/g,ma=/#/g;function lr(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Vt(c){c.g||(c.g=new Map,c.h=0,c.i&&Zu(c.i,function(g,w){c.add(decodeURIComponent(g.replace(/\+/g," ")),w)}))}n=lr.prototype,n.add=function(c,g){Vt(this),this.i=null,c=kn(this,c);var w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(g),this.h+=1,this};function qn(c,g){Vt(c),g=kn(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Wn(c,g){return Vt(c),g=kn(c,g),c.g.has(g)}n.forEach=function(c,g){Vt(this),this.g.forEach(function(w,I){w.forEach(function($){c.call(g,$,I,this)},this)},this)},n.na=function(){Vt(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),w=[];for(let I=0;I<g.length;I++){const $=c[I];for(let Q=0;Q<$.length;Q++)w.push(g[I])}return w},n.V=function(c){Vt(this);let g=[];if(typeof c=="string")Wn(this,c)&&(g=g.concat(this.g.get(kn(this,c))));else{c=Array.from(this.g.values());for(let w=0;w<c.length;w++)g=g.concat(c[w])}return g},n.set=function(c,g){return Vt(this),this.i=null,c=kn(this,c),Wn(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function ci(c,g,w){qn(c,g),0<w.length&&(c.i=null,c.g.set(kn(c,g),S(w)),c.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var w=0;w<g.length;w++){var I=g[w];const Q=encodeURIComponent(String(I)),se=this.V(I);for(I=0;I<se.length;I++){var $=Q;se[I]!==""&&($+="="+encodeURIComponent(String(se[I]))),c.push($)}}return this.i=c.join("&")};function kn(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function cr(c,g){g&&!c.j&&(Vt(c),c.i=null,c.g.forEach(function(w,I){var $=I.toLowerCase();I!=$&&(qn(this,I),ci(this,$,w))},c)),c.j=g}function ed(c,g){const w=new Yi;if(h.Image){const I=new Image;I.onload=C(an,w,"TestLoadImage: loaded",!0,g,I),I.onerror=C(an,w,"TestLoadImage: error",!1,g,I),I.onabort=C(an,w,"TestLoadImage: abort",!1,g,I),I.ontimeout=C(an,w,"TestLoadImage: timeout",!1,g,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else g(!1)}function Ll(c,g){const w=new Yi,I=new AbortController,$=setTimeout(()=>{I.abort(),an(w,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:I.signal}).then(Q=>{clearTimeout($),Q.ok?an(w,"TestPingServer: ok",!0,g):an(w,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout($),an(w,"TestPingServer: error",!1,g)})}function an(c,g,w,I,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),I(w)}catch{}}function td(){this.g=new oa}function Vl(c,g,w){const I=w||"";try{ii(c,function($,Q){let se=$;v($)&&(se=ia($)),g.push(I+Q+"="+encodeURIComponent(se))})}catch($){throw g.push(I+"type="+encodeURIComponent("_badmap")),$}}function Pr(c){this.l=c.Ub||null,this.j=c.eb||!1}N(Pr,Ki),Pr.prototype.g=function(){return new rs(this.l,this.j)},Pr.prototype.i=function(c){return function(){return c}}({});function rs(c,g){Tt.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(rs,Tt),n=rs.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Gn(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||h).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hn(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Gn(this)),this.g&&(this.readyState=3,Gn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ml(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ml(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Hn(this):Gn(this),this.readyState==3&&Ml(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Hn(this))},n.Qa=function(c){this.g&&(this.response=c,Hn(this))},n.ga=function(){this.g&&Hn(this)};function Hn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Gn(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var w=g.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=g.next();return c.join(`\r
`)};function Gn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(rs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function br(c){let g="";return ce(c,function(w,I){g+=I,g+=":",g+=w,g+=`\r
`}),g}function ui(c,g,w){e:{for(I in w){var I=!1;break e}I=!0}I||(w=br(w),typeof c=="string"?w!=null&&encodeURIComponent(String(w)):et(c,g,w))}function at(c){Tt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(at,Tt);var nd=/^https?$/i,ga=["POST","PUT"];n=at.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,w,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bn.g(),this.v=this.o?Ds(this.o):Ds(Bn),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(Q){is(this,Q);return}if(c=w||"",w=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var $ in I)w.set($,I[$]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const Q of I.keys())w.set(Q,I.get(Q));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(w.keys()).find(Q=>Q.toLowerCase()=="content-type"),$=h.FormData&&c instanceof h.FormData,!(0<=Array.prototype.indexOf.call(ga,g,void 0))||I||$||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,se]of w)this.g.setRequestHeader(Q,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ws(this),this.u=!0,this.g.send(c),this.u=!1}catch(Q){is(this,Q)}};function is(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,qs(c),wn(c)}function qs(c){c.A||(c.A=!0,It(c,"complete"),It(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,It(this,"complete"),It(this,"abort"),wn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wn(this,!0)),at.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ya(this):this.bb())},n.bb=function(){ya(this)};function ya(c){if(c.h&&typeof d<"u"&&(!c.v[1]||ln(c)!=4||c.Z()!=2)){if(c.u&&ln(c)==4)ta(c.Ea,0,c);else if(It(c,"readystatechange"),ln(c)==4){c.h=!1;try{const se=c.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var w;if(!(w=g)){var I;if(I=se===0){var $=String(c.D).match(ts)[1]||null;!$&&h.self&&h.self.location&&($=h.self.location.protocol.slice(0,-1)),I=!nd.test($?$.toLowerCase():"")}w=I}if(w)It(c,"complete"),It(c,"success");else{c.m=6;try{var Q=2<ln(c)?c.g.statusText:""}catch{Q=""}c.l=Q+" ["+c.Z()+"]",qs(c)}}finally{wn(c)}}}}function wn(c,g){if(c.g){Ws(c);const w=c.g,I=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||It(c,"ready");try{w.onreadystatechange=I}catch{}}}function Ws(c){c.I&&(h.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function ln(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<ln(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),sa(g)}};function va(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Hs(c){const g={};c=(c.g&&2<=ln(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(D(c[I]))continue;var w=M(c[I]);const $=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const Q=g[$]||[];g[$]=Q,Q.push(w)}O(g,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ur(c,g,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||g}function _a(c){this.Aa=0,this.i=[],this.j=new Yi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ur("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ur("baseRetryDelayMs",5e3,c),this.cb=ur("retryDelaySeedMs",1e4,c),this.Wa=ur("forwardChannelMaxRetries",2,c),this.wa=ur("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new es(c&&c.concurrentRequestLimit),this.Da=new td,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=_a.prototype,n.la=8,n.G=1,n.connect=function(c,g,w,I){mt(0),this.W=c,this.H=g||{},w&&I!==void 0&&(this.H.OSID=w,this.H.OAID=I),this.F=this.X,this.I=Bl(this,null,this.W),dr(this)};function Mt(c){if(Gs(c),c.G==3){var g=c.U++,w=_n(c.I);if(et(w,"SID",c.K),et(w,"RID",g),et(w,"TYPE","terminate"),Nr(c,w),g=new $n(c,c.j,g),g.L=2,g.v=ai(_n(w)),w=!1,h.navigator&&h.navigator.sendBeacon)try{w=h.navigator.sendBeacon(g.v.toString(),"")}catch{}!w&&h.Image&&(new Image().src=g.v,w=!0),w||(g.g=$l(g.j,null),g.g.ea(g.v)),g.F=Date.now(),nt(g)}zl(c)}function Kn(c){c.g&&(wa(c),c.g.cancel(),c.g=null)}function Gs(c){Kn(c),c.u&&(h.clearTimeout(c.u),c.u=null),Ys(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&h.clearTimeout(c.s),c.s=null)}function dr(c){if(!vn(c.h)&&!c.s){c.s=!0;var g=c.Ga;Oe||ae(),ne||(Oe(),ne=!0),pe.add(g,c),c.B=0}}function rd(c,g){return kl(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Un(T(c.Ga,c,g),Ul(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const $=new $n(this,this.j,c);let Q=this.o;if(this.S&&(Q?(Q=R(Q),j(Q,this.S)):Q=this.S),this.m!==null||this.O||($.H=Q,Q=null),this.P)e:{for(var g=0,w=0;w<this.i.length;w++){t:{var I=this.i[w];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,4096<g){g=w;break e}if(g===4096||w===this.i.length-1){g=w+1;break e}}g=1e3}else g=1e3;g=di(this,$,g),w=_n(this.I),et(w,"RID",c),et(w,"CVER",22),this.D&&et(w,"X-HTTP-Session-Id",this.D),Nr(this,w),Q&&(this.O?g="headers="+encodeURIComponent(String(br(Q)))+"&"+g:this.m&&ui(w,this.m,Q)),pa(this.h,$),this.Ua&&et(w,"TYPE","init"),this.P?(et(w,"$req",g),et(w,"SID","null"),$.T=!0,Us($,w,null)):Us($,w,g),this.G=2}}else this.G==3&&(c?Ks(this,c):this.i.length==0||vn(this.h)||Ks(this))};function Ks(c,g){var w;g?w=g.l:w=c.U++;const I=_n(c.I);et(I,"SID",c.K),et(I,"RID",w),et(I,"AID",c.T),Nr(c,I),c.m&&c.o&&ui(I,c.m,c.o),w=new $n(c,c.j,w,c.B+1),c.m===null&&(w.H=c.o),g&&(c.i=g.D.concat(c.i)),g=di(c,w,1e3),w.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),pa(c.h,w),Us(w,I,g)}function Nr(c,g){c.H&&ce(c.H,function(w,I){et(g,I,w)}),c.l&&ii({},function(w,I){et(g,I,w)})}function di(c,g,w){w=Math.min(c.i.length,w);var I=c.l?T(c.l.Na,c.l,c):null;e:{var $=c.i;let Q=-1;for(;;){const se=["count="+w];Q==-1?0<w?(Q=$[0].g,se.push("ofs="+Q)):Q=0:se.push("ofs="+Q);let Je=!0;for(let St=0;St<w;St++){let ze=$[St].g;const Pt=$[St].map;if(ze-=Q,0>ze)Q=Math.max(0,$[St].g-100),Je=!1;else try{Vl(Pt,se,"req"+ze+"_")}catch{I&&I(Pt)}}if(Je){I=se.join("&");break e}}}return c=c.i.splice(0,w),g.D=c,I}function ss(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;Oe||ae(),ne||(Oe(),ne=!0),pe.add(g,c),c.v=0}}function Qs(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Un(T(c.Fa,c),Ul(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Fl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Un(T(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),Kn(this),Fl(this))};function wa(c){c.A!=null&&(h.clearTimeout(c.A),c.A=null)}function Fl(c){c.g=new $n(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=_n(c.qa);et(g,"RID","rpc"),et(g,"SID",c.K),et(g,"AID",c.T),et(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&et(g,"TO",c.ja),et(g,"TYPE","xmlhttp"),Nr(c,g),c.m&&c.o&&ui(g,c.m,c.o),c.L&&(c.g.I=c.L);var w=c.g;c=c.ia,w.L=1,w.v=ai(_n(g)),w.m=null,w.P=!0,ha(w,c)}n.Za=function(){this.C!=null&&(this.C=null,Kn(this),Qs(this),mt(19))};function Ys(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function Xs(c,g){var w=null;if(c.g==g){Ys(c),wa(c),c.g=null;var I=2}else if(tn(c.h,g))w=g.D,Pl(c.h,g),I=1;else return;if(c.G!=0){if(g.o)if(I==1){w=g.m?g.m.length:0,g=Date.now()-g.F;var $=c.B;I=Qi(),It(I,new Ls(I,w)),dr(c)}else ss(c);else if($=g.s,$==3||$==0&&0<g.X||!(I==1&&rd(c,g)||I==2&&Qs(c)))switch(w&&0<w.length&&(g=c.h,g.i=g.i.concat(w)),$){case 1:Dr(c,5);break;case 4:Dr(c,10);break;case 3:Dr(c,6);break;default:Dr(c,2)}}}function Ul(c,g){let w=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(w*=2),w*g}function Dr(c,g){if(c.j.info("Error code "+g),g==2){var w=T(c.fb,c),I=c.Xa;const $=!I;I=new kr(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||ns(I,"https"),ai(I),$?ed(I.toString(),w):Ll(I.toString(),w)}else mt(2);c.G=0,c.l&&c.l.sa(g),zl(c),Gs(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function zl(c){if(c.G=0,c.ka=[],c.l){const g=bl(c.h);(g.length!=0||c.i.length!=0)&&(A(c.ka,g),A(c.ka,c.i),c.h.i.length=0,S(c.i),c.i.length=0),c.l.ra()}}function Bl(c,g,w){var I=w instanceof kr?_n(w):new kr(w);if(I.g!="")g&&(I.g=g+"."+I.g),si(I,I.s);else{var $=h.location;I=$.protocol,g=g?g+"."+$.hostname:$.hostname,$=+$.port;var Q=new kr(null);I&&ns(Q,I),g&&(Q.g=g),$&&si(Q,$),w&&(Q.l=w),I=Q}return w=c.D,g=c.ya,w&&g&&et(I,w,g),et(I,"VER",c.la),Nr(c,I),I}function $l(c,g,w){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new at(new Pr({eb:w})):new at(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ea(){}n=Ea.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Js(){}Js.prototype.g=function(c,g){return new nn(c,g)};function nn(c,g){Tt.call(this),this.g=new _a(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!D(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!D(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new hr(this)}N(nn,Tt),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){Mt(this.g)},nn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.u&&(w={},w.__data__=ia(c),c=w);g.i.push(new Al(g.Ya++,c)),g.G==3&&dr(g)},nn.prototype.N=function(){this.g.l=null,delete this.j,Mt(this.g),delete this.g,nn.aa.N.call(this)};function ql(c){or.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const w in g){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}N(ql,or);function Wl(){js.call(this),this.status=1}N(Wl,js);function hr(c){this.g=c}N(hr,Ea),hr.prototype.ua=function(){It(this.g,"a")},hr.prototype.ta=function(c){It(this.g,new ql(c))},hr.prototype.sa=function(c){It(this.g,new Wl)},hr.prototype.ra=function(){It(this.g,"b")},Js.prototype.createWebChannel=Js.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,k0=function(){return new Js},A0=function(){return Qi()},R0=ar,rf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ms.NO_ERROR=0,Ms.TIMEOUT=8,Ms.HTTP_ERROR=6,Qc=Ms,Il.COMPLETE="complete",C0=Il,Os.EventType=Rn,Rn.OPEN="a",Rn.CLOSE="b",Rn.ERROR="c",Rn.MESSAGE="d",Tt.prototype.listen=Tt.prototype.K,Ga=Os,at.prototype.listenOnce=at.prototype.L,at.prototype.getLastError=at.prototype.Ka,at.prototype.getLastErrorCode=at.prototype.Ba,at.prototype.getStatus=at.prototype.Z,at.prototype.getResponseJson=at.prototype.Oa,at.prototype.getResponseText=at.prototype.oa,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Ha,S0=at}).apply(typeof Fc<"u"?Fc:typeof self<"u"?self:typeof window<"u"?window:{});const Cy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Go="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new Af("@firebase/firestore");function xo(){return Ss.logLevel}function de(n,...e){if(Ss.logLevel<=Le.DEBUG){const t=e.map(zf);Ss.debug(`Firestore (${Go}): ${n}`,...t)}}function Qr(n,...e){if(Ss.logLevel<=Le.ERROR){const t=e.map(zf);Ss.error(`Firestore (${Go}): ${n}`,...t)}}function Oo(n,...e){if(Ss.logLevel<=Le.WARN){const t=e.map(zf);Ss.warn(`Firestore (${Go}): ${n}`,...t)}}function zf(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(n="Unexpected state"){const e=`FIRESTORE (${Go}) INTERNAL ASSERTION FAILED: `+n;throw Qr(e),new Error(e)}function Xe(n,e){n||Ce()}function ke(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Ir{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Yt.UNAUTHENTICATED))}shutdown(){}}class uS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class dS{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xe(this.o===void 0);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Wr,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},h=p=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(p=>h(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Wr)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Xe(typeof i.accessToken=="string"),new P0(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string"),new Yt(e)}}class hS{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class fS{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new hS(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mS{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Xe(this.o===void 0);const i=l=>{l.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.R;return this.R=l.token,de("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const o=l=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Xe(typeof t.token=="string"),this.R=t.token,new pS(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=gS(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%e.length))}return i}}function Ue(n,e){return n<e?-1:n>e?1:0}function jo(n,e,t){return n.length===e.length&&n.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{static now(){return At.fromMillis(Date.now())}static fromDate(e){return At.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new At(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new fe(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new At(0,0))}static max(){return new Ae(new At(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ce(),i===void 0?i=e.length-t:i>e.length-t&&Ce(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ol.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ol?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=e.get(o),d=t.get(o);if(l<d)return-1;if(l>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ot extends ol{construct(e,t,i){return new ot(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new fe(J.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new ot(t)}static emptyPath(){return new ot([])}}const yS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bt extends ol{construct(e,t,i){return new Bt(e,t,i)}static isValidIdentifier(e){return yS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Bt(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new fe(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let d=!1;for(;o<e.length;){const h=e[o];if(h==="\\"){if(o+1===e.length)throw new fe(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new fe(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else h==="`"?(d=!d,o++):h!=="."||d?(i+=h,o++):(l(),o++)}if(l(),d)throw new fe(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bt(t)}static emptyPath(){return new Bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(ot.fromString(e))}static fromName(e){return new we(ot.fromString(e).popFirst(5))}static empty(){return new we(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ot.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new ot(e.slice()))}}function vS(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(i===1e9?new At(t+1,0):new At(t,i));return new Fi(o,we.empty(),e)}function _S(n){return new Fi(n.readTime,n.key,-1)}class Fi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Fi(Ae.min(),we.empty(),-1)}static max(){return new Fi(Ae.max(),we.empty(),-1)}}function wS(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(n.documentKey,e.documentKey),t!==0?t:Ue(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==ES)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):X.reject(t)}static resolve(e){return new X((t,i)=>{t(e)})}static reject(e){return new X((t,i)=>{i(e)})}static waitFor(e){return new X((t,i)=>{let o=0,l=0,d=!1;e.forEach(h=>{++o,h.next(()=>{++l,d&&l===o&&t()},p=>i(p))}),d=!0,l===o&&t()})}static or(e){let t=X.resolve(!1);for(const i of e)t=t.next(o=>o?X.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,l)=>{i.push(t.call(this,o,l))}),this.waitFor(i)}static mapArray(e,t){return new X((i,o)=>{const l=e.length,d=new Array(l);let h=0;for(let p=0;p<l;p++){const v=p;t(e[v]).next(E=>{d[v]=E,++h,h===l&&i(d)},E=>o(E))}})}static doWhile(e,t){return new X((i,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):i()};l()})}}function TS(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Qo(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ju.oe=-1;function Lu(n){return n==null}function pu(n){return n===0&&1/n==-1/0}function IS(n){return typeof n=="number"&&Number.isInteger(n)&&!pu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ry(e)),e=CS(n.get(t),e);return Ry(e)}function CS(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case"":t+="";break;default:t+=l}}return t}function Ry(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function qi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function N0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,t){this.comparator=e,this.root=t||zt.EMPTY}insert(e,t){return new ht(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uc(this.root,e,this.comparator,!0)}}class Uc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??zt.RED,this.left=o??zt.EMPTY,this.right=l??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new zt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return zt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ce();const e=this.left.check();if(e!==this.right.check())throw Ce();return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce()}get value(){throw Ce()}get color(){throw Ce()}get left(){throw Ce()}get right(){throw Ce()}copy(e,t,i,o,l){return this}insert(e,t,i){return new zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ky(this.data.getIterator())}getIteratorFrom(e){return new ky(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new kt(this.comparator);return t.data=e,t}}class ky{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(Bt.comparator)}static empty(){return new Cn([])}unionWith(e){let t=new kt(Bt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Cn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jo(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new D0("Invalid base64 string: "+l):l}}(e);return new $t(t)}static fromUint8Array(e){const t=function(o){let l="";for(let d=0;d<o.length;++d)l+=String.fromCharCode(o[d]);return l}(e);return new $t(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$t.EMPTY_BYTE_STRING=new $t("");const RS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ui(n){if(Xe(!!n),typeof n=="string"){let e=0;const t=RS.exec(n);if(Xe(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:yt(n.seconds),nanos:yt(n.nanos)}}function yt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function zi(n){return typeof n=="string"?$t.fromBase64String(n):$t.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Vu(n){const e=n.mapValue.fields.__previous_value__;return Bf(e)?Vu(e):e}function al(n){const e=Ui(n.mapValue.fields.__local_write_time__.timestampValue);return new At(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,t,i,o,l,d,h,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=v}}class ll{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ll("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ll&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Bi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Bf(n)?4:PS(n)?9007199254740991:kS(n)?10:11:Ce()}function xr(n,e){if(n===e)return!0;const t=Bi(n);if(t!==Bi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return al(n).isEqual(al(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const d=Ui(o.timestampValue),h=Ui(l.timestampValue);return d.seconds===h.seconds&&d.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,l){return zi(o.bytesValue).isEqual(zi(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,l){return yt(o.geoPointValue.latitude)===yt(l.geoPointValue.latitude)&&yt(o.geoPointValue.longitude)===yt(l.geoPointValue.longitude)}(n,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return yt(o.integerValue)===yt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const d=yt(o.doubleValue),h=yt(l.doubleValue);return d===h?pu(d)===pu(h):isNaN(d)&&isNaN(h)}return!1}(n,e);case 9:return jo(n.arrayValue.values||[],e.arrayValue.values||[],xr);case 10:case 11:return function(o,l){const d=o.mapValue.fields||{},h=l.mapValue.fields||{};if(Ay(d)!==Ay(h))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(h[p]===void 0||!xr(d[p],h[p])))return!1;return!0}(n,e);default:return Ce()}}function cl(n,e){return(n.values||[]).find(t=>xr(t,e))!==void 0}function Lo(n,e){if(n===e)return 0;const t=Bi(n),i=Bi(e);if(t!==i)return Ue(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(n.booleanValue,e.booleanValue);case 2:return function(l,d){const h=yt(l.integerValue||l.doubleValue),p=yt(d.integerValue||d.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1}(n,e);case 3:return Py(n.timestampValue,e.timestampValue);case 4:return Py(al(n),al(e));case 5:return Ue(n.stringValue,e.stringValue);case 6:return function(l,d){const h=zi(l),p=zi(d);return h.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(l,d){const h=l.split("/"),p=d.split("/");for(let v=0;v<h.length&&v<p.length;v++){const E=Ue(h[v],p[v]);if(E!==0)return E}return Ue(h.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,d){const h=Ue(yt(l.latitude),yt(d.latitude));return h!==0?h:Ue(yt(l.longitude),yt(d.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return by(n.arrayValue,e.arrayValue);case 10:return function(l,d){var h,p,v,E;const _=l.fields||{},T=d.fields||{},C=(h=_.value)===null||h===void 0?void 0:h.arrayValue,N=(p=T.value)===null||p===void 0?void 0:p.arrayValue,S=Ue(((v=C==null?void 0:C.values)===null||v===void 0?void 0:v.length)||0,((E=N==null?void 0:N.values)===null||E===void 0?void 0:E.length)||0);return S!==0?S:by(C,N)}(n.mapValue,e.mapValue);case 11:return function(l,d){if(l===zc.mapValue&&d===zc.mapValue)return 0;if(l===zc.mapValue)return 1;if(d===zc.mapValue)return-1;const h=l.fields||{},p=Object.keys(h),v=d.fields||{},E=Object.keys(v);p.sort(),E.sort();for(let _=0;_<p.length&&_<E.length;++_){const T=Ue(p[_],E[_]);if(T!==0)return T;const C=Lo(h[p[_]],v[E[_]]);if(C!==0)return C}return Ue(p.length,E.length)}(n.mapValue,e.mapValue);default:throw Ce()}}function Py(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ue(n,e);const t=Ui(n),i=Ui(e),o=Ue(t.seconds,i.seconds);return o!==0?o:Ue(t.nanos,i.nanos)}function by(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Lo(t[o],i[o]);if(l)return l}return Ue(t.length,i.length)}function Vo(n){return sf(n)}function sf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Ui(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return zi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return we.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=sf(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const d of i)l?l=!1:o+=",",o+=`${d}:${sf(t.fields[d])}`;return o+"}"}(n.mapValue):Ce()}function Yc(n){switch(Bi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vu(n);return e?16+Yc(e):16;case 5:return 2*n.stringValue.length;case 6:return zi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,l)=>o+Yc(l),0)}(n.arrayValue);case 10:case 11:return function(i){let o=0;return qi(i.fields,(l,d)=>{o+=l.length+Yc(d)}),o}(n.mapValue);default:throw Ce()}}function Ny(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function of(n){return!!n&&"integerValue"in n}function $f(n){return!!n&&"arrayValue"in n}function Dy(n){return!!n&&"nullValue"in n}function Oy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Xc(n){return!!n&&"mapValue"in n}function kS(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ja(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return qi(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Ja(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ja(n.arrayValue.values[t]);return e}return Object.assign({},n)}function PS(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.value=e}static empty(){return new gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Xc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ja(t)}setAll(e){let t=Bt.emptyPath(),i={},o=[];e.forEach((d,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=h.popLast()}d?i[h.lastSegment()]=Ja(d):o.push(h.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());Xc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Xc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){qi(t,(o,l)=>e[o]=l);for(const o of i)delete e[o]}clone(){return new gn(Ja(this.value))}}function O0(n){const e=[];return qi(n.fields,(t,i)=>{const o=new Bt([t]);if(Xc(i)){const l=O0(i.mapValue).fields;if(l.length===0)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)}),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,t,i,o,l,d,h){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=d,this.documentState=h}static newInvalidDocument(e){return new Xt(e,0,Ae.min(),Ae.min(),Ae.min(),gn.empty(),0)}static newFoundDocument(e,t,i,o){return new Xt(e,1,t,Ae.min(),i,o,0)}static newNoDocument(e,t){return new Xt(e,2,t,Ae.min(),Ae.min(),gn.empty(),0)}static newUnknownDocument(e,t){return new Xt(e,3,t,Ae.min(),Ae.min(),gn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,t){this.position=e,this.inclusive=t}}function jy(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],d=n.position[o];if(l.field.isKeyField()?i=we.comparator(we.fromName(d.referenceValue),t.key):i=Lo(d,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ly(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!xr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,t="asc"){this.field=e,this.dir=t}}function bS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{}class xt extends j0{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new DS(e,t,i):t==="array-contains"?new LS(e,i):t==="in"?new VS(e,i):t==="not-in"?new MS(e,i):t==="array-contains-any"?new FS(e,i):new xt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new OS(e,i):new jS(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Lo(t,this.value)):t!==null&&Bi(this.value)===Bi(t)&&this.matchesComparison(Lo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rr extends j0{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new rr(e,t)}matches(e){return L0(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function L0(n){return n.op==="and"}function V0(n){return NS(n)&&L0(n)}function NS(n){for(const e of n.filters)if(e instanceof rr)return!1;return!0}function af(n){if(n instanceof xt)return n.field.canonicalString()+n.op.toString()+Vo(n.value);if(V0(n))return n.filters.map(e=>af(e)).join(",");{const e=n.filters.map(t=>af(t)).join(",");return`${n.op}(${e})`}}function M0(n,e){return n instanceof xt?function(i,o){return o instanceof xt&&i.op===o.op&&i.field.isEqual(o.field)&&xr(i.value,o.value)}(n,e):n instanceof rr?function(i,o){return o instanceof rr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((l,d,h)=>l&&M0(d,o.filters[h]),!0):!1}(n,e):void Ce()}function F0(n){return n instanceof xt?function(t){return`${t.field.canonicalString()} ${t.op} ${Vo(t.value)}`}(n):n instanceof rr?function(t){return t.op.toString()+" {"+t.getFilters().map(F0).join(" ,")+"}"}(n):"Filter"}class DS extends xt{constructor(e,t,i){super(e,t,i),this.key=we.fromName(i.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class OS extends xt{constructor(e,t){super(e,"in",t),this.keys=U0("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class jS extends xt{constructor(e,t){super(e,"not-in",t),this.keys=U0("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function U0(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>we.fromName(i.referenceValue))}class LS extends xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $f(t)&&cl(t.arrayValue,this.value)}}class VS extends xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&cl(this.value.arrayValue,t)}}class MS extends xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(cl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!cl(this.value.arrayValue,t)}}class FS extends xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$f(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>cl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,t=null,i=[],o=[],l=null,d=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=d,this.endAt=h,this.ue=null}}function Vy(n,e=null,t=[],i=[],o=null,l=null,d=null){return new US(n,e,t,i,o,l,d)}function qf(n){const e=ke(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>af(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Lu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Vo(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Vo(i)).join(",")),e.ue=t}return e.ue}function Wf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!bS(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!M0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ly(n.startAt,e.startAt)&&Ly(n.endAt,e.endAt)}function lf(n){return we.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,t=null,i=[],o=[],l=null,d="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=d,this.startAt=h,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function zS(n,e,t,i,o,l,d,h){return new vl(n,e,t,i,o,l,d,h)}function Hf(n){return new vl(n)}function My(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function z0(n){return n.collectionGroup!==null}function Za(n){const e=ke(n);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let h=new kt(Bt.comparator);return d.filters.forEach(p=>{p.getFlattenedFilters().forEach(v=>{v.isInequality()&&(h=h.add(v.field))})}),h})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new gu(l,i))}),t.has(Bt.keyField().canonicalString())||e.ce.push(new gu(Bt.keyField(),i))}return e.ce}function wr(n){const e=ke(n);return e.le||(e.le=BS(e,Za(n))),e.le}function BS(n,e){if(n.limitType==="F")return Vy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new gu(o.field,l)});const t=n.endAt?new mu(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new mu(n.startAt.position,n.startAt.inclusive):null;return Vy(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function cf(n,e){const t=n.filters.concat([e]);return new vl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function uf(n,e,t){return new vl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Mu(n,e){return Wf(wr(n),wr(e))&&n.limitType===e.limitType}function B0(n){return`${qf(wr(n))}|lt:${n.limitType}`}function To(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>F0(o)).join(", ")}]`),Lu(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>Vo(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>Vo(o)).join(",")),`Target(${i})`}(wr(n))}; limitType=${n.limitType})`}function Fu(n,e){return e.isFoundDocument()&&function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):we.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(n,e)&&function(i,o){for(const l of Za(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(n,e)&&function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0}(n,e)&&function(i,o){return!(i.startAt&&!function(d,h,p){const v=jy(d,h,p);return d.inclusive?v<=0:v<0}(i.startAt,Za(i),o)||i.endAt&&!function(d,h,p){const v=jy(d,h,p);return d.inclusive?v>=0:v>0}(i.endAt,Za(i),o))}(n,e)}function $S(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function $0(n){return(e,t)=>{let i=!1;for(const o of Za(n)){const l=qS(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function qS(n,e,t){const i=n.field.isKeyField()?we.comparator(e.key,t.key):function(l,d,h){const p=d.data.field(l),v=h.data.field(l);return p!==null&&v!==null?Lo(p,v):Ce()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ce()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){qi(this.inner,(t,i)=>{for(const[o,l]of i)e(o,l)})}isEmpty(){return N0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=new ht(we.comparator);function Yr(){return WS}const q0=new ht(we.comparator);function Ka(...n){let e=q0;for(const t of n)e=e.insert(t.key,t);return e}function W0(n){let e=q0;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function ws(){return el()}function H0(){return el()}function el(){return new Rs(n=>n.toString(),(n,e)=>n.isEqual(e))}const HS=new ht(we.comparator),GS=new kt(we.comparator);function Ve(...n){let e=GS;for(const t of n)e=e.add(t);return e}const KS=new kt(Ue);function QS(){return KS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pu(e)?"-0":e}}function G0(n){return{integerValue:""+n}}function YS(n,e){return IS(e)?G0(e):Gf(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(){this._=void 0}}function XS(n,e,t){return n instanceof yu?function(o,l){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Bf(l)&&(l=Vu(l)),l&&(d.fields.__previous_value__=l),{mapValue:d}}(t,e):n instanceof ul?Q0(n,e):n instanceof dl?Y0(n,e):function(o,l){const d=K0(o,l),h=Fy(d)+Fy(o.Pe);return of(d)&&of(o.Pe)?G0(h):Gf(o.serializer,h)}(n,e)}function JS(n,e,t){return n instanceof ul?Q0(n,e):n instanceof dl?Y0(n,e):t}function K0(n,e){return n instanceof vu?function(i){return of(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class yu extends Uu{}class ul extends Uu{constructor(e){super(),this.elements=e}}function Q0(n,e){const t=X0(e);for(const i of n.elements)t.some(o=>xr(o,i))||t.push(i);return{arrayValue:{values:t}}}class dl extends Uu{constructor(e){super(),this.elements=e}}function Y0(n,e){let t=X0(e);for(const i of n.elements)t=t.filter(o=>!xr(o,i));return{arrayValue:{values:t}}}class vu extends Uu{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Fy(n){return yt(n.integerValue||n.doubleValue)}function X0(n){return $f(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function ZS(n,e){return n.field.isEqual(e.field)&&function(i,o){return i instanceof ul&&o instanceof ul||i instanceof dl&&o instanceof dl?jo(i.elements,o.elements,xr):i instanceof vu&&o instanceof vu?xr(i.Pe,o.Pe):i instanceof yu&&o instanceof yu}(n.transform,e.transform)}class eC{constructor(e,t){this.version=e,this.transformResults=t}}class nr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new nr}static exists(e){return new nr(void 0,e)}static updateTime(e){return new nr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class zu{}function J0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Kf(n.key,nr.none()):new _l(n.key,n.data,nr.none());{const t=n.data,i=gn.empty();let o=new kt(Bt.comparator);for(let l of e.fields)if(!o.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?i.delete(l):i.set(l,d),o=o.add(l)}return new Wi(n.key,i,new Cn(o.toArray()),nr.none())}}function tC(n,e,t){n instanceof _l?function(o,l,d){const h=o.value.clone(),p=zy(o.fieldTransforms,l,d.transformResults);h.setAll(p),l.convertToFoundDocument(d.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Wi?function(o,l,d){if(!Jc(o.precondition,l))return void l.convertToUnknownDocument(d.version);const h=zy(o.fieldTransforms,l,d.transformResults),p=l.data;p.setAll(Z0(o)),p.setAll(h),l.convertToFoundDocument(d.version,p).setHasCommittedMutations()}(n,e,t):function(o,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,t)}function tl(n,e,t,i){return n instanceof _l?function(l,d,h,p){if(!Jc(l.precondition,d))return h;const v=l.value.clone(),E=By(l.fieldTransforms,p,d);return v.setAll(E),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null}(n,e,t,i):n instanceof Wi?function(l,d,h,p){if(!Jc(l.precondition,d))return h;const v=By(l.fieldTransforms,p,d),E=d.data;return E.setAll(Z0(l)),E.setAll(v),d.convertToFoundDocument(d.version,E).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(_=>_.field))}(n,e,t,i):function(l,d,h){return Jc(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):h}(n,e,t)}function nC(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=K0(i.transform,o||null);l!=null&&(t===null&&(t=gn.empty()),t.set(i.field,l))}return t||null}function Uy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&jo(i,o,(l,d)=>ZS(l,d))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class _l extends zu{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Wi extends zu{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Z0(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function zy(n,e,t){const i=new Map;Xe(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],d=l.transform,h=e.data.field(l.field);i.set(l.field,JS(d,h,t[o]))}return i}function By(n,e,t){const i=new Map;for(const o of n){const l=o.transform,d=t.data.field(o.field);i.set(o.field,XS(l,d,e))}return i}class Kf extends zu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rC extends zu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&tC(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=tl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=tl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=H0();return this.mutations.forEach(o=>{const l=e.get(o.key),d=l.overlayedDocument;let h=this.applyToLocalView(d,l.mutatedFields);h=t.has(o.key)?null:h;const p=J0(d,h);p!==null&&i.set(o.key,p),d.isValidDocument()||d.convertToNoDocument(Ae.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ve())}isEqual(e){return this.batchId===e.batchId&&jo(this.mutations,e.mutations,(t,i)=>Uy(t,i))&&jo(this.baseMutations,e.baseMutations,(t,i)=>Uy(t,i))}}class Qf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Xe(e.mutations.length===i.length);let o=function(){return HS}();const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,i[d].version);return new Qf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et,Be;function aC(n){switch(n){default:return Ce();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function e_(n){if(n===void 0)return Qr("GRPC error has no .code"),J.UNKNOWN;switch(n){case Et.OK:return J.OK;case Et.CANCELLED:return J.CANCELLED;case Et.UNKNOWN:return J.UNKNOWN;case Et.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Et.INTERNAL:return J.INTERNAL;case Et.UNAVAILABLE:return J.UNAVAILABLE;case Et.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Et.NOT_FOUND:return J.NOT_FOUND;case Et.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Et.ABORTED:return J.ABORTED;case Et.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Et.DATA_LOSS:return J.DATA_LOSS;default:return Ce()}}(Be=Et||(Et={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=new xs([4294967295,4294967295],0);function $y(n){const e=lC().encode(n),t=new I0;return t.update(e),new Uint8Array(t.digest())}function qy(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new xs([t,i],0),new xs([o,l],0)]}class Yf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Qa(`Invalid padding: ${t}`);if(i<0)throw new Qa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Qa(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Qa(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=xs.fromNumber(this.Te)}Ee(e,t,i){let o=e.add(t.multiply(xs.fromNumber(i)));return o.compare(cC)===1&&(o=new xs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=$y(e),[i,o]=qy(t);for(let l=0;l<this.hashCount;l++){const d=this.Ee(i,o,l);if(!this.de(d))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new Yf(l,o,t);return i.forEach(h=>d.insert(h)),d}insert(e){if(this.Te===0)return;const t=$y(e),[i,o]=qy(t);for(let l=0;l<this.hashCount;l++){const d=this.Ee(i,o,l);this.Ae(d)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Qa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,wl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Bu(Ae.min(),o,new ht(Ue),Yr(),Ve())}}class wl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new wl(i,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class t_{constructor(e,t){this.targetId=e,this.me=t}}class n_{constructor(e,t,i=$t.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Wy{constructor(){this.fe=0,this.ge=Hy(),this.pe=$t.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ve(),t=Ve(),i=Ve();return this.ge.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ce()}}),new wl(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=Hy()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Xe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class uC{constructor(e){this.Le=e,this.Be=new Map,this.ke=Yr(),this.qe=Bc(),this.Qe=Bc(),this.Ke=new ht(Ue)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const i=this.ze(t);switch(e.state){case 0:this.je(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.je(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),i.De(e.resumeToken));break;default:Ce()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,o)=>{this.je(o)&&t(o)})}Je(e){const t=e.targetId,i=e.me.count,o=this.Ye(t);if(o){const l=o.target;if(lf(l))if(i===0){const d=new we(l.path);this.We(t,d,Xt.newNoDocument(d,Ae.min()))}else Xe(i===1);else{const d=this.Ze(t);if(d!==i){const h=this.Xe(e),p=h?this.et(h,e,d):1;if(p!==0){this.He(t);const v=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,v)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let d,h;try{d=zi(i).toUint8Array()}catch(p){if(p instanceof D0)return Oo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new Yf(d,o,l)}catch(p){return Oo(p instanceof Qa?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.Te===0?null:h}et(e,t,i){return t.me.count===i-this.rt(e,t.targetId)?0:2}rt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let o=0;return i.forEach(l=>{const d=this.Le.nt(),h=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.We(t,l,null),o++)}),o}it(e){const t=new Map;this.Be.forEach((l,d)=>{const h=this.Ye(d);if(h){if(l.current&&lf(h.target)){const p=new we(h.target.path);this.st(p).has(d)||this.ot(d,p)||this.We(d,p,Xt.newNoDocument(p,e))}l.be&&(t.set(d,l.ve()),l.Ce())}});let i=Ve();this.Qe.forEach((l,d)=>{let h=!0;d.forEachWhile(p=>{const v=this.Ye(p);return!v||v.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(l))}),this.ke.forEach((l,d)=>d.setReadTime(e));const o=new Bu(e,t,this.Ke,this.ke,i);return this.ke=Yr(),this.qe=Bc(),this.Qe=Bc(),this.Ke=new ht(Ue),o}Ue(e,t){if(!this.je(e))return;const i=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,i){if(!this.je(e))return;const o=this.ze(e);this.ot(e,t)?o.Fe(t,1):o.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new Wy,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new kt(Ue),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new kt(Ue),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new Wy),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Bc(){return new ht(we.comparator)}function Hy(){return new ht(we.comparator)}const dC={asc:"ASCENDING",desc:"DESCENDING"},hC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fC={and:"AND",or:"OR"};class pC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function df(n,e){return n.useProto3Json||Lu(e)?e:{value:e}}function _u(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function r_(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function mC(n,e){return _u(n,e.toTimestamp())}function Er(n){return Xe(!!n),Ae.fromTimestamp(function(t){const i=Ui(t);return new At(i.seconds,i.nanos)}(n))}function Xf(n,e){return hf(n,e).canonicalString()}function hf(n,e){const t=function(o){return new ot(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function i_(n){const e=ot.fromString(n);return Xe(c_(e)),e}function ff(n,e){return Xf(n.databaseId,e.path)}function Uh(n,e){const t=i_(e);if(t.get(1)!==n.databaseId.projectId)throw new fe(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new fe(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new we(o_(t))}function s_(n,e){return Xf(n.databaseId,e)}function gC(n){const e=i_(n);return e.length===4?ot.emptyPath():o_(e)}function pf(n){return new ot(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function o_(n){return Xe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Gy(n,e,t){return{name:ff(n,e),fields:t.value.mapValue.fields}}function yC(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Ce()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(v,E){return v.useProto3Json?(Xe(E===void 0||typeof E=="string"),$t.fromBase64String(E||"")):(Xe(E===void 0||E instanceof Buffer||E instanceof Uint8Array),$t.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,h=d&&function(v){const E=v.code===void 0?J.UNKNOWN:e_(v.code);return new fe(E,v.message||"")}(d);t=new n_(i,o,l,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Uh(n,i.document.name),l=Er(i.document.updateTime),d=i.document.createTime?Er(i.document.createTime):Ae.min(),h=new gn({mapValue:{fields:i.document.fields}}),p=Xt.newFoundDocument(o,l,d,h),v=i.targetIds||[],E=i.removedTargetIds||[];t=new Zc(v,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Uh(n,i.document),l=i.readTime?Er(i.readTime):Ae.min(),d=Xt.newNoDocument(o,l),h=i.removedTargetIds||[];t=new Zc([],h,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Uh(n,i.document),l=i.removedTargetIds||[];t=new Zc([],l,o,null)}else{if(!("filter"in e))return Ce();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,d=new oC(o,l),h=i.targetId;t=new t_(h,d)}}return t}function vC(n,e){let t;if(e instanceof _l)t={update:Gy(n,e.key,e.value)};else if(e instanceof Kf)t={delete:ff(n,e.key)};else if(e instanceof Wi)t={update:Gy(n,e.key,e.data),updateMask:RC(e.fieldMask)};else{if(!(e instanceof rC))return Ce();t={verify:ff(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,d){const h=d.transform;if(h instanceof yu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof ul)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof dl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof vu)return{fieldPath:d.field.canonicalString(),increment:h.Pe};throw Ce()}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:mC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ce()}(n,e.precondition)),t}function _C(n,e){return n&&n.length>0?(Xe(e!==void 0),n.map(t=>function(o,l){let d=o.updateTime?Er(o.updateTime):Er(l);return d.isEqual(Ae.min())&&(d=Er(l)),new eC(d,o.transformResults||[])}(t,e))):[]}function wC(n,e){return{documents:[s_(n,e.path)]}}function EC(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=s_(n,o);const l=function(v){if(v.length!==0)return l_(rr.create(v,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const d=function(v){if(v.length!==0)return v.map(E=>function(T){return{field:Io(T.field),direction:IC(T.dir)}}(E))}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const h=df(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{ct:t,parent:o}}function xC(n){let e=gC(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Xe(i===1);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=function(_){const T=a_(_);return T instanceof rr&&V0(T)?T.getFilters():[T]}(t.where));let d=[];t.orderBy&&(d=function(_){return _.map(T=>function(N){return new gu(So(N.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(T))}(t.orderBy));let h=null;t.limit&&(h=function(_){let T;return T=typeof _=="object"?_.value:_,Lu(T)?null:T}(t.limit));let p=null;t.startAt&&(p=function(_){const T=!!_.before,C=_.values||[];return new mu(C,T)}(t.startAt));let v=null;return t.endAt&&(v=function(_){const T=!_.before,C=_.values||[];return new mu(C,T)}(t.endAt)),zS(e,o,d,l,h,"F",p,v)}function TC(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function a_(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=So(t.unaryFilter.field);return xt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=So(t.unaryFilter.field);return xt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=So(t.unaryFilter.field);return xt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=So(t.unaryFilter.field);return xt.create(d,"!=",{nullValue:"NULL_VALUE"});default:return Ce()}}(n):n.fieldFilter!==void 0?function(t){return xt.create(So(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ce()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return rr.create(t.compositeFilter.filters.map(i=>a_(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce()}}(t.compositeFilter.op))}(n):Ce()}function IC(n){return dC[n]}function SC(n){return hC[n]}function CC(n){return fC[n]}function Io(n){return{fieldPath:n.canonicalString()}}function So(n){return Bt.fromServerFormat(n.fieldPath)}function l_(n){return n instanceof xt?function(t){if(t.op==="=="){if(Oy(t.value))return{unaryFilter:{field:Io(t.field),op:"IS_NAN"}};if(Dy(t.value))return{unaryFilter:{field:Io(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Oy(t.value))return{unaryFilter:{field:Io(t.field),op:"IS_NOT_NAN"}};if(Dy(t.value))return{unaryFilter:{field:Io(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Io(t.field),op:SC(t.op),value:t.value}}}(n):n instanceof rr?function(t){const i=t.getFilters().map(o=>l_(o));return i.length===1?i[0]:{compositeFilter:{op:CC(t.op),filters:i}}}(n):Ce()}function RC(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function c_(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,t,i,o,l=Ae.min(),d=Ae.min(),h=$t.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new Di(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.ht=e}}function kC(n){const e=xC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?uf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(){this.ln=new bC}addToCollectionParentIndex(e,t){return this.ln.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(Fi.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(Fi.min())}updateCollectionGroup(e,t,i){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class bC{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new kt(ot.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new kt(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class mn{static withCacheSize(e){return new mn(e,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mn.DEFAULT_COLLECTION_PERCENTILE=10,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mn.DEFAULT=new mn(41943040,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mn.DISABLED=new mn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Mo(0)}static Qn(){return new Mo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy([n,e],[t,i]){const o=Ue(n,t);return o===0?Ue(e,i):o}class NC{constructor(e){this.Gn=e,this.buffer=new kt(Qy),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Qy(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class DC{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){de("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Qo(t)?de("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Ko(t)}await this.Yn(3e5)})}}class OC{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return X.resolve(ju.oe);const i=new NC(t);return this.Zn.forEachTarget(e,o=>i.Hn(o.sequenceNumber)).next(()=>this.Zn.er(e,o=>i.Hn(o))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Zn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(Ky)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ky):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let i,o,l,d,h,p,v;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),o=this.params.maximumSequenceNumbersToCollect):o=_,d=Date.now(),this.nthSequenceNumber(e,o))).next(_=>(i=_,h=Date.now(),this.removeTargets(e,i,t))).next(_=>(l=_,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(_=>(v=Date.now(),xo()<=Le.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-E}ms
	Determined least recently used ${o} in `+(h-d)+`ms
	Removed ${l} targets in `+(p-h)+`ms
	Removed ${_} documents in `+(v-p)+`ms
Total Duration: ${v-E}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:_})))}}function jC(n,e){return new OC(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(){this.changes=new Rs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?X.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&tl(i.mutation,o,Cn.empty(),At.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Ve()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Ve()){const o=ws();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(l=>{let d=Ka();return l.forEach((h,p)=>{d=d.insert(h,p.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const i=ws();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Ve()))}populateOverlays(e,t,i){const o=[];return i.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((d,h)=>{t.set(d,h)})})}computeViews(e,t,i,o){let l=Yr();const d=el(),h=function(){return el()}();return t.forEach((p,v)=>{const E=i.get(v.key);o.has(v.key)&&(E===void 0||E.mutation instanceof Wi)?l=l.insert(v.key,v):E!==void 0?(d.set(v.key,E.mutation.getFieldMask()),tl(E.mutation,v,E.mutation.getFieldMask(),At.now())):d.set(v.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((v,E)=>d.set(v,E)),t.forEach((v,E)=>{var _;return h.set(v,new VC(E,(_=d.get(v))!==null&&_!==void 0?_:null))}),h))}recalculateAndSaveOverlays(e,t){const i=el();let o=new ht((d,h)=>d-h),l=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const h of d)h.keys().forEach(p=>{const v=t.get(p);if(v===null)return;let E=i.get(p)||Cn.empty();E=h.applyToLocalView(v,E),i.set(p,E);const _=(o.get(h.batchId)||Ve()).add(p);o=o.insert(h.batchId,_)})}).next(()=>{const d=[],h=o.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),v=p.key,E=p.value,_=H0();E.forEach(T=>{if(!l.has(T)){const C=J0(t.get(T),i.get(T));C!==null&&_.set(T,C),l=l.add(T)}}),d.push(this.documentOverlayCache.saveOverlays(e,v,_))}return X.waitFor(d)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(d){return we.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):z0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(l=>{const d=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):X.resolve(ws());let h=-1,p=l;return d.next(v=>X.forEach(v,(E,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),l.get(E)?X.resolve():this.remoteDocumentCache.getEntry(e,E).next(T=>{p=p.insert(E,T)}))).next(()=>this.populateOverlays(e,v,l)).next(()=>this.computeViews(e,p,v,Ve())).next(E=>({batchId:h,changes:W0(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next(i=>{let o=Ka();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let d=Ka();return this.indexManager.getCollectionParents(e,l).next(h=>X.forEach(h,p=>{const v=function(_,T){return new vl(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next(E=>{E.forEach((_,T)=>{d=d.insert(_,T)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o))).next(d=>{l.forEach((p,v)=>{const E=v.getKey();d.get(E)===null&&(d=d.insert(E,Xt.newInvalidDocument(E)))});let h=Ka();return d.forEach((p,v)=>{const E=l.get(p);E!==void 0&&tl(E.mutation,v,Cn.empty(),At.now()),Fu(t,v)&&(h=h.insert(p,v))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return X.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Er(o.createTime)}}(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(o){return{name:o.name,query:kC(o.bundledQuery),readTime:Er(o.readTime)}}(t)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(){this.overlays=new ht(we.comparator),this.Er=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ws();return X.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&i.set(o,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,l)=>{this.Tt(e,t,l)}),X.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Er.get(i);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Er.delete(i)),X.resolve()}getOverlaysForCollection(e,t,i){const o=ws(),l=t.length+1,d=new we(t.child("")),h=this.overlays.getIteratorFrom(d);for(;h.hasNext();){const p=h.getNext().value,v=p.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return X.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new ht((v,E)=>v-E);const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let E=l.get(v.largestBatchId);E===null&&(E=ws(),l=l.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const h=ws(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((v,E)=>h.set(v,E)),!(h.size()>=o)););return X.resolve(h)}Tt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.Er.get(o.largestBatchId).delete(i.key);this.Er.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new sC(t,i));let l=this.Er.get(t);l===void 0&&(l=Ve(),this.Er.set(t,l)),this.Er.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(){this.sessionToken=$t.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(){this.dr=new kt(Ot.Ar),this.Rr=new kt(Ot.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const i=new Ot(e,t);this.dr=this.dr.add(i),this.Rr=this.Rr.add(i)}mr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.gr(new Ot(e,t))}pr(e,t){e.forEach(i=>this.removeReference(i,t))}yr(e){const t=new we(new ot([])),i=new Ot(t,e),o=new Ot(t,e+1),l=[];return this.Rr.forEachInRange([i,o],d=>{this.gr(d),l.push(d.key)}),l}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new we(new ot([])),i=new Ot(t,e),o=new Ot(t,e+1);let l=Ve();return this.Rr.forEachInRange([i,o],d=>{l=l.add(d.key)}),l}containsKey(e){const t=new Ot(e,0),i=this.dr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ot{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return we.comparator(e.key,t.key)||Ue(e.br,t.br)}static Vr(e,t){return Ue(e.br,t.br)||we.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new kt(Ot.Ar)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new iC(l,t,i,o);this.mutationQueue.push(d);for(const h of o)this.vr=this.vr.add(new Ot(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return X.resolve(d)}lookupMutationBatch(e,t){return X.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Fr(i),l=o<0?0:o;return X.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ot(t,0),o=new Ot(t,Number.POSITIVE_INFINITY),l=[];return this.vr.forEachInRange([i,o],d=>{const h=this.Cr(d.br);l.push(h)}),X.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new kt(Ue);return t.forEach(o=>{const l=new Ot(o,0),d=new Ot(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([l,d],h=>{i=i.add(h.br)})}),X.resolve(this.Mr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;we.isDocumentKey(l)||(l=l.child(""));const d=new Ot(new we(l),0);let h=new kt(Ue);return this.vr.forEachWhile(p=>{const v=p.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(h=h.add(p.br)),!0)},d),X.resolve(this.Mr(h))}Mr(e){const t=[];return e.forEach(i=>{const o=this.Cr(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Xe(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.vr;return X.forEach(t.mutations,o=>{const l=new Ot(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.vr=i})}Ln(e){}containsKey(e,t){const i=new Ot(t,0),o=this.vr.firstAfterOrEqual(i);return X.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.Nr=e,this.docs=function(){return new ht(we.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,d=this.Nr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return X.resolve(i?i.document.mutableCopy():Xt.newInvalidDocument(t))}getEntries(e,t){let i=Yr();return t.forEach(o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Xt.newInvalidDocument(o))}),X.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Yr();const d=t.path,h=new we(d.child("")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:v,value:{document:E}}=p.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||wS(_S(E),i)<=0||(o.has(E.key)||Fu(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return X.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Ce()}Lr(e,t){return X.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new qC(this)}getSize(e){return X.resolve(this.size)}}class qC extends LC{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.hr.addEntry(e,o)):this.hr.removeEntry(i)}),X.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e){this.persistence=e,this.Br=new Rs(t=>qf(t),Wf),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.kr=0,this.qr=new Jf,this.targetCount=0,this.Qr=Mo.qn()}forEachTarget(e,t){return this.Br.forEach((i,o)=>t(o)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.kr&&(this.kr=t),X.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new Mo(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.Un(t),X.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.Br.forEach((d,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.Br.delete(d),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),o++)}),X.waitFor(l).next(()=>o)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const i=this.Br.get(t)||null;return X.resolve(i)}addMatchingKeys(e,t,i){return this.qr.mr(t,i),X.resolve()}removeMatchingKeys(e,t,i){this.qr.pr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(d=>{l.push(o.markPotentiallyOrphaned(e,d))}),X.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const i=this.qr.Sr(t);return X.resolve(i)}containsKey(e,t){return X.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,t){this.Kr={},this.overlays={},this.$r=new ju(0),this.Ur=!1,this.Ur=!0,this.Wr=new zC,this.referenceDelegate=e(this),this.Gr=new WC(this),this.indexManager=new PC,this.remoteDocumentCache=function(o){return new $C(o)}(i=>this.referenceDelegate.zr(i)),this.serializer=new AC(t),this.jr=new FC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new UC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Kr[e.toKey()];return i||(i=new BC(t,this.referenceDelegate),this.Kr[e.toKey()]=i),i}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,i){de("MemoryPersistence","Starting transaction:",e);const o=new HC(this.$r.next());return this.referenceDelegate.Hr(),i(o).next(l=>this.referenceDelegate.Jr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Yr(e,t){return X.or(Object.values(this.Kr).map(i=>()=>i.containsKey(e,t)))}}class HC extends xS{constructor(e){super(),this.currentSequenceNumber=e}}class Zf{constructor(e){this.persistence=e,this.Zr=new Jf,this.Xr=null}static ei(e){return new Zf(e)}get ti(){if(this.Xr)return this.Xr;throw Ce()}addReference(e,t,i){return this.Zr.addReference(i,t),this.ti.delete(i.toString()),X.resolve()}removeReference(e,t,i){return this.Zr.removeReference(i,t),this.ti.add(i.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),X.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(o=>this.ti.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.ti.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.ti,i=>{const o=we.fromPath(i);return this.ni(e,o).next(l=>{l||t.removeEntry(o,Ae.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(i=>{i?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return X.or([()=>X.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class wu{constructor(e,t){this.persistence=e,this.ri=new Rs(i=>SS(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=jC(this,t)}static ei(e,t){return new wu(e,t)}Hr(){}Jr(e){return X.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}nr(e){let t=0;return this.er(e,i=>{t++}).next(()=>t)}er(e,t){return X.forEach(this.ri,(i,o)=>this.ir(e,i,o).next(l=>l?X.resolve():t(o)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.Lr(e,d=>this.ir(e,d,t).next(h=>{h||(i++,l.removeEntry(d,Ae.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),X.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),X.resolve()}removeReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),X.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Yc(e.data.value)),t}ir(e,t,i){return X.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.ri.get(t);return X.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Wi=i,this.Gi=o}static zi(e,t){let i=Ve(),o=Ve();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new ep(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return Gx()?8:TS(Jt())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.Xi(e,t).next(d=>{l.result=d}).next(()=>{if(!l.result)return this.es(e,t,o,i).next(d=>{l.result=d})}).next(()=>{if(l.result)return;const d=new GC;return this.ts(e,t,d).next(h=>{if(l.result=h,this.Hi)return this.ns(e,t,d,h.size)})}).next(()=>l.result)}ns(e,t,i,o){return i.documentReadCount<this.Ji?(xo()<=Le.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",To(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),X.resolve()):(xo()<=Le.DEBUG&&de("QueryEngine","Query:",To(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Yi*o?(xo()<=Le.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",To(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wr(t))):X.resolve())}Xi(e,t){if(My(t))return X.resolve(null);let i=wr(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=uf(t,null,"F"),i=wr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const d=Ve(...l);return this.Zi.getDocuments(e,d).next(h=>this.indexManager.getMinOffset(e,i).next(p=>{const v=this.rs(t,h);return this.ss(t,v,d,p.readTime)?this.Xi(e,uf(t,null,"F")):this.os(e,v,t,p)}))})))}es(e,t,i,o){return My(t)||o.isEqual(Ae.min())?X.resolve(null):this.Zi.getDocuments(e,i).next(l=>{const d=this.rs(t,l);return this.ss(t,d,i,o)?X.resolve(null):(xo()<=Le.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),To(t)),this.os(e,d,t,vS(o,-1)).next(h=>h))})}rs(e,t){let i=new kt($0(e));return t.forEach((o,l)=>{Fu(e,l)&&(i=i.add(l))}),i}ss(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ts(e,t,i){return xo()<=Le.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",To(t)),this.Zi.getDocumentsMatchingQuery(e,t,Fi.min(),i)}os(e,t,i,o){return this.Zi.getDocumentsMatchingQuery(e,i,o).next(l=>(t.forEach(d=>{l=l.insert(d.key,d)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,t,i,o){this.persistence=e,this._s=t,this.serializer=o,this.us=new ht(Ue),this.cs=new Rs(l=>qf(l),Wf),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(i)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MC(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function YC(n,e,t,i){return new QC(n,e,t,i)}async function d_(n,e){const t=ke(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(l=>(o=l,t.Ps(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const d=[],h=[];let p=Ve();for(const v of o){d.push(v.batchId);for(const E of v.mutations)p=p.add(E.key)}for(const v of l){h.push(v.batchId);for(const E of v.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(i,p).next(v=>({Ts:v,removedBatchIds:d,addedBatchIds:h}))})})}function XC(n,e){const t=ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),l=t.hs.newChangeBuffer({trackRemovals:!0});return function(h,p,v,E){const _=v.batch,T=_.keys();let C=X.resolve();return T.forEach(N=>{C=C.next(()=>E.getEntry(p,N)).next(S=>{const A=v.docVersions.get(N);Xe(A!==null),S.version.compareTo(A)<0&&(_.applyToRemoteDocument(S,v),S.isValidDocument()&&(S.setReadTime(v.commitVersion),E.addEntry(S)))})}),C.next(()=>h.mutationQueue.removeMutationBatch(p,_))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let p=Ve();for(let v=0;v<h.mutationResults.length;++v)h.mutationResults[v].transformResults.length>0&&(p=p.add(h.batch.mutations[v].key));return p}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function h_(n){const e=ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function JC(n,e){const t=ke(n),i=e.snapshotVersion;let o=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const d=t.hs.newChangeBuffer({trackRemovals:!0});o=t.us;const h=[];e.targetChanges.forEach((E,_)=>{const T=o.get(_);if(!T)return;h.push(t.Gr.removeMatchingKeys(l,E.removedDocuments,_).next(()=>t.Gr.addMatchingKeys(l,E.addedDocuments,_)));let C=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?C=C.withResumeToken($t.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):E.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(E.resumeToken,i)),o=o.insert(_,C),function(S,A,F){return S.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(T,C,E)&&h.push(t.Gr.updateTargetData(l,C))});let p=Yr(),v=Ve();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))}),h.push(ZC(l,d,e.documentUpdates).next(E=>{p=E.Is,v=E.Es})),!i.isEqual(Ae.min())){const E=t.Gr.getLastRemoteSnapshotVersion(l).next(_=>t.Gr.setTargetsMetadata(l,l.currentSequenceNumber,i));h.push(E)}return X.waitFor(h).next(()=>d.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,v)).next(()=>p)}).then(l=>(t.us=o,l))}function ZC(n,e,t){let i=Ve(),o=Ve();return t.forEach(l=>i=i.add(l)),e.getEntries(n,i).next(l=>{let d=Yr();return t.forEach((h,p)=>{const v=l.get(h);p.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(h)),p.isNoDocument()&&p.version.isEqual(Ae.min())?(e.removeEntry(h,p.readTime),d=d.insert(h,p)):!v.isValidDocument()||p.version.compareTo(v.version)>0||p.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(p),d=d.insert(h,p)):de("LocalStore","Ignoring outdated watch update for ",h,". Current version:",v.version," Watch version:",p.version)}),{Is:d,Es:o}})}function eR(n,e){const t=ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function tR(n,e){const t=ke(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.Gr.getTargetData(i,e).next(l=>l?(o=l,X.resolve(o)):t.Gr.allocateTargetId(i).next(d=>(o=new Di(e,d,"TargetPurposeListen",i.currentSequenceNumber),t.Gr.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.us.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.us=t.us.insert(i.targetId,i),t.cs.set(e,i.targetId)),i})}async function mf(n,e,t){const i=ke(n),o=i.us.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,d=>i.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!Qo(d))throw d;de("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}i.us=i.us.remove(e),i.cs.delete(o.target)}function Yy(n,e,t){const i=ke(n);let o=Ae.min(),l=Ve();return i.persistence.runTransaction("Execute query","readwrite",d=>function(p,v,E){const _=ke(p),T=_.cs.get(E);return T!==void 0?X.resolve(_.us.get(T)):_.Gr.getTargetData(v,E)}(i,d,wr(e)).next(h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,i.Gr.getMatchingKeysForTargetId(d,h.targetId).next(p=>{l=p})}).next(()=>i._s.getDocumentsMatchingQuery(d,e,t?o:Ae.min(),t?l:Ve())).next(h=>(nR(i,$S(e),h),{documents:h,ds:l})))}function nR(n,e,t){let i=n.ls.get(e)||Ae.min();t.forEach((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.ls.set(e,i)}class Xy{constructor(){this.activeTargetIds=QS()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rR{constructor(){this._o=new Xy,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,i){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Xy,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){de("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){de("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $c=null;function zh(){return $c===null?$c=function(){return 268435456+Math.round(2147483648*Math.random())}():$c++,"0x"+$c.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="WebChannelConnection";class aR extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Fo=i+"://"+t.host,this.Mo=`projects/${o}/databases/${l}`,this.xo=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}Oo(t,i,o,l,d){const h=zh(),p=this.No(t,i.toUriEncodedString());de("RestConnection",`Sending RPC '${t}' ${h}:`,p,o);const v={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(v,l,d),this.Bo(t,p,v,o).then(E=>(de("RestConnection",`Received RPC '${t}' ${h}: `,E),E),E=>{throw Oo("RestConnection",`RPC '${t}' ${h} failed with error: `,E,"url: ",p,"request:",o),E})}ko(t,i,o,l,d,h){return this.Oo(t,i,o,l,d)}Lo(t,i,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Go}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,d)=>t[d]=l),o&&o.headers.forEach((l,d)=>t[d]=l)}No(t,i){const o=sR[t];return`${this.Fo}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,i,o){const l=zh();return new Promise((d,h)=>{const p=new S0;p.setWithCredentials(!0),p.listenOnce(C0.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Qc.NO_ERROR:const E=p.getResponseJson();de(Kt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(E)),d(E);break;case Qc.TIMEOUT:de(Kt,`RPC '${e}' ${l} timed out`),h(new fe(J.DEADLINE_EXCEEDED,"Request time out"));break;case Qc.HTTP_ERROR:const _=p.getStatus();if(de(Kt,`RPC '${e}' ${l} failed with status:`,_,"response text:",p.getResponseText()),_>0){let T=p.getResponseJson();Array.isArray(T)&&(T=T[0]);const C=T==null?void 0:T.error;if(C&&C.status&&C.message){const N=function(A){const F=A.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(F)>=0?F:J.UNKNOWN}(C.status);h(new fe(N,C.message))}else h(new fe(J.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new fe(J.UNAVAILABLE,"Connection failed."));break;default:Ce()}}finally{de(Kt,`RPC '${e}' ${l} completed.`)}});const v=JSON.stringify(o);de(Kt,`RPC '${e}' ${l} sending request:`,o),p.send(t,"POST",v,i,15)})}qo(e,t,i){const o=zh(),l=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=k0(),h=A0(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(p.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Lo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const E=l.join("");de(Kt,`Creating RPC '${e}' stream ${o}: ${E}`,p);const _=d.createWebChannel(E,p);let T=!1,C=!1;const N=new oR({Eo:A=>{C?de(Kt,`Not sending because RPC '${e}' stream ${o} is closed:`,A):(T||(de(Kt,`Opening RPC '${e}' stream ${o} transport.`),_.open(),T=!0),de(Kt,`RPC '${e}' stream ${o} sending:`,A),_.send(A))},Ao:()=>_.close()}),S=(A,F,D)=>{A.listen(F,H=>{try{D(H)}catch(K){setTimeout(()=>{throw K},0)}})};return S(_,Ga.EventType.OPEN,()=>{C||(de(Kt,`RPC '${e}' stream ${o} transport opened.`),N.So())}),S(_,Ga.EventType.CLOSE,()=>{C||(C=!0,de(Kt,`RPC '${e}' stream ${o} transport closed`),N.Do())}),S(_,Ga.EventType.ERROR,A=>{C||(C=!0,Oo(Kt,`RPC '${e}' stream ${o} transport errored:`,A),N.Do(new fe(J.UNAVAILABLE,"The operation could not be completed")))}),S(_,Ga.EventType.MESSAGE,A=>{var F;if(!C){const D=A.data[0];Xe(!!D);const H=D,K=(H==null?void 0:H.error)||((F=H[0])===null||F===void 0?void 0:F.error);if(K){de(Kt,`RPC '${e}' stream ${o} received error:`,K);const ge=K.status;let ce=function(b){const j=Et[b];if(j!==void 0)return e_(j)}(ge),O=K.message;ce===void 0&&(ce=J.INTERNAL,O="Unknown error status: "+ge+" with message "+K.message),C=!0,N.Do(new fe(ce,O)),_.close()}else de(Kt,`RPC '${e}' stream ${o} received:`,D),N.vo(D)}}),S(h,R0.STAT_EVENT,A=>{A.stat===rf.PROXY?de(Kt,`RPC '${e}' stream ${o} detected buffering proxy`):A.stat===rf.NOPROXY&&de(Kt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{N.bo()},0),N}}function Bh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(n){return new pC(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e,t,i=1e3,o=1.5,l=6e4){this.li=e,this.timerId=t,this.Qo=i,this.Ko=o,this.$o=l,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),i=Math.max(0,Date.now()-this.Go),o=Math.max(0,t-i);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,t,i,o,l,d,h,p){this.li=e,this.Yo=i,this.Zo=o,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new f_(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(Qr(t.toString()),Qr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.Xo===t&&this.I_(i,o)},i=>{e(()=>{const o=new fe(J.UNKNOWN,"Fetching auth token failed: "+i.message);return this.E_(o)})})}I_(e,t){const i=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{i(()=>this.listener.Ro())}),this.stream.mo(()=>{i(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{i(()=>this.E_(o))}),this.stream.onMessage(o=>{i(()=>++this.n_==1?this.A_(o):this.onNext(o))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return de("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(de("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lR extends p_{constructor(e,t,i,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,d),this.serializer=l}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=yC(this.serializer,e),i=function(l){if(!("targetChange"in l))return Ae.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?Ae.min():d.readTime?Er(d.readTime):Ae.min()}(e);return this.listener.R_(t,i)}V_(e){const t={};t.database=pf(this.serializer),t.addTarget=function(l,d){let h;const p=d.target;if(h=lf(p)?{documents:wC(l,p)}:{query:EC(l,p).ct},h.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){h.resumeToken=r_(l,d.resumeToken);const v=df(l,d.expectedCount);v!==null&&(h.expectedCount=v)}else if(d.snapshotVersion.compareTo(Ae.min())>0){h.readTime=_u(l,d.snapshotVersion.toTimestamp());const v=df(l,d.expectedCount);v!==null&&(h.expectedCount=v)}return h}(this.serializer,e);const i=TC(this.serializer,e);i&&(t.labels=i),this.c_(t)}m_(e){const t={};t.database=pf(this.serializer),t.removeTarget=e,this.c_(t)}}class cR extends p_{constructor(e,t,i,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,d),this.serializer=l}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=_C(e.writeResults,e.commitTime),i=Er(e.commitTime);return this.listener.y_(i,t)}w_(){const e={};e.database=pf(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>vC(this.serializer,i))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new fe(J.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,d])=>this.connection.Oo(e,hf(t,i),o,l,d)).catch(l=>{throw l.name==="FirebaseError"?(l.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(J.UNKNOWN,l.toString())})}ko(e,t,i,o,l){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,h])=>this.connection.ko(e,hf(t,i),o,d,h,l)).catch(d=>{throw d.name==="FirebaseError"?(d.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new fe(J.UNKNOWN,d.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class dR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Qr(t),this.C_=!1):de("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=l,this.Q_.uo(d=>{i.enqueueAndForget(async()=>{As(this)&&(de("RemoteStore","Restarting streams for network reachability change."),await async function(p){const v=ke(p);v.k_.add(4),await El(v),v.K_.set("Unknown"),v.k_.delete(4),await qu(v)}(this))})}),this.K_=new dR(i,o)}}async function qu(n){if(As(n))for(const e of n.q_)await e(!0)}async function El(n){for(const e of n.q_)await e(!1)}function m_(n,e){const t=ke(n);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),ip(t)?rp(t):Yo(t).s_()&&np(t,e))}function tp(n,e){const t=ke(n),i=Yo(t);t.B_.delete(e),i.s_()&&g_(t,e),t.B_.size===0&&(i.s_()?i.a_():As(t)&&t.K_.set("Unknown"))}function np(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Yo(n).V_(e)}function g_(n,e){n.U_.xe(e),Yo(n).m_(e)}function rp(n){n.U_=new uC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.B_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Yo(n).start(),n.K_.F_()}function ip(n){return As(n)&&!Yo(n).i_()&&n.B_.size>0}function As(n){return ke(n).k_.size===0}function y_(n){n.U_=void 0}async function fR(n){n.K_.set("Online")}async function pR(n){n.B_.forEach((e,t)=>{np(n,e)})}async function mR(n,e){y_(n),ip(n)?(n.K_.O_(e),rp(n)):n.K_.set("Unknown")}async function gR(n,e,t){if(n.K_.set("Online"),e instanceof n_&&e.state===2&&e.cause)try{await async function(o,l){const d=l.cause;for(const h of l.targetIds)o.B_.has(h)&&(await o.remoteSyncer.rejectListen(h,d),o.B_.delete(h),o.U_.removeTarget(h))}(n,e)}catch(i){de("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Eu(n,i)}else if(e instanceof Zc?n.U_.$e(e):e instanceof t_?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(Ae.min()))try{const i=await h_(n.localStore);t.compareTo(i)>=0&&await function(l,d){const h=l.U_.it(d);return h.targetChanges.forEach((p,v)=>{if(p.resumeToken.approximateByteSize()>0){const E=l.B_.get(v);E&&l.B_.set(v,E.withResumeToken(p.resumeToken,d))}}),h.targetMismatches.forEach((p,v)=>{const E=l.B_.get(p);if(!E)return;l.B_.set(p,E.withResumeToken($t.EMPTY_BYTE_STRING,E.snapshotVersion)),g_(l,p);const _=new Di(E.target,p,v,E.sequenceNumber);np(l,_)}),l.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(i){de("RemoteStore","Failed to raise snapshot:",i),await Eu(n,i)}}async function Eu(n,e,t){if(!Qo(e))throw e;n.k_.add(1),await El(n),n.K_.set("Offline"),t||(t=()=>h_(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{de("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await qu(n)})}function v_(n,e){return e().catch(t=>Eu(n,t,e))}async function Wu(n){const e=ke(n),t=$i(e);let i=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;yR(e);)try{const o=await eR(e.localStore,i);if(o===null){e.L_.length===0&&t.a_();break}i=o.batchId,vR(e,o)}catch(o){await Eu(e,o)}__(e)&&w_(e)}function yR(n){return As(n)&&n.L_.length<10}function vR(n,e){n.L_.push(e);const t=$i(n);t.s_()&&t.f_&&t.g_(e.mutations)}function __(n){return As(n)&&!$i(n).i_()&&n.L_.length>0}function w_(n){$i(n).start()}async function _R(n){$i(n).w_()}async function wR(n){const e=$i(n);for(const t of n.L_)e.g_(t.mutations)}async function ER(n,e,t){const i=n.L_.shift(),o=Qf.from(i,e,t);await v_(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await Wu(n)}async function xR(n,e){e&&$i(n).f_&&await async function(i,o){if(function(d){return aC(d)&&d!==J.ABORTED}(o.code)){const l=i.L_.shift();$i(i).__(),await v_(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Wu(i)}}(n,e),__(n)&&w_(n)}async function Zy(n,e){const t=ke(n);t.asyncQueue.verifyOperationInProgress(),de("RemoteStore","RemoteStore received new credentials");const i=As(t);t.k_.add(3),await El(t),i&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await qu(t)}async function TR(n,e){const t=ke(n);e?(t.k_.delete(2),await qu(t)):e||(t.k_.add(2),await El(t),t.K_.set("Unknown"))}function Yo(n){return n.W_||(n.W_=function(t,i,o){const l=ke(t);return l.b_(),new lR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(n.datastore,n.asyncQueue,{Ro:fR.bind(null,n),mo:pR.bind(null,n),po:mR.bind(null,n),R_:gR.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),ip(n)?rp(n):n.K_.set("Unknown")):(await n.W_.stop(),y_(n))})),n.W_}function $i(n){return n.G_||(n.G_=function(t,i,o){const l=ke(t);return l.b_(),new cR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:_R.bind(null,n),po:xR.bind(null,n),p_:wR.bind(null,n),y_:ER.bind(null,n)}),n.q_.push(async e=>{e?(n.G_.__(),await Wu(n)):(await n.G_.stop(),n.L_.length>0&&(de("RemoteStore",`Stopping write stream with ${n.L_.length} pending writes`),n.L_=[]))})),n.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const d=Date.now()+i,h=new sp(e,t,d,o,l);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function op(n,e){if(Qr("AsyncQueue",`${e}: ${n}`),Qo(n))return new fe(J.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{static emptySet(e){return new Po(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||we.comparator(t.key,i.key):(t,i)=>we.comparator(t.key,i.key),this.keyedMap=Ka(),this.sortedSet=new ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Po)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Po;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(){this.z_=new ht(we.comparator)}track(e){const t=e.doc.key,i=this.z_.get(t);i?e.type!==0&&i.type===3?this.z_=this.z_.insert(t,e):e.type===3&&i.type!==1?this.z_=this.z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.z_=this.z_.remove(t):e.type===1&&i.type===2?this.z_=this.z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Ce():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class Fo{constructor(e,t,i,o,l,d,h,p,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const d=[];return t.forEach(h=>{d.push({type:0,doc:h})}),new Fo(e,t,Po.emptySet(t),d,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class SR{constructor(){this.queries=tv(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,i){const o=ke(t),l=o.queries;o.queries=tv(),l.forEach((d,h)=>{for(const p of h.J_)p.onError(i)})})(this,new fe(J.ABORTED,"Firestore shutting down"))}}function tv(){return new Rs(n=>B0(n),Mu)}async function E_(n,e){const t=ke(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Y_()&&e.Z_()&&(i=2):(l=new IR,i=e.Z_()?0:1);try{switch(i){case 0:l.H_=await t.onListen(o,!0);break;case 1:l.H_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const h=op(d,`Initialization of query '${To(e.query)}' failed`);return void e.onError(h)}t.queries.set(o,l),l.J_.push(e),e.ea(t.onlineState),l.H_&&e.ta(l.H_)&&ap(t)}async function x_(n,e){const t=ke(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const d=l.J_.indexOf(e);d>=0&&(l.J_.splice(d,1),l.J_.length===0?o=e.Z_()?0:1:!l.Y_()&&e.Z_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function CR(n,e){const t=ke(n);let i=!1;for(const o of e){const l=o.query,d=t.queries.get(l);if(d){for(const h of d.J_)h.ta(o)&&(i=!0);d.H_=o}}i&&ap(t)}function RR(n,e,t){const i=ke(n),o=i.queries.get(e);if(o)for(const l of o.J_)l.onError(t);i.queries.delete(e)}function ap(n){n.X_.forEach(e=>{e.next()})}var gf,nv;(nv=gf||(gf={})).na="default",nv.Cache="cache";class T_{constructor(e,t,i){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=i||{}}ta(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Fo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const i=t!=="Offline";return(!this.options.ua||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=Fo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==gf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e){this.key=e}}class S_{constructor(e){this.key=e}}class AR{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Ve(),this.mutatedKeys=Ve(),this.Va=$0(e),this.ma=new Po(this.Va)}get fa(){return this.da}ga(e,t){const i=t?t.pa:new ev,o=t?t.ma:this.ma;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,h=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,_)=>{const T=o.get(E),C=Fu(this.query,_)?_:null,N=!!T&&this.mutatedKeys.has(T.key),S=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let A=!1;T&&C?T.data.isEqual(C.data)?N!==S&&(i.track({type:3,doc:C}),A=!0):this.ya(T,C)||(i.track({type:2,doc:C}),A=!0,(p&&this.Va(C,p)>0||v&&this.Va(C,v)<0)&&(h=!0)):!T&&C?(i.track({type:0,doc:C}),A=!0):T&&!C&&(i.track({type:1,doc:T}),A=!0,(p||v)&&(h=!0)),A&&(C?(d=d.add(C),l=S?l.add(E):l.delete(E)):(d=d.delete(E),l=l.delete(E)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const E=this.query.limitType==="F"?d.last():d.first();d=d.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{ma:d,pa:i,ss:h,mutatedKeys:l}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const d=e.pa.j_();d.sort((E,_)=>function(C,N){const S=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce()}};return S(C)-S(N)}(E.type,_.type)||this.Va(E.doc,_.doc)),this.wa(i),o=o!=null&&o;const h=t&&!o?this.Sa():[],p=this.Ra.size===0&&this.current&&!o?1:0,v=p!==this.Aa;return this.Aa=p,d.length!==0||v?{snapshot:new Fo(this.query,e.ma,l,d,e.mutatedKeys,p===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),ba:h}:{ba:h}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new ev,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Ve(),this.ma.forEach(i=>{this.Da(i.key)&&(this.Ra=this.Ra.add(i.key))});const t=[];return e.forEach(i=>{this.Ra.has(i)||t.push(new S_(i))}),this.Ra.forEach(i=>{e.has(i)||t.push(new I_(i))}),t}va(e){this.da=e.ds,this.Ra=Ve();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Fo.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class kR{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class PR{constructor(e){this.key=e,this.Fa=!1}}class bR{constructor(e,t,i,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.Ma={},this.xa=new Rs(h=>B0(h),Mu),this.Oa=new Map,this.Na=new Set,this.La=new ht(we.comparator),this.Ba=new Map,this.ka=new Jf,this.qa={},this.Qa=new Map,this.Ka=Mo.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function NR(n,e,t=!0){const i=b_(n);let o;const l=i.xa.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Ca()):o=await C_(i,e,t,!0),o}async function DR(n,e){const t=b_(n);await C_(t,e,!0,!1)}async function C_(n,e,t,i){const o=await tR(n.localStore,wr(e)),l=o.targetId,d=n.sharedClientState.addLocalQueryTarget(l,t);let h;return i&&(h=await OR(n,e,l,d==="current",o.resumeToken)),n.isPrimaryClient&&t&&m_(n.remoteStore,o),h}async function OR(n,e,t,i,o){n.Ua=(_,T,C)=>async function(S,A,F,D){let H=A.view.ga(F);H.ss&&(H=await Yy(S.localStore,A.query,!1).then(({documents:O})=>A.view.ga(O,H)));const K=D&&D.targetChanges.get(A.targetId),ge=D&&D.targetMismatches.get(A.targetId)!=null,ce=A.view.applyChanges(H,S.isPrimaryClient,K,ge);return iv(S,A.targetId,ce.ba),ce.snapshot}(n,_,T,C);const l=await Yy(n.localStore,e,!0),d=new AR(e,l.ds),h=d.ga(l.documents),p=wl.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),v=d.applyChanges(h,n.isPrimaryClient,p);iv(n,t,v.ba);const E=new kR(e,t,d);return n.xa.set(e,E),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),v.snapshot}async function jR(n,e,t){const i=ke(n),o=i.xa.get(e),l=i.Oa.get(o.targetId);if(l.length>1)return i.Oa.set(o.targetId,l.filter(d=>!Mu(d,e))),void i.xa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await mf(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&tp(i.remoteStore,o.targetId),yf(i,o.targetId)}).catch(Ko)):(yf(i,o.targetId),await mf(i.localStore,o.targetId,!0))}async function LR(n,e){const t=ke(n),i=t.xa.get(e),o=t.Oa.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),tp(t.remoteStore,i.targetId))}async function VR(n,e,t){const i=qR(n);try{const o=await function(d,h){const p=ke(d),v=At.now(),E=h.reduce((C,N)=>C.add(N.key),Ve());let _,T;return p.persistence.runTransaction("Locally write mutations","readwrite",C=>{let N=Yr(),S=Ve();return p.hs.getEntries(C,E).next(A=>{N=A,N.forEach((F,D)=>{D.isValidDocument()||(S=S.add(F))})}).next(()=>p.localDocuments.getOverlayedDocuments(C,N)).next(A=>{_=A;const F=[];for(const D of h){const H=nC(D,_.get(D.key).overlayedDocument);H!=null&&F.push(new Wi(D.key,H,O0(H.value.mapValue),nr.exists(!0)))}return p.mutationQueue.addMutationBatch(C,v,F,h)}).next(A=>{T=A;const F=A.applyToLocalDocumentSet(_,S);return p.documentOverlayCache.saveOverlays(C,A.batchId,F)})}).then(()=>({batchId:T.batchId,changes:W0(_)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(d,h,p){let v=d.qa[d.currentUser.toKey()];v||(v=new ht(Ue)),v=v.insert(h,p),d.qa[d.currentUser.toKey()]=v}(i,o.batchId,t),await xl(i,o.changes),await Wu(i.remoteStore)}catch(o){const l=op(o,"Failed to persist write");t.reject(l)}}async function R_(n,e){const t=ke(n);try{const i=await JC(t.localStore,e);e.targetChanges.forEach((o,l)=>{const d=t.Ba.get(l);d&&(Xe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.Fa=!0:o.modifiedDocuments.size>0?Xe(d.Fa):o.removedDocuments.size>0&&(Xe(d.Fa),d.Fa=!1))}),await xl(t,i,e)}catch(i){await Ko(i)}}function rv(n,e,t){const i=ke(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.xa.forEach((l,d)=>{const h=d.view.ea(e);h.snapshot&&o.push(h.snapshot)}),function(d,h){const p=ke(d);p.onlineState=h;let v=!1;p.queries.forEach((E,_)=>{for(const T of _.J_)T.ea(h)&&(v=!0)}),v&&ap(p)}(i.eventManager,e),o.length&&i.Ma.R_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function MR(n,e,t){const i=ke(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Ba.get(e),l=o&&o.key;if(l){let d=new ht(we.comparator);d=d.insert(l,Xt.newNoDocument(l,Ae.min()));const h=Ve().add(l),p=new Bu(Ae.min(),new Map,new ht(Ue),d,h);await R_(i,p),i.La=i.La.remove(l),i.Ba.delete(e),lp(i)}else await mf(i.localStore,e,!1).then(()=>yf(i,e,t)).catch(Ko)}async function FR(n,e){const t=ke(n),i=e.batch.batchId;try{const o=await XC(t.localStore,e);k_(t,i,null),A_(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await xl(t,o)}catch(o){await Ko(o)}}async function UR(n,e,t){const i=ke(n);try{const o=await function(d,h){const p=ke(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let E;return p.mutationQueue.lookupMutationBatch(v,h).next(_=>(Xe(_!==null),E=_.keys(),p.mutationQueue.removeMutationBatch(v,_))).next(()=>p.mutationQueue.performConsistencyCheck(v)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(v,E,h)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E)).next(()=>p.localDocuments.getDocuments(v,E))})}(i.localStore,e);k_(i,e,t),A_(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await xl(i,o)}catch(o){await Ko(o)}}function A_(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function k_(n,e,t){const i=ke(n);let o=i.qa[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.qa[i.currentUser.toKey()]=o}}function yf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Oa.get(e))n.xa.delete(i),t&&n.Ma.Wa(i,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(i=>{n.ka.containsKey(i)||P_(n,i)})}function P_(n,e){n.Na.delete(e.path.canonicalString());const t=n.La.get(e);t!==null&&(tp(n.remoteStore,t),n.La=n.La.remove(e),n.Ba.delete(t),lp(n))}function iv(n,e,t){for(const i of t)i instanceof I_?(n.ka.addReference(i.key,e),zR(n,i)):i instanceof S_?(de("SyncEngine","Document no longer in limbo: "+i.key),n.ka.removeReference(i.key,e),n.ka.containsKey(i.key)||P_(n,i.key)):Ce()}function zR(n,e){const t=e.key,i=t.path.canonicalString();n.La.get(t)||n.Na.has(i)||(de("SyncEngine","New document in limbo: "+t),n.Na.add(i),lp(n))}function lp(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new we(ot.fromString(e)),i=n.Ka.next();n.Ba.set(i,new PR(t)),n.La=n.La.insert(t,i),m_(n.remoteStore,new Di(wr(Hf(t.path)),i,"TargetPurposeLimboResolution",ju.oe))}}async function xl(n,e,t){const i=ke(n),o=[],l=[],d=[];i.xa.isEmpty()||(i.xa.forEach((h,p)=>{d.push(i.Ua(p,e,t).then(v=>{var E;if((v||t)&&i.isPrimaryClient){const _=v?!v.fromCache:(E=t==null?void 0:t.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;i.sharedClientState.updateQueryState(p.targetId,_?"current":"not-current")}if(v){o.push(v);const _=ep.zi(p.targetId,v);l.push(_)}}))}),await Promise.all(d),i.Ma.R_(o),await async function(p,v){const E=ke(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>X.forEach(v,T=>X.forEach(T.Wi,C=>E.persistence.referenceDelegate.addReference(_,T.targetId,C)).next(()=>X.forEach(T.Gi,C=>E.persistence.referenceDelegate.removeReference(_,T.targetId,C)))))}catch(_){if(!Qo(_))throw _;de("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of v){const T=_.targetId;if(!_.fromCache){const C=E.us.get(T),N=C.snapshotVersion,S=C.withLastLimboFreeSnapshotVersion(N);E.us=E.us.insert(T,S)}}}(i.localStore,l))}async function BR(n,e){const t=ke(n);if(!t.currentUser.isEqual(e)){de("SyncEngine","User change. New user:",e.toKey());const i=await d_(t.localStore,e);t.currentUser=e,function(l,d){l.Qa.forEach(h=>{h.forEach(p=>{p.reject(new fe(J.CANCELLED,d))})}),l.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await xl(t,i.Ts)}}function $R(n,e){const t=ke(n),i=t.Ba.get(e);if(i&&i.Fa)return Ve().add(i.key);{let o=Ve();const l=t.Oa.get(e);if(!l)return o;for(const d of l){const h=t.xa.get(d);o=o.unionWith(h.view.fa)}return o}}function b_(n){const e=ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=R_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$R.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MR.bind(null,e),e.Ma.R_=CR.bind(null,e.eventManager),e.Ma.Wa=RR.bind(null,e.eventManager),e}function qR(n){const e=ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UR.bind(null,e),e}class xu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$u(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return YC(this.persistence,new KC,e.initialUser,this.serializer)}ja(e){return new u_(Zf.ei,this.serializer)}za(e){return new rR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xu.provider={build:()=>new xu};class WR extends xu{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){Xe(this.persistence.referenceDelegate instanceof wu);const i=this.persistence.referenceDelegate.garbageCollector;return new DC(i,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?mn.withCacheSize(this.cacheSizeBytes):mn.DEFAULT;return new u_(i=>wu.ei(i,t),this.serializer)}}class vf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>rv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=BR.bind(null,this.syncEngine),await TR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new SR}()}createDatastore(e){const t=$u(e.databaseInfo.databaseId),i=function(l){return new aR(l)}(e.databaseInfo);return function(l,d,h,p){return new uR(l,d,h,p)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,l,d,h){return new hR(i,o,l,d,h)}(this.localStore,this.datastore,e.asyncQueue,t=>rv(this.syncEngine,t,0),function(){return Jy.p()?new Jy:new iR}())}createSyncEngine(e,t){return function(o,l,d,h,p,v,E){const _=new bR(o,l,d,h,p,v);return E&&(_.$a=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=ke(o);de("RemoteStore","RemoteStore shutting down."),l.k_.add(5),await El(l),l.Q_.shutdown(),l.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}vf.provider={build:()=>new vf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Qr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Yt.UNAUTHENTICATED,this.clientId=b0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async d=>{de("FirestoreClient","Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(i,d=>(de("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=op(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function $h(n,e){n.asyncQueue.verifyOperationInProgress(),de("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async o=>{i.isEqual(o)||(await d_(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function sv(n,e){n.asyncQueue.verifyOperationInProgress();const t=await GR(n);de("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>Zy(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>Zy(e.remoteStore,o)),n._onlineComponents=e}async function GR(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de("FirestoreClient","Using user provided OfflineComponentProvider");try{await $h(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Oo("Error using user provided cache. Falling back to memory cache: "+t),await $h(n,new xu)}}else de("FirestoreClient","Using default OfflineComponentProvider"),await $h(n,new WR(void 0));return n._offlineComponents}async function D_(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de("FirestoreClient","Using user provided OnlineComponentProvider"),await sv(n,n._uninitializedComponentsProvider._online)):(de("FirestoreClient","Using default OnlineComponentProvider"),await sv(n,new vf))),n._onlineComponents}function KR(n){return D_(n).then(e=>e.syncEngine)}async function O_(n){const e=await D_(n),t=e.eventManager;return t.onListen=NR.bind(null,e.syncEngine),t.onUnlisten=jR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=DR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=LR.bind(null,e.syncEngine),t}function QR(n,e,t={}){const i=new Wr;return n.asyncQueue.enqueueAndForget(async()=>function(l,d,h,p,v){const E=new N_({next:T=>{E.eu(),d.enqueueAndForget(()=>x_(l,_));const C=T.docs.has(h);!C&&T.fromCache?v.reject(new fe(J.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&T.fromCache&&p&&p.source==="server"?v.reject(new fe(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(T)},error:T=>v.reject(T)}),_=new T_(Hf(h.path),E,{includeMetadataChanges:!0,ua:!0});return E_(l,_)}(await O_(n),n.asyncQueue,e,t,i)),i.promise}function YR(n,e,t={}){const i=new Wr;return n.asyncQueue.enqueueAndForget(async()=>function(l,d,h,p,v){const E=new N_({next:T=>{E.eu(),d.enqueueAndForget(()=>x_(l,_)),T.fromCache&&p.source==="server"?v.reject(new fe(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(T)},error:T=>v.reject(T)}),_=new T_(h,E,{includeMetadataChanges:!0,ua:!0});return E_(l,_)}(await O_(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(n,e,t){if(!t)throw new fe(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function XR(n,e,t,i){if(e===!0&&i===!0)throw new fe(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function av(n){if(!we.isDocumentKey(n))throw new fe(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function lv(n){if(we.isDocumentKey(n))throw new fe(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Hu(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ce()}function Xr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new fe(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Hu(n);throw new fe(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new fe(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=j_((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new fe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new fe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new fe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gu{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cv(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new cS;switch(i.type){case"firstParty":return new fS(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new fe(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=ov.get(t);i&&(de("ComponentProvider","Removing Datastore"),ov.delete(t),i.terminate())}(this),Promise.resolve()}}function JR(n,e,t,i={}){var o;const l=(n=Xr(n,Gu))._getSettings(),d=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==d&&Oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},l),{host:d,ssl:!1})),i.mockUserToken){let h,p;if(typeof i.mockUserToken=="string")h=i.mockUserToken,p=Yt.MOCK_USER;else{h=Uv(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new fe(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Yt(v)}n._authCredentials=new uS(new P0(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Xo(this.firestore,e,this._query)}}class yn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yn(this.firestore,e,this._key)}}class Vi extends Xo{constructor(e,t,i){super(e,t,Hf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yn(this.firestore,null,new we(e))}withConverter(e){return new Vi(this.firestore,e,this._path)}}function Ie(n,e,...t){if(n=Zt(n),L_("collection","path",e),n instanceof Gu){const i=ot.fromString(e,...t);return lv(i),new Vi(n,null,i)}{if(!(n instanceof yn||n instanceof Vi))throw new fe(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ot.fromString(e,...t));return lv(i),new Vi(n.firestore,null,i)}}function $e(n,e,...t){if(n=Zt(n),arguments.length===1&&(e=b0.newId()),L_("doc","path",e),n instanceof Gu){const i=ot.fromString(e,...t);return av(i),new yn(n,null,new we(i))}{if(!(n instanceof yn||n instanceof Vi))throw new fe(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ot.fromString(e,...t));return av(i),new yn(n.firestore,n instanceof Vi?n.converter:null,new we(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new f_(this,"async_queue_retry"),this.fu=()=>{const i=Bh();i&&de("AsyncQueue","Visibility state changed to "+i.visibilityState),this.r_.Jo()},this.gu=e;const t=Bh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=Bh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new Wr;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Qo(e))throw e;de("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(i=>{this.Au=i,this.Ru=!1;const o=function(d){let h=d.message||"";return d.stack&&(h=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),h}(i);throw Qr("INTERNAL UNHANDLED ERROR: ",o),i}).then(i=>(this.Ru=!1,i))));return this.gu=t,t}enqueueAfterDelay(e,t,i){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const o=sp.createAndSchedule(this,e,t,i,l=>this.Su(l));return this.du.push(o),o}pu(){this.Au&&Ce()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}class Jo extends Gu{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new uv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uv(e),this._firestoreClient=void 0,await e}}}function ZR(n,e){const t=typeof n=="object"?n:Pf(),i=typeof n=="string"?n:"(default)",o=Nu(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=Vv("firestore");l&&JR(o,...l)}return o}function cp(n){if(n._terminated)throw new fe(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||eA(n),n._firestoreClient}function eA(n){var e,t,i;const o=n._freezeSettings(),l=function(h,p,v,E){return new AS(h,p,v,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,j_(E.experimentalLongPollingOptions),E.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new HR(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Uo($t.fromBase64String(e))}catch(t){throw new fe(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Uo($t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=/^__.*__$/;class nA{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Wi(e,this.data,this.fieldMask,t,this.fieldTransforms):new _l(e,this.data,t,this.fieldTransforms)}}class V_{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Wi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function M_(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce()}}class fp{constructor(e,t,i,o,l,d){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Fu(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new fp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:i,Nu:!1});return o.Lu(e),o}Bu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:i,Nu:!1});return o.Fu(),o}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Tu(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(M_(this.Mu)&&tA.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class rA{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||$u(e)}$u(e,t,i,o=!1){return new fp({Mu:e,methodName:t,Ku:i,path:Bt.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pp(n){const e=n._freezeSettings(),t=$u(n._databaseId);return new rA(n._databaseId,!!e.ignoreUndefinedProperties,t)}function iA(n,e,t,i,o,l={}){const d=n.$u(l.merge||l.mergeFields?2:0,e,t,o);mp("Data must be an object, but it was:",d,i);const h=F_(i,d);let p,v;if(l.merge)p=new Cn(d.fieldMask),v=d.fieldTransforms;else if(l.mergeFields){const E=[];for(const _ of l.mergeFields){const T=_f(e,_,t);if(!d.contains(T))throw new fe(J.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);z_(E,T)||E.push(T)}p=new Cn(E),v=d.fieldTransforms.filter(_=>p.covers(_.field))}else p=null,v=d.fieldTransforms;return new nA(new gn(h),p,v)}class Qu extends up{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qu}}function sA(n,e,t,i){const o=n.$u(1,e,t);mp("Data must be an object, but it was:",o,i);const l=[],d=gn.empty();qi(i,(p,v)=>{const E=gp(e,p,t);v=Zt(v);const _=o.Bu(E);if(v instanceof Qu)l.push(E);else{const T=Tl(v,_);T!=null&&(l.push(E),d.set(E,T))}});const h=new Cn(l);return new V_(d,h,o.fieldTransforms)}function oA(n,e,t,i,o,l){const d=n.$u(1,e,t),h=[_f(e,i,t)],p=[o];if(l.length%2!=0)throw new fe(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)h.push(_f(e,l[T])),p.push(l[T+1]);const v=[],E=gn.empty();for(let T=h.length-1;T>=0;--T)if(!z_(v,h[T])){const C=h[T];let N=p[T];N=Zt(N);const S=d.Bu(C);if(N instanceof Qu)v.push(C);else{const A=Tl(N,S);A!=null&&(v.push(C),E.set(C,A))}}const _=new Cn(v);return new V_(E,_,d.fieldTransforms)}function aA(n,e,t,i=!1){return Tl(t,n.$u(i?4:3,e))}function Tl(n,e){if(U_(n=Zt(n)))return mp("Unsupported field value:",e,n),F_(n,e);if(n instanceof up)return function(i,o){if(!M_(o.Mu))throw o.qu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(i,o){const l=[];let d=0;for(const h of i){let p=Tl(h,o.ku(d));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),d++}return{arrayValue:{values:l}}}(n,e)}return function(i,o){if((i=Zt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return YS(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=At.fromDate(i);return{timestampValue:_u(o.serializer,l)}}if(i instanceof At){const l=new At(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:_u(o.serializer,l)}}if(i instanceof dp)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Uo)return{bytesValue:r_(o.serializer,i._byteString)};if(i instanceof yn){const l=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(l))throw o.qu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Xf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof hp)return function(d,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:d.toArray().map(p=>{if(typeof p!="number")throw h.qu("VectorValues must only contain numeric values.");return Gf(h.serializer,p)})}}}}}}(i,o);throw o.qu(`Unsupported field value: ${Hu(i)}`)}(n,e)}function F_(n,e){const t={};return N0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qi(n,(i,o)=>{const l=Tl(o,e.Ou(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function U_(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof At||n instanceof dp||n instanceof Uo||n instanceof yn||n instanceof up||n instanceof hp)}function mp(n,e,t){if(!U_(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const i=Hu(t);throw i==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+i)}}function _f(n,e,t){if((e=Zt(e))instanceof Ku)return e._internalPath;if(typeof e=="string")return gp(n,e);throw Tu("Field path arguments must be of type string or ",n,!1,void 0,t)}const lA=new RegExp("[~\\*/\\[\\]]");function gp(n,e,t){if(e.search(lA)>=0)throw Tu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ku(...e.split("."))._internalPath}catch{throw Tu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Tu(n,e,t,i,o){const l=i&&!i.isEmpty(),d=o!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(l||d)&&(p+=" (found",l&&(p+=` in field ${i}`),d&&(p+=` in document ${o}`),p+=")"),new fe(J.INVALID_ARGUMENT,h+n+p)}function z_(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(yp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class cA extends B_{data(){return super.data()}}function yp(n,e){return typeof e=="string"?gp(n,e):e instanceof Ku?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new fe(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vp{}class dA extends vp{}function tt(n,e,...t){let i=[];e instanceof vp&&i.push(e),i=i.concat(t),function(l){const d=l.filter(p=>p instanceof _p).length,h=l.filter(p=>p instanceof Yu).length;if(d>1||d>0&&h>0)throw new fe(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)n=o._apply(n);return n}class Yu extends dA{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Yu(e,t,i)}_apply(e){const t=this._parse(e);return $_(e._query,t),new Xo(e.firestore,e.converter,cf(e._query,t))}_parse(e){const t=pp(e.firestore);return function(l,d,h,p,v,E,_){let T;if(v.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new fe(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){hv(_,E);const C=[];for(const N of _)C.push(dv(p,l,N));T={arrayValue:{values:C}}}else T=dv(p,l,_)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||hv(_,E),T=aA(h,d,_,E==="in"||E==="not-in");return xt.create(v,E,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ze(n,e,t){const i=e,o=yp("where",n);return Yu._create(o,i,t)}class _p extends vp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new _p(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:rr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,l){let d=o;const h=l.getFlattenedFilters();for(const p of h)$_(d,p),d=cf(d,p)}(e._query,t),new Xo(e.firestore,e.converter,cf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function dv(n,e,t){if(typeof(t=Zt(t))=="string"){if(t==="")throw new fe(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!z0(e)&&t.indexOf("/")!==-1)throw new fe(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(ot.fromString(t));if(!we.isDocumentKey(i))throw new fe(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ny(n,new we(i))}if(t instanceof yn)return Ny(n,t._key);throw new fe(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hu(t)}.`)}function hv(n,e){if(!Array.isArray(n)||n.length===0)throw new fe(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $_(n,e){const t=function(o,l){for(const d of o)for(const h of d.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new fe(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class hA{convertValue(e,t="none"){switch(Bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return qi(e,(o,l)=>{i[o]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(d=>yt(d.doubleValue));return new hp(l)}convertGeoPoint(e){return new dp(yt(e.latitude),yt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Vu(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(al(e));default:return null}}convertTimestamp(e){const t=Ui(e);return new At(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ot.fromString(e);Xe(c_(i));const o=new ll(i.get(1),i.get(3)),l=new we(i.popFirst(5));return o.isEqual(t)||Qr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(n,e,t){let i;return i=n?n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class q_ extends B_{constructor(e,t,i,o,l,d){super(e,t,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new eu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(yp("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class eu extends q_{data(e={}){return super.data(e)}}class pA{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ya(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new eu(this._firestore,this._userDataWriter,i.key,i,new Ya(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(h=>{const p=new eu(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Ya(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(h=>l||h.type!==3).map(h=>{const p=new eu(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Ya(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,E=-1;return h.type!==0&&(v=d.indexOf(h.doc.key),d=d.delete(h.doc.key)),h.type!==1&&(d=d.add(h.doc),E=d.indexOf(h.doc.key)),{type:mA(h.type),doc:p,oldIndex:v,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function mA(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(n){n=Xr(n,yn);const e=Xr(n.firestore,Jo);return QR(cp(e),n._key).then(t=>gA(e,n,t))}class W_ extends hA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yn(this.firestore,null,t)}}function Ke(n){n=Xr(n,Xo);const e=Xr(n.firestore,Jo),t=cp(e),i=new W_(e);return uA(n._query),YR(t,n._query).then(o=>new pA(e,i,n,o))}function ks(n,e,t,...i){n=Xr(n,yn);const o=Xr(n.firestore,Jo),l=pp(o);let d;return d=typeof(e=Zt(e))=="string"||e instanceof Ku?oA(l,"updateDoc",n._key,e,t,i):sA(l,"updateDoc",n._key,e),wp(o,[d.toMutation(n._key,nr.exists(!0))])}function Jr(n){return wp(Xr(n.firestore,Jo),[new Kf(n._key,nr.none())])}function sr(n,e){const t=Xr(n.firestore,Jo),i=$e(n),o=fA(n.converter,e);return wp(t,[iA(pp(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,nr.exists(!1))]).then(()=>i)}function wp(n,e){return function(i,o){const l=new Wr;return i.asyncQueue.enqueueAndForget(async()=>VR(await KR(i),o,l)),l.promise}(cp(n),e)}function gA(n,e,t){const i=t.docs.get(e._key),o=new W_(n);return new q_(n,o,e._key,i,new Ya(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Go=o})(Cs),Ts(new Mi("firestore",(i,{instanceIdentifier:o,options:l})=>{const d=i.getProvider("app").getImmediate(),h=new Jo(new dS(i.getProvider("auth-internal")),new mS(i.getProvider("app-check-internal")),function(v,E){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new fe(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ll(v.options.projectId,E)}(d,o),d);return l=Object.assign({useFetchStreams:t},l),h._setSettings(l),h},"PUBLIC").setMultipleInstances(!0)),yr(Cy,"4.7.5",e),yr(Cy,"4.7.5","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="firebasestorage.googleapis.com",yA="storageBucket",vA=2*60*1e3,_A=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends Ir{constructor(e,t,i=0){super(qh(e),`Firebase Storage: ${t} (${qh(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Sr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return qh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Tr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Tr||(Tr={}));function qh(n){return"storage/"+n}function wA(){const n="An unknown error occurred, please check the error payload for server response.";return new Sr(Tr.UNKNOWN,n)}function EA(){return new Sr(Tr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function xA(){return new Sr(Tr.CANCELED,"User canceled the upload/download.")}function TA(n){return new Sr(Tr.INVALID_URL,"Invalid URL '"+n+"'.")}function IA(n){return new Sr(Tr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function fv(n){return new Sr(Tr.INVALID_ARGUMENT,n)}function G_(){return new Sr(Tr.APP_DELETED,"The Firebase app was deleted.")}function SA(n){return new Sr(Tr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=tr.makeFromUrl(e,t)}catch{return new tr(e,"")}if(i.path==="")return i;throw IA(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function l(K){K.path.charAt(K.path.length-1)==="/"&&(K.path_=K.path_.slice(0,-1))}const d="(/(.*))?$",h=new RegExp("^gs://"+o+d,"i"),p={bucket:1,path:3};function v(K){K.path_=decodeURIComponent(K.path)}const E="v[A-Za-z0-9_]+",_=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",C=new RegExp(`^https?://${_}/${E}/b/${o}/o${T}`,"i"),N={bucket:1,path:3},S=t===H_?"(?:storage.googleapis.com|storage.cloud.google.com)":t,A="([^?#]*)",F=new RegExp(`^https?://${S}/${o}/${A}`,"i"),H=[{regex:h,indices:p,postModify:l},{regex:C,indices:N,postModify:v},{regex:F,indices:{bucket:1,path:2},postModify:v}];for(let K=0;K<H.length;K++){const ge=H[K],ce=ge.regex.exec(e);if(ce){const O=ce[ge.indices.bucket];let R=ce[ge.indices.path];R||(R=""),i=new tr(O,R),ge.postModify(i);break}}if(i==null)throw TA(e);return i}}class CA{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(n,e,t){let i=1,o=null,l=null,d=!1,h=0;function p(){return h===2}let v=!1;function E(...A){v||(v=!0,e.apply(null,A))}function _(A){o=setTimeout(()=>{o=null,n(C,p())},A)}function T(){l&&clearTimeout(l)}function C(A,...F){if(v){T();return}if(A){T(),E.call(null,A,...F);return}if(p()||d){T(),E.call(null,A,...F);return}i<64&&(i*=2);let H;h===1?(h=2,H=0):H=(i+Math.random())*1e3,_(H)}let N=!1;function S(A){N||(N=!0,T(),!v&&(o!==null?(A||(h=2),clearTimeout(o),_(0)):A||(h=1)))}return _(0),l=setTimeout(()=>{d=!0,S(!0)},t),S}function AA(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(n){return n!==void 0}function pv(n,e,t,i){if(i<e)throw fv(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw fv(`Invalid value for '${n}'. Expected ${t} or less.`)}function PA(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const o=e(i)+"="+e(n[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var Iu;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Iu||(Iu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||o||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,t,i,o,l,d,h,p,v,E,_,T=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=d,this.callback_=h,this.errorCallback_=p,this.timeout_=v,this.progressCallback_=E,this.connectionFactory_=_,this.retry=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,N)=>{this.resolve_=C,this.reject_=N,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new qc(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const d=h=>{const p=h.loaded,v=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,v)};this.progressCallback_!==null&&l.addUploadProgressListener(d),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(d),this.pendingConnection_=null;const h=l.getErrorCode()===Iu.NO_ERROR,p=l.getStatus();if(!h||bA(p,this.additionalRetryCodes_)&&this.retry){const E=l.getErrorCode()===Iu.ABORT;i(!1,new qc(!1,null,E));return}const v=this.successCodes_.indexOf(p)!==-1;i(!0,new qc(v,l))})},t=(i,o)=>{const l=this.resolve_,d=this.reject_,h=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());kA(p)?l(p):l()}catch(p){d(p)}else if(h!==null){const p=wA();p.serverResponse=h.getErrorText(),this.errorCallback_?d(this.errorCallback_(h,p)):d(p)}else if(o.canceled){const p=this.appDelete_?G_():xA();d(p)}else{const p=EA();d(p)}};this.canceled_?t(!1,new qc(!1,null,!0)):this.backoffId_=RA(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&AA(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qc{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function DA(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function OA(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function jA(n,e){e&&(n["X-Firebase-GMPID"]=e)}function LA(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function VA(n,e,t,i,o,l,d=!0){const h=PA(n.urlParams),p=n.url+h,v=Object.assign({},n.headers);return jA(v,e),DA(v,t),OA(v,l),LA(v,i),new NA(p,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function FA(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,t){this._service=e,t instanceof tr?this._location=t:this._location=tr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Su(e,t)}get root(){const e=new tr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return FA(this._location.path)}get storage(){return this._service}get parent(){const e=MA(this._location.path);if(e===null)return null;const t=new tr(this._location.bucket,e);return new Su(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw SA(e)}}function mv(n,e){const t=e==null?void 0:e[yA];return t==null?null:tr.makeFromBucketSpec(t,n)}function UA(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=i;o&&(n._overrideAuthToken=typeof o=="string"?o:Uv(o,n.app.options.projectId))}class zA{constructor(e,t,i,o,l){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=l,this._bucket=null,this._host=H_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=vA,this._maxUploadRetryTime=_A,this._requests=new Set,o!=null?this._bucket=tr.makeFromBucketSpec(o,this._host):this._bucket=mv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=tr.makeFromBucketSpec(this._url,e):this._bucket=mv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){pv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){pv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Su(this,e)}_makeRequest(e,t,i,o,l=!0){if(this._deleted)return new CA(G_());{const d=VA(e,this._appId,i,o,t,this._firebaseVersion,l);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const gv="@firebase/storage",yv="0.13.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="storage";function BA(n=Pf(),e){n=Zt(n);const i=Nu(n,K_).getImmediate({identifier:e}),o=Vv("storage");return o&&$A(i,...o),i}function $A(n,e,t,i={}){UA(n,e,t,i)}function qA(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new zA(t,i,o,e,Cs)}function WA(){Ts(new Mi(K_,qA,"PUBLIC").setMultipleInstances(!0)),yr(gv,yv,""),yr(gv,yv,"esm2017")}WA();const HA={apiKey:"AIzaSyANKJphDLlTyzYGmQcamq-BqRJcRuvQ3YQ",authDomain:"teacher-fb2b7.firebaseapp.com",projectId:"teacher-fb2b7",storageBucket:"teacher-fb2b7.appspot.com",messagingSenderId:"233185416924",appId:"1:233185416924:web:fe49116fc148bce1544619"},Ep=$v(HA);aS(Ep);const oe=ZR(Ep);BA(Ep);const pt=Nx(n=>({user:null,isAuthenticated:!1,login:async(e,t,i)=>{try{if(i==="admin"){n({user:{id:"admin1",name:"Admin",email:e,role:"admin",documentId:null},isAuthenticated:!0});return}if(i==="teacher"){const o=Ie(oe,"teachers"),l=tt(o,Ze("email","==",e),Ze("password","==",t)),d=await Ke(l);if(d.empty)throw new Error("Invalid teacher credentials");{const h=d.docs[0],p=h.id,v=h.data(),E={id:p,name:v.name||e.split("@")[0],email:e,role:"teacher",documentId:p};n({user:E,isAuthenticated:!0})}return}throw new Error(`Unsupported role: ${i}`)}catch(o){throw console.error("Login failed:",o.message),new Error("Login failed. Please check your credentials and try again.")}},logout:()=>n({user:null,isAuthenticated:!1})}));/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var GA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Lt=(n,e)=>{const t=U.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:h="",children:p,...v},E)=>U.createElement("svg",{ref:E,...GA,width:o,height:o,stroke:i,strokeWidth:d?Number(l)*24/Number(o):l,className:["lucide",`lucide-${KA(n)}`,h].join(" "),...v},[...e.map(([_,T])=>U.createElement(_,T)),...Array.isArray(p)?p:[p]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=Lt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=Lt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=Lt("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=Lt("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=Lt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=Lt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=Lt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=Lt("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=Lt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=Lt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=Lt("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=Lt("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=Lt("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wf=Lt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=Lt("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=Lt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=Lt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=Lt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),J_="/assets/vishnu_logo-DKih-dZI.png";function ek(){const[n,e]=U.useState("teacher"),[t,i]=U.useState(""),[o,l]=U.useState(""),[d,h]=U.useState(!1),[p,v]=U.useState(""),E=Wo(),{login:_,logout:T,isAuthenticated:C}=pt(),N="vit@gmail.com",S="vit";U.useEffect(()=>{T()},[T]),U.useEffect(()=>{C&&E("/dashboard")},[C,E]);const A=async F=>{if(F.preventDefault(),v(""),!t||!o){v("Please fill in all fields");return}if(n==="admin"){if(t===N&&o===S)try{await _(t,o,"admin"),E("/dashboard")}catch{v("Login failed. Please try again.")}else v("Invalid admin credentials");return}if(n==="teacher")try{const D=Ie(oe,"teachers"),H=tt(D,Ze("email","==",t),Ze("password","==",o));(await Ke(H)).empty?v("Invalid teacher credentials"):(await _(t,o,"teacher"),E("/dashboard"))}catch{v("Login failed. Please try again.")}};return m.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center px-4",style:{background:"linear-gradient(to bottom,rgb(240, 248, 247),rgb(90, 179, 221))"},children:[m.jsxs("div",{className:"flex space-x-4 mb-2 md:mb-8",children:[m.jsx("button",{onClick:()=>{e("teacher"),v(""),i(""),l("")},className:`px-6 py-2 rounded-md text-lg font-medium transition-colors ${n==="teacher"?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"Teacher Login"}),m.jsx("button",{onClick:()=>{e("admin"),v(""),i(""),l("")},className:`px-6 py-2 rounded-md text-lg font-medium transition-colors ${n==="admin"?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"Admin Login"})]}),m.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("img",{src:J_,alt:"Login Icon",className:"w-20 h-20"})}),m.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-2",children:n==="teacher"?"Teacher Login":"Admin Login"}),m.jsx("p",{className:"text-center text-gray-600 mb-8",children:"Enter your credentials to access your account"}),p&&m.jsxs("div",{className:"mb-6 p-3 bg-red-50 border border-red-200 rounded-md flex items-center text-red-600",children:[m.jsx(QA,{className:"w-5 h-5 mr-2"}),m.jsx("span",{className:"text-sm",children:p})]}),m.jsxs("form",{onSubmit:A,className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),m.jsx("input",{type:"email",value:t,onChange:F=>i(F.target.value),placeholder:"Enter your email",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-colors",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:d?"text":"password",value:o,onChange:F=>l(F.target.value),placeholder:"Enter your password",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-colors",required:!0}),m.jsx("button",{type:"button",onClick:()=>h(!d),className:"absolute inset-y-0 right-3 flex items-center text-gray-600 hover:text-gray-800 focus:outline-none",children:d?m.jsx(Q_,{className:"w-5 h-5"}):m.jsx(xp,{className:"w-5 h-5"})})]})]}),m.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Login"})]})]})]})}function tk(){const{user:n,logout:e}=pt(),[t,i]=U.useState(!1),o=[{to:"/dashboard",icon:zo,text:"Dashboard"},{to:"/Teachingandlearning",icon:Bo,text:"Teaching&learning"},{to:"/ResearchAndConsultancy",icon:vv,text:"Research&Consultancy"},{to:"/ProfessionalDevelopment",icon:_v,text:"ProfessionalDevelopment"},{to:"/StudentDevelopment",icon:wf,text:"StudentDevelopment"},{to:"/InstitutionalDevelopment",icon:wv,text:"InstitutionalDevelopment"}],l=[{to:"/dashboard",icon:zo,text:"Dashboard"},{to:"/teachers",icon:bo,text:"Manage Teachers"},{to:"/TeachingLearning",icon:Bo,text:"Teaching&learning"},{to:"/ResearchConsultancy",icon:vv,text:"Research&Consultancy"},{to:"/AdminProfessionalDevelopment",icon:_v,text:"ProfessionalDevelopment"},{to:"/AdminStudentDevelopment",icon:wf,text:"StudentDevelopment"},{to:"/AdminInstitutionalDevelopment",icon:wv,text:"InstitutionalDevelopment"}],d=(n==null?void 0:n.role)==="admin"?l:o;return m.jsxs("div",{children:[m.jsxs("button",{onClick:()=>i(!t),className:`fixed top-4 z-50 p-3 bg-transparent rounded-full shadow-lg transform transition-transform duration-300 md:hidden ${t?"translate-x-64":"translate-x-4"}`,"aria-label":"Toggle Sidebar",children:[m.jsx("div",{className:`w-6 h-1 rounded-full transform transition-all duration-300 ${t?"bg-white translate-y-2 rotate-45":"bg-black"}`}),m.jsx("div",{className:`w-6 h-1 rounded-full mt-1 transform transition-all duration-300 ${t?"opacity-0":"bg-black"}`}),m.jsx("div",{className:`w-6 h-1 rounded-full mt-1 transform transition-all duration-300 ${t?"bg-white -translate-y-2 -rotate-45":"bg-black"}`})]}),m.jsxs("div",{className:`fixed top-0 left-0 h-full w-64 bg-gradient-to-br from-gray-800 to-gray-700 text-white shadow-lg z-40 transform transition-transform duration-300 ${t?"translate-x-0":"-translate-x-full"} md:translate-x-0 md:relative md:z-auto`,children:[m.jsxs("div",{className:"p-6 border-b border-gray-600",children:[m.jsx("h2",{className:"text-2xl font-bold text-white",children:"Appraisal portal"}),m.jsx("p",{className:"text-sm text-gray-300 mt-1",children:n==null?void 0:n.name})]}),m.jsxs("nav",{className:"mt-6",children:[d.map(h=>m.jsxs(gx,{to:h.to,className:({isActive:p})=>`flex items-center px-6 py-3 rounded-lg transition-all duration-300 ${p?"bg-blue-500 text-white shadow-lg":"text-gray-300 hover:bg-gray-600 hover:text-white"}`,onClick:()=>i(!1),children:[m.jsx(h.icon,{className:"w-5 h-5 mr-3"}),h.text]},h.to)),m.jsxs("button",{onClick:e,className:"w-full flex items-center px-6 py-3 mt-4 text-gray-300 hover:bg-white-500 hover:text-white rounded-lg transition-all duration-300",children:[m.jsx(YA,{className:"w-5 h-5 mr-3"}),"Logout"]})]})]}),t&&m.jsx("div",{onClick:()=>i(!1),className:"fixed inset-0 bg-black bg-opacity-50 md:hidden z-30"})]})}function nk(){const{isAuthenticated:n,user:e}=pt();return!n||!e?m.jsx(iu,{to:"/login",replace:!0}):m.jsxs("div",{className:"flex h-screen bg-gray-100",children:[m.jsx(tk,{}),m.jsx("main",{className:"flex-1 overflow-y-auto p-8",children:m.jsx(nx,{})})]})}const rk=()=>{const{user:n}=pt(),[e,t]=U.useState(null),[i,o]=U.useState(0),[l,d]=U.useState(0),[h,p]=U.useState(0),[v,E]=U.useState(0),[_,T]=U.useState(0),[C,N]=U.useState([]),[S,A]=U.useState(null),[F,D]=U.useState(!1),[H,K]=U.useState(""),[ge,ce]=U.useState(""),[O,R]=U.useState(""),[b,j]=U.useState(""),[M,z]=U.useState(""),[k,ie]=U.useState(""),[Ee,Ne]=U.useState(!1),Oe=Wo(),ne=async()=>{try{if(!(n!=null&&n.id)){console.error("User ID is not available");return}const ue=$e(oe,"teachers",n.id),Qe=await jt(ue);Qe.exists()?t(Qe.id):console.error("Teacher document does not exist.")}catch(ue){console.error("Error fetching teacher ID:",ue)}};U.useEffect(()=>{n!=null&&n.id&&ne()},[n==null?void 0:n.id]),U.useEffect(()=>{e&&(pe(),ae(),B(),Y(),ve(),Pe(),be())},[e]);const pe=async()=>{try{const ue=Ie(oe,"TeachingLearning"),Qe=tt(ue,Ze("teacherId","==",e)),Ye=await Ke(Qe);o(Ye.size)}catch(ue){console.error("Error fetching syllabus progress:",ue)}},ae=async()=>{try{const ue=Ie(oe,"ResearchConsultancy"),Qe=tt(ue,Ze("teacherId","==",e)),Ye=await Ke(Qe);d(Ye.size)}catch(ue){console.error("Error fetching classes count:",ue)}},B=async()=>{try{const ue=Ie(oe,"ProfessionalDevelopment"),Qe=tt(ue,Ze("teacherId","==",e)),Ye=await Ke(Qe);p(Ye.size)}catch(ue){console.error("Error fetching documents count:",ue)}},Y=async()=>{try{const ue=Ie(oe,"InstitutionalDevelopment"),Qe=tt(ue,Ze("teacherId","==",e)),Ye=await Ke(Qe);E(Ye.size)}catch(ue){console.error("Error fetching institutional documents count:",ue)}},ve=async()=>{try{const ue=Ie(oe,"StudentDevelopment"),Qe=tt(ue,Ze("teacherId","==",e)),Ye=await Ke(Qe);T(Ye.size)}catch(ue){console.error("Error fetching student documents count:",ue)}},Pe=async()=>{try{const ue=Ie(oe,"activityLogs"),Qe=tt(ue,Ze("userId","==",e)),Ye=await Ke(Qe),Vn=[],ti=new Date;for(const Mn of Ye.docs){const Fn=Mn.data(),Ps=new Date(Fn.timestamp.seconds*1e3),en=Math.floor((ti.getTime()-Ps.getTime())/1e3);if(en>=86400)await Jr(Mn.ref);else{let on="";en<60?on=`${en} seconds ago`:en<3600?on=`${Math.floor(en/60)} minutes ago`:en<86400&&(on=`${Math.floor(en/3600)} hours ago`),Vn.push({id:Mn.id,entity:Fn.entity,description:`${Fn.description}`,timestamp:on,diffInSeconds:en})}}Vn.sort((Mn,Fn)=>Mn.diffInSeconds-Fn.diffInSeconds),N(Vn)}catch(ue){console.error("Error fetching recent activities:",ue)}},be=async()=>{try{const ue=$e(oe,"teachers",e||""),Qe=await jt(ue);if(Qe.exists()){const Ye=Qe.data();A({name:Ye.name,email:Ye.email,profileImage:Ye.profileImage||""}),K(Ye.name),ce(Ye.email),R(Ye.profileImage||""),j(Ye.department||""),z(Ye.joinDate||"")}}catch(ue){console.error("Error fetching teacher details:",ue)}},je=async()=>{if(!e)return;const ue=$e(oe,"teachers",e);try{const Qe={name:H,email:ge,profileImage:O,department:b,joinDate:M};k&&(Qe.password=k),await ks(ue,Qe),k&&(alert("Password changed successfully"),ie("")),A({name:H,email:ge,profileImage:O}),D(!1)}catch(Qe){console.error("Error updating teacher details:",Qe)}},qe=()=>{Ne(!Ee)},Me=()=>D(!F),He=ue=>{Oe(ue)},vt=ue=>{N(Qe=>Qe.filter(Ye=>Ye.id!==ue))};return(n==null?void 0:n.role)==="admin"?null:m.jsxs("div",{className:"space-y-6 relative",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("h1",{className:"text-4xl font-extrabold text-gray-900",children:["👋 Welcome, ",m.jsx("span",{className:"text-blue-500",children:n==null?void 0:n.name})]}),m.jsx("div",{className:"relative",children:S!=null&&S.profileImage?m.jsx("div",{className:"cursor-pointer",onClick:Me,children:m.jsx("img",{src:S.profileImage,alt:"Profile",className:"w-16 h-16 rounded-full border-4 border-blue-500 shadow-lg transition-transform transform hover:scale-105"})}):m.jsx("div",{className:"cursor-pointer bg-blue-100 p-1 rounded-full border-4 border-blue-500 shadow-lg",onClick:Me,children:m.jsx(Y_,{className:"w-14 h-14 text-blue-500 transition-transform transform hover:scale-105"})})})]}),F&&S&&m.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-500 bg-opacity-50 z-50",children:m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-11/12 sm:w-96 md:w-1/3",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Edit Profile"}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),m.jsx("input",{type:"text",value:H,readOnly:!0,onChange:ue=>K(ue.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),m.jsx("input",{type:"email",value:ge,readOnly:!0,onChange:ue=>ce(ue.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Department"}),m.jsx("input",{type:"text",value:b,readOnly:!0,onChange:ue=>j(ue.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Join Date"}),m.jsx("input",{type:"text",value:M,readOnly:!0,onChange:ue=>z(ue.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:Ee?"text":"password",value:k,onChange:ue=>ie(ue.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),m.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer",onClick:qe,children:Ee?m.jsx(Q_,{className:"w-5 h-5 text-gray-500"}):m.jsx(xp,{className:"w-5 h-5 text-gray-500"})})]})]}),m.jsxs("div",{className:"flex justify-end space-x-4",children:[m.jsx("button",{className:"bg-blue-500 text-white px-4 py-2 rounded-md",onClick:je,children:"Save"}),m.jsx("button",{className:"bg-gray-300 text-gray-800 px-4 py-2 rounded-md",onClick:Me,children:"Cancel"})]})]})}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsx(Ha,{title:"TeachingAndLearning",value:i,icon:m.jsx(zo,{className:"w-10 h-10 text-white"}),bgFrom:"from-blue-500",bgTo:"to-red-200",onClick:()=>He("/Teachingandlearning")}),m.jsx(Ha,{title:"ResearchAndDevelopment",value:l,icon:m.jsx(Cu,{className:"w-10 h-10 text-white"}),bgFrom:"from-green-500",bgTo:"to-white-400",onClick:()=>He("/ResearchAndConsultancy")}),m.jsx(Ha,{title:"ProfessionalDevelopment",value:h,icon:m.jsx(Bo,{className:"w-10 h-10 text-white"}),bgFrom:"from-pink-500",bgTo:"to-blue-400",onClick:()=>He("/ProfessionalDevelopment")}),m.jsx(Ha,{title:"InstitutionalDevelopment",value:v,icon:m.jsx(bo,{className:"w-10 h-10 text-white"}),bgFrom:"from-red-500",bgTo:"to-yellow-400",onClick:()=>He("/InstitutionalDevelopment")}),m.jsx(Ha,{title:"StudentDevelopment",value:_,icon:m.jsx(Ru,{className:"w-10 h-10 text-white"}),bgFrom:"from-purple-500",bgTo:"to-white-100",onClick:()=>He("/StudentDevelopment")})]}),m.jsxs("div",{className:"bg-gradient-to-br from-gray-100 to-gray-200 p-6 rounded-lg shadow-lg transform hover:shadow-xl transition-shadow duration-300",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"📋 Recent Activities"}),C.length===0?m.jsx("p",{className:"text-gray-500",children:"No recent activities"}):m.jsx("div",{className:"space-y-4",children:C.slice(0,5).map(ue=>m.jsxs("div",{className:"flex items-center bg-white p-4 rounded-lg shadow hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:[ue.entity==="TeachingLearning"&&m.jsx(zo,{className:"w-6 h-6 text-blue-500 mr-4"}),ue.entity==="ResearchConsultancy"&&m.jsx(Cu,{className:"w-6 h-6 text-green-500 mr-4"}),ue.entity==="ProfessionalDevelopment"&&m.jsx(Bo,{className:"w-6 h-6 text-purple-500 mr-4"}),ue.entity==="InstitutionalDevelopment"&&m.jsx(bo,{className:"w-6 h-6 text-red-500 mr-4"}),ue.entity==="StudentDevelopment"&&m.jsx(Ru,{className:"w-6 h-6 text-yellow-500 mr-4"}),m.jsxs("span",{className:"text-gray-800",children:[m.jsx("b",{children:ue.entity}),": ",ue.description]}),m.jsx("span",{className:"ml-auto text-sm text-gray-500",children:ue.timestamp}),m.jsx(X_,{className:"w-5 h-5 text-gray-500 ml-4 cursor-pointer",onClick:()=>vt(ue.id)})]},ue.id))})]})]})},Ha=({title:n,value:e,icon:t,bgFrom:i,bgTo:o,onClick:l})=>m.jsxs("div",{className:`bg-gradient-to-br ${i} ${o} p-6 rounded-lg shadow-lg transform hover:scale-105 transition-transform duration-300 cursor-pointer`,onClick:l,children:[m.jsxs("div",{className:"flex items-center",children:[t,m.jsx("h2",{className:"ml-3 text-xl font-semibold text-white",children:n})]}),m.jsx("p",{className:"mt-4 text-5xl font-bold text-white",children:e}),m.jsx("p",{className:"text-gray-200",children:n==="Syllabus Progress"?"Overall completion":n==="Classes"?"Classes this month":"Uploaded this month"})]}),ik=()=>{const{user:n}=pt(),[e,t]=U.useState({"Focused Career Guidance":{"Placement Training: 6 points":[],"GATE Training: 6 points":[]},"Guidance for National Level Participation":{"International/National Level Fests/Competitions (Design/Development): 4 points":[],"Facilitating Industrial Tours/Field Visits: 2 points":[]},"Organizing Hackathons/Competitions":{"Hackathons/Design/Development Competitions: 3 points per event":[]},"Student Publications/Patents":{"Indexed Publications/Patents (Student + Faculty)":[]}}),[i,o]=U.useState(null);U.useEffect(()=>{n!=null&&n.id&&l()},[n==null?void 0:n.id]);const l=async()=>{try{if(!(n!=null&&n.id)){console.error("User ID is not available");return}const _=$e(oe,"teachers",n.id),T=await jt(_);T.exists()?o(T.id):console.error("Teacher document does not exist.")}catch(_){console.error("Error fetching teacher ID:",_)}},d=async()=>{if(i)try{const _=tt(Ie(oe,"StudentDevelopment"),Ze("teacherId","==",i)),T=await Ke(_),C={"Mentoring/Counseling Effectiveness":{"Correspondence with Parents (Letter/Phone): 2 points":[],"Frequency of Meetings with Students: 2 points":[],"Initiatives for Slow Learners (Identifying, Tracking, Interventions): 2 points":[],"Problem Solving for Students: 2 points":[],"Student Career Planning: 2 points":[]},"Encouraging Student Innovation/Start-ups":{"Student/Self-Idea: 6 points":[],"Student/Self-Prototype/Innovation: 8 points":[],"Student/Self-Business Model/Start-up: 12 points":[],"Hackathon/Workshop Handholding: 6 points":[]},"Focused Career Guidance":{"Placement Training: 6 points":[],"GATE Training: 6 points":[]},"Guidance for National Level Participation":{"International/National Level Fests/Competitions (Design/Development): 4 points":[],"Facilitating Industrial Tours/Field Visits: 2 points":[]},"Organizing Hackathons/Competitions":{"Hackathons/Design/Development Competitions: 3 points per event":[]},"Student Publications/Patents":{"Indexed Publications/Patents (Student + Faculty)":[]}};T.forEach(N=>{const S=N.data();C[S.category]&&C[S.category][S.className]&&C[S.category][S.className].push({id:N.id,className:S.className,title:S.title,description:S.description,url:S.url,teacherId:S.teacherId,category:S.category})}),t(C)}catch(_){console.error("Error fetching entries:",_)}};U.useEffect(()=>{i&&d()},[i]);const h=_=>_.className!==""&&_.title!==""&&_.description!==""&&_.url!=="",p=async(_,T,C,N,S)=>{if(!i)return;if(!h({className:T,title:C,description:N,url:S})){alert("Please fill all fields before submitting.");return}const A={category:_,className:T,title:C,description:N,url:S,teacherId:i};try{await sr(Ie(oe,"StudentDevelopment"),A),d()}catch(F){console.error("Error adding entry:",F)}},v=["#e7f3ff","#e3fcef","#f9f0ff","#fff7e6","#f0f7ff","#fce4ec","#e8f5e9","#fff3e0","#ede7f6"],E=["#cce7ff","#c3f3e0","#e0cfff","#ffe6cc","#d0e7ff","#f8bbd0","#c8e6c9","#ffe0b2","#d1c4e9"];return m.jsxs("div",{style:{fontFamily:"Arial, sans-serif",padding:"20px",overflowY:"auto",height:"100vh"},children:[m.jsx("b",{children:m.jsx("h1",{className:"text-2xl font-bold text-gray-900 whitespace-nowrap",style:{marginBottom:"20px",fontSize:window.innerWidth>768?"38px":"23px",top:0,backgroundColor:"white",zIndex:1},children:"👨‍🎓 Student Development"})}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"20px",fontSize:"16px"},children:Object.keys(e).map((_,T)=>m.jsx(sk,{title:_,subcategories:e[_],onAdd:(C,N,S,A)=>p(_,C,N,S,A),color:v[T],hoverColor:E[T],fetchEntries:d},_))})]})},sk=({title:n,subcategories:e,onAdd:t,color:i,hoverColor:o,fetchEntries:l})=>{const[d,h]=U.useState(!1),[p,v]=U.useState({id:"",className:"",title:"",description:"",url:""}),[E,_]=U.useState(!1),T=F=>{const{name:D,value:H}=F.target;v({...p,[D]:H})},C=async()=>{if(p.id)try{const F=$e(oe,"StudentDevelopment",p.id);await ks(F,{className:p.className,title:p.title,description:p.description,url:p.url}),l()}catch(F){console.error("Error updating entry:",F)}else t(p.className,p.title,p.description,p.url);v({id:"",className:"",title:"",description:"",url:""}),h(!1)},N=F=>{v({id:F.id,className:F.className,title:F.title,description:F.description,url:F.url}),h(!0)},S=async F=>{try{await Jr($e(oe,"StudentDevelopment",F)),l()}catch(D){console.error("Error deleting entry:",D)}},A=["#ff6347","#4682b4","#32cd32","#ff69b4","#ffa500"];return m.jsxs("div",{style:{borderRadius:"10px",padding:"15px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",backgroundColor:i,transition:"transform 0.2s ease, background-color 0.2s ease",width:"100%",cursor:"pointer"},onMouseEnter:F=>{F.currentTarget.style.transform="scale(1.05)",F.currentTarget.style.backgroundColor=o},onMouseLeave:F=>{F.currentTarget.style.transform="scale(1)",F.currentTarget.style.backgroundColor=i},children:[m.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}}),m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsx("h2",{style:{fontSize:"18px",marginBottom:"10px"},children:n}),m.jsx("button",{onClick:()=>h(!d),style:{margin:"10px 0",padding:"5px 10px",border:"none",borderRadius:"15px",cursor:"pointer",backgroundColor:"#007bff",color:"white"},children:"+"})]}),m.jsxs("div",{children:[m.jsxs("span",{children:[Object.values(e).flat().length," Entries"]}),Object.values(e).flat().length>0&&m.jsx("button",{onClick:()=>_(!E),style:{marginLeft:"10px",padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#007bff",color:"white"},children:"View More"})]}),E&&m.jsxs("div",{children:[m.jsx("div",{style:{marginTop:"10px",display:"grid",gridTemplateColumns:"1fr",gap:"10px",width:"100%",backgroundColor:"#f8f9fa",padding:"10px",borderRadius:"8px",maxHeight:"400px",overflowY:"auto"},children:Object.keys(e).map((F,D)=>m.jsxs("div",{children:[m.jsx("h3",{style:{color:A[D%A.length]},children:m.jsx("b",{children:F})}),e[F].map(H=>m.jsxs("div",{style:{backgroundColor:"#ffffff",padding:"10px",borderRadius:"5px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",width:"auto",maxWidth:"100%"},children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Title:"})," ",H.title]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Description:"})," ",H.description]}),m.jsxs("p",{children:[m.jsx("strong",{children:"URL:"})," ",m.jsx("a",{href:H.url,target:"_blank",rel:"noopener noreferrer",children:"View Resource"})]}),m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"10px"},children:[m.jsx("button",{onClick:()=>N(H),style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#28a745",color:"white"},children:"Edit"}),m.jsx("button",{onClick:()=>S(H.id),style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#dc3545",color:"white"},children:"Delete"})]})]},H.id))]},F))}),m.jsx("button",{onClick:()=>_(!1),style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"grey",color:"white",marginTop:"10px",marginLeft:"800px"},children:"Close"})]}),d&&m.jsxs("div",{style:{margin:"10px 0",display:"flex",flexDirection:"column",gap:"10px"},children:[m.jsxs("select",{name:"className",value:p.className,onChange:T,style:{padding:"8px",border:"1px solid #ddd",borderRadius:"5px"},children:[m.jsx("option",{value:"",disabled:!0,children:"Select Class"}),Object.keys(e).map(F=>m.jsx("option",{value:F,children:F},F))]}),m.jsx("input",{type:"text",name:"title",placeholder:"Topic",value:p.title,onChange:T,style:{padding:"8px",border:"1px solid #ddd",borderRadius:"5px"}}),m.jsx("textarea",{name:"description",placeholder:"Description",value:p.description,onChange:T,style:{padding:"8px",border:"1px solid #ddd",borderRadius:"5px"}}),m.jsx("input",{type:"url",name:"url",placeholder:"Enter Google Drive URL",value:p.url,onChange:T,style:{padding:"8px",border:"1px solid #ddd",borderRadius:"5px"}}),m.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[m.jsx("button",{onClick:C,style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#007bff",color:"white"},children:"Save"}),m.jsx("button",{onClick:()=>h(!1),style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#6c757d",color:"white"},children:"Cancel"})]})]})]})},Ef=async(n,e,t,i)=>{try{const o={actionType:n,entity:e,description:t,timestamp:new Date,userId:i};await sr(Ie(oe,"activityLogs"),o),console.log("Activity logged successfully!")}catch(o){console.error("Error logging activity:",o)}},ok=()=>{const{user:n}=pt(),[e,t]=U.useState({"Course Design":[],"Pedagogical Innovations":[],"Student Feedback":[],"Academic Results":[]}),[i,o]=U.useState(null);U.useEffect(()=>{n!=null&&n.id&&l()},[n==null?void 0:n.id]);const l=async()=>{try{if(!(n!=null&&n.id)){console.error("User ID is not available");return}const E=$e(oe,"teachers",n.id),_=await jt(E);_.exists()?o(_.id):console.error("Teacher document does not exist.")}catch(E){console.error("Error fetching teacher ID:",E)}},d=async()=>{if(i)try{const E=tt(Ie(oe,"TeachingLearning"),Ze("teacherId","==",i)),_=await Ke(E),T={"Course Design":[],"Pedagogical Innovations":[],"Student Feedback":[],"Academic Results":[]};_.forEach(C=>{const N=C.data();T[N.category]&&T[N.category].push({id:C.id,title:N.title,className:N.className,section:N.section,description:N.description,url:N.url,teacherId:N.teacherId,category:N.category})}),t(T)}catch(E){console.error("Error fetching entries:",E)}};U.useEffect(()=>{i&&d()},[i]);const h=async(E,_,T,C,N,S,A)=>{if(!i)return;const F={category:E,title:_,className:T,section:C,description:N,url:S,teacherId:i};try{if(A){const D=$e(oe,"TeachingLearning",A);await ks(D,F),await Ef("Edit","TeachingLearning",`Edited an entry titled "${_}" in the "${E}" category`,(n==null?void 0:n.id)??null)}else await sr(Ie(oe,"TeachingLearning"),F),await Ef("Add","TeachingLearning",`Added a new entry titled "${_}" in the "${E}" category`,(n==null?void 0:n.id)??null);d()}catch(D){console.error(A?"Error updating entry:":"Error adding entry:",D)}},p=["#e7f3ff","#e3fcef","#f9f0ff","#fff7e6"],v=["#cce7ff","#c3f3e0","#e0cfff","#ffe6cc"];return m.jsxs("div",{style:{fontFamily:"Arial, sans-serif",padding:"20px"},children:[m.jsx("b",{children:m.jsx("h1",{className:"text-2xl font-bold text-gray-900 whitespace-nowrap",style:{marginBottom:"20px",fontSize:window.innerWidth>768?"38px":"23px"},children:"📚 Teaching and Learning"})}),m.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"20px",fontSize:"16px",height:"500px",overflowY:"auto"},children:["Course Design","Pedagogical Innovations","Student Feedback","Academic Results"].map((E,_)=>m.jsx(ak,{title:E,entries:e[E],onAddOrUpdate:(T,C,N,S,A,F)=>h(E,T,C,N,S,A,F),color:p[_],hoverColor:v[_],fetchEntries:d},E))})]})},ak=({title:n,entries:e,onAddOrUpdate:t,color:i,hoverColor:o,fetchEntries:l})=>{const[d,h]=U.useState(!1),[p,v]=U.useState({id:"",title:"",className:"",section:"",description:"",url:""}),[E,_]=U.useState(!1),{user:T}=pt(),C=async F=>{const{name:D,value:H}=F.target;v({...p,[D]:H})},N=()=>{t(p.title,p.className,p.section,p.description,p.url,p.id||void 0),v({id:"",title:"",className:"",section:"",description:"",url:""}),h(!1)},S=F=>{v({...F,section:F.section||""}),h(!0)},A=async(F,D,H)=>{try{await Jr($e(oe,"TeachingLearning",F)),await Ef("Delete","TeachingLearning",`Deleted an entry titled "${D}" in the "${H}" category`,(T==null?void 0:T.id)??null),l()}catch(K){console.error("Error deleting entry:",K)}};return m.jsxs("div",{style:{borderRadius:"10px",padding:"15px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",backgroundColor:i,display:"flex",flexDirection:"column",transition:"transform 0.2s ease, background-color 0.2s ease",width:"100%",cursor:"pointer"},onMouseEnter:F=>{F.currentTarget.style.transform="scale(1.05)",F.currentTarget.style.backgroundColor=o},onMouseLeave:F=>{F.currentTarget.style.transform="scale(1)",F.currentTarget.style.backgroundColor=i},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsx("h2",{style:{fontSize:"18px",marginBottom:"10px"},children:n}),m.jsx("button",{onClick:()=>h(!d),style:{margin:"10px 0",padding:"5px 10px",border:"none",borderRadius:"15px",cursor:"pointer",backgroundColor:"#007bff",color:"white"},children:"+"})]}),m.jsxs("div",{children:[m.jsxs("span",{children:[e.length," Entries"]}),e.length>0&&m.jsx("button",{onClick:()=>_(!E),style:{marginLeft:"10px",padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#007bff",color:"white"},children:"View More"})]}),d&&m.jsxs("div",{style:{margin:"10px 0",display:"flex",flexDirection:"column",gap:"10px"},children:[m.jsx("input",{type:"text",name:"title",placeholder:"Subject",value:p.title,onChange:C,style:{padding:"8px",border:"1px solid #ddd",borderRadius:"5px"}}),m.jsxs("select",{name:"className",value:p.className,onChange:C,style:{padding:"8px",border:"1px solid #ddd",borderRadius:"5px"},children:[m.jsx("option",{value:"",disabled:!0,children:"Select Class"}),m.jsx("option",{value:"1st Year",children:"1st Year"}),m.jsx("option",{value:"2nd Year",children:"2nd Year"}),m.jsx("option",{value:"3rd Year",children:"3rd Year"}),m.jsx("option",{value:"4th Year",children:"4th Year"})]}),m.jsxs("select",{name:"section",value:p.section,onChange:C,style:{padding:"8px",border:"1px solid #ddd",borderRadius:"5px"},children:[m.jsx("option",{value:"",disabled:!0,children:"Select Section"}),m.jsx("option",{value:"A",children:"A"}),m.jsx("option",{value:"B",children:"B"}),m.jsx("option",{value:"C",children:"C"})]}),m.jsx("textarea",{name:"description",placeholder:"Description",value:p.description,onChange:C,style:{padding:"8px",border:"1px solid #ddd",borderRadius:"5px"}}),m.jsx("input",{type:"url",name:"url",placeholder:"Enter Google Drive URL",value:p.url,onChange:C,style:{padding:"8px",border:"1px solid #ddd",borderRadius:"5px"}}),m.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[m.jsx("button",{onClick:N,style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#007bff",color:"white"},children:"Save"}),m.jsx("button",{onClick:()=>h(!1),style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#6c757d",color:"white"},children:"Cancel"})]})]}),E&&m.jsxs("div",{children:[m.jsx("div",{style:{marginTop:"10px",display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"10px",width:"100%",backgroundColor:"#f8f9fa",padding:"10px",borderRadius:"8px",maxHeight:"400px",overflowY:"auto"},children:e.map(F=>m.jsxs("div",{style:{backgroundColor:"#ffffff",padding:"10px",borderRadius:"5px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Title:"})," ",F.title]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Class:"})," ",F.className,"-",F.section]})," ",m.jsxs("p",{children:[m.jsx("strong",{children:"Description:"})," ",F.description]}),m.jsxs("p",{children:[m.jsx("strong",{children:"URL:"})," ",m.jsx("a",{href:F.url,target:"_blank",rel:"noopener noreferrer",children:"View Resource"})]}),m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"10px"},children:[m.jsx("button",{onClick:()=>S(F),style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#28a745",color:"white"},children:"Edit"}),m.jsx("button",{onClick:()=>A(F.id,F.title,F.category),style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#dc3545",color:"white"},children:"Delete"})]})]},F.id))}),m.jsx("button",{onClick:()=>_(!1),style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"grey",color:"white",marginTop:"10px",marginLeft:"800px"},children:"Close"})]})]})},xf=async(n,e,t,i)=>{try{const o={actionType:n,entity:e,description:t,timestamp:new Date,userId:i};await sr(Ie(oe,"activityLogs"),o),console.log("Activity logged successfully!")}catch(o){console.error("Error logging activity:",o)}},lk=()=>{const{user:n}=pt(),[e,t]=U.useState({"Publications and Citations":{"Publications in Fundamental/Applied/Educational Research, Articles/Chapters in Books":[],"Citations for the publications in the period of consideration":[]},"Discovery, Innovation, and Patents":{"Patents and Creative Works (including copyrights and trademarks)":[],"Patents Published/Granted (Indian/USA patents) and Innovation Contributions":[]},"Research and Consultancy Projects":{"Sponsored Research Projects":[],"Seed Funding Applications and Grants":[],"Consultancy Projects and Corporate Training":[]},"PhD Supervision and Research Work":{"PhD/Research Work Supervision and Co-Supervision":[],"Registration and Progress of Ph.D. students":[]},"Research Services and Academic Contributions":{"Research-Related Services (Reviewing, Editorial Roles, Organizing Conferences)":[],"Registration in Social Research Networking Platforms (Scopus, ResearchGate, etc.)":[]}}),[i,o]=U.useState(null);U.useEffect(()=>{n!=null&&n.id&&l()},[n==null?void 0:n.id]);const l=async()=>{try{if(!(n!=null&&n.id)){console.error("User ID is not available");return}const _=$e(oe,"teachers",n.id),T=await jt(_);T.exists()?o(T.id):console.error("Teacher document does not exist.")}catch(_){console.error("Error fetching teacher ID:",_)}},d=async()=>{if(i)try{const _=tt(Ie(oe,"ResearchConsultancy"),Ze("teacherId","==",i)),T=await Ke(_),C={"Publications and Citations":{"Publications in Fundamental/Applied/Educational Research, Articles/Chapters in Books":[],"Citations for the publications in the period of consideration":[]},"Discovery, Innovation, and Patents":{"Patents and Creative Works (including copyrights and trademarks)":[],"Patents Published/Granted (Indian/USA patents) and Innovation Contributions":[]},"Research and Consultancy Projects":{"Sponsored Research Projects":[],"Seed Funding Applications and Grants":[],"Consultancy Projects and Corporate Training":[]},"PhD Supervision and Research Work":{"PhD/Research Work Supervision and Co-Supervision":[],"Registration and Progress of Ph.D. students":[]},"Research Services and Academic Contributions":{"Research-Related Services (Reviewing, Editorial Roles, Organizing Conferences)":[],"Registration in Social Research Networking Platforms (Scopus, ResearchGate, etc.)":[]}};T.forEach(N=>{const S=N.data();C[S.category]&&C[S.category][S.className]&&C[S.category][S.className].push({id:N.id,className:S.className,title:S.title,description:S.description,url:S.url,teacherId:S.teacherId,category:S.category})}),t(C)}catch(_){console.error("Error fetching entries:",_)}};U.useEffect(()=>{i&&d()},[i]);const h=_=>_.className!==""&&_.title!==""&&_.description!==""&&_.url!=="",p=async(_,T,C,N,S,A)=>{if(!i)return;if(!h({className:T,title:C,description:N,url:S})){alert("Please fill all fields before submitting.");return}const F={category:_,className:T,title:C,description:N,url:S,teacherId:i};try{if(A){const D=$e(oe,"ResearchConsultancy",A);await ks(D,F),await xf("Edit","ResearchConsultancy",`Edited an entry titled "${C}" in the "${_}" category`,(n==null?void 0:n.id)??null)}else await sr(Ie(oe,"ResearchConsultancy"),F),await xf("Add","ResearchConsultancy",`Added a new entry titled "${C}" in the "${_}" category`,(n==null?void 0:n.id)??null);d()}catch(D){console.error(A?"Error updating entry:":"Error adding entry:",D)}},v=["#e7f3ff","#e3fcef","#f9f0ff","#fff7e6","#f0f7ff"],E=["#cce7ff","#c3f3e0","#e0cfff","#ffe6cc","#d0e7ff"];return m.jsxs("div",{style:{fontFamily:"Arial, sans-serif",padding:"20px"},children:[m.jsx("b",{children:m.jsx("h1",{className:"text-2xl font-bold text-gray-900 whitespace-nowrap",style:{marginBottom:"20px",fontSize:window.innerWidth>768?"38px":"23px"},children:"🔍 Research and Consultancy"})}),m.jsx("div",{className:"cards-container",style:{display:"grid",gap:"20px",fontSize:"16px"},children:Object.keys(e).map((_,T)=>m.jsx(ck,{title:_,subcategories:e[_],onAddOrUpdate:(C,N,S,A,F)=>p(_,C,N,S,A,F),color:v[T],hoverColor:E[T],fetchEntries:d},_))}),m.jsx("style",{children:`
        .cards-container {
          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }
      `})]})},ck=({title:n,subcategories:e,onAddOrUpdate:t,color:i,hoverColor:o,fetchEntries:l})=>{const[d,h]=U.useState(!1),[p,v]=U.useState({id:"",className:"",title:"",description:"",url:""}),[E,_]=U.useState(!1),{user:T}=pt(),C=D=>{const{name:H,value:K}=D.target;v({...p,[H]:K})},N=()=>{t(p.className,p.title,p.description,p.url,p.id||void 0),v({id:"",className:"",title:"",description:"",url:""}),h(!1)},S=D=>{v({...D}),h(!0)},A=async(D,H,K)=>{try{await Jr($e(oe,"ResearchConsultancy",D)),await xf("Delete","ResearchConsultancy",`Deleted an entry titled "${H}" in the "${K}" category`,(T==null?void 0:T.id)??null),l()}catch(ge){console.error("Error deleting entry:",ge)}},F=["#ff6347","#4682b4","#32cd32","#ff69b4","#ffa500"];return m.jsxs("div",{style:{borderRadius:"10px",padding:"15px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",backgroundColor:i,transition:"transform 0.2s ease, background-color 0.2s ease",width:"100%",cursor:"pointer"},onMouseEnter:D=>{D.currentTarget.style.transform="scale(1.05)",D.currentTarget.style.backgroundColor=o},onMouseLeave:D=>{D.currentTarget.style.transform="scale(1)",D.currentTarget.style.backgroundColor=i},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsx("h2",{style:{fontSize:"18px",marginBottom:"10px"},children:n}),m.jsx("button",{onClick:()=>h(!d),style:{margin:"10px 0",padding:"5px 10px",border:"none",borderRadius:"15px",cursor:"pointer",backgroundColor:"#007bff",color:"white"},children:"+"})]}),m.jsxs("div",{children:[m.jsxs("span",{children:[Object.values(e).flat().length," Entries"]}),Object.values(e).flat().length>0&&m.jsx("button",{onClick:()=>_(!E),style:{marginLeft:"10px",padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#007bff",color:"white"},children:"View More"})]}),d&&m.jsxs("div",{style:{margin:"10px 0",display:"flex",flexDirection:"column",gap:"10px"},children:[m.jsxs("select",{name:"className",value:p.className,onChange:C,style:{padding:"8px",border:"1px solid #ddd",borderRadius:"5px"},children:[m.jsx("option",{value:"",disabled:!0,children:"Select Class"}),Object.keys(e).map(D=>m.jsx("option",{value:D,children:D},D))]}),m.jsx("input",{type:"text",name:"title",placeholder:"Topic",value:p.title,onChange:C,style:{padding:"8px",border:"1px solid #ddd",borderRadius:"5px"}}),m.jsx("textarea",{name:"description",placeholder:"Description",value:p.description,onChange:C,style:{padding:"8px",border:"1px solid #ddd",borderRadius:"5px"}}),m.jsx("input",{type:"url",name:"url",placeholder:"Enter Google Drive URL",value:p.url,onChange:C,style:{padding:"8px",border:"1px solid #ddd",borderRadius:"5px"}}),m.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[m.jsx("button",{onClick:N,style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#007bff",color:"white"},children:"Save"}),m.jsx("button",{onClick:()=>h(!1),style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#6c757d",color:"white"},children:"Cancel"})]})]}),E&&m.jsxs("div",{children:[m.jsx("div",{style:{marginTop:"10px",display:"grid",gridTemplateColumns:"1fr",gap:"10px",width:"100%",backgroundColor:"#f8f9fa",padding:"10px",borderRadius:"8px",maxHeight:"400px",overflowY:"auto"},children:Object.keys(e).map((D,H)=>m.jsxs("div",{children:[m.jsx("h3",{style:{color:F[H%F.length]},children:m.jsx("b",{children:D})}),e[D].map(K=>m.jsxs("div",{style:{backgroundColor:"#ffffff",padding:"10px",borderRadius:"5px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",gap:"10px"},children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Title:"})," ",K.title]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Description:"})," ",K.description]}),m.jsxs("p",{children:[m.jsx("strong",{children:"URL:"})," ",m.jsx("a",{href:K.url,target:"_blank",rel:"noopener noreferrer",children:"View Resource"})]}),m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"10px"},children:[m.jsx("button",{onClick:()=>S(K),style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#28a745",color:"white"},children:"Edit"}),m.jsx("button",{onClick:()=>A(K.id,K.title,K.category),style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#dc3545",color:"white"},children:"Delete"})]})]},K.id))]},D))}),m.jsx("button",{onClick:()=>_(!1),style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"grey",color:"white",marginTop:"10px"},children:"Close"})]})]})},Tf=async(n,e,t,i)=>{try{const o={actionType:n,entity:e,description:t,timestamp:new Date,userId:i};await sr(Ie(oe,"activityLogs"),o),console.log("Activity logged successfully!")}catch(o){console.error("Error logging activity:",o)}},uk=()=>{const{user:n}=pt(),[e,t]=U.useState({"Attending Development Programs":{"Refresher Courses":[],"Other Programs (≥ 5 days)":[]},"Organizing Development Programs":{"Refresher Courses (2–4 weeks)":[],"Shorter Workshops/Programs (1 week or other durations)":[]},"Certification Programs":{"NPTEL Certifications":[],"Other Certifications":[]},"Training on Scopus, Web of Science, Clarivate Analytics":{"Each Training/Certification Program":[]},"Membership in Professional Societies":{Membership:[],"Activities Through Societies":[]},"Participation in Sports, Games, Cultural Activities":{Participation:[],"Committee Member Role":[]},"Academic Outreach":{"Keynote Speaker, Resource Person, Guest Lecturer, Invited Talks, Committee/BOS Member":[]},"Extension Activities (Social Outreach)":{"Coordinator/Convener":[],"Committee Member":[]},"Awards, Recognitions, Fellowships":{"Awards/Recognitions from Central/State Agencies, Institutions, or Professional Societies":[]}}),[i,o]=U.useState(null);U.useEffect(()=>{n!=null&&n.id&&l()},[n==null?void 0:n.id]);const l=async()=>{try{if(!(n!=null&&n.id)){console.error("User ID is not available");return}const _=$e(oe,"teachers",n.id),T=await jt(_);T.exists()?o(T.id):console.error("Teacher document does not exist.")}catch(_){console.error("Error fetching teacher ID:",_)}},d=async()=>{if(i)try{const _=tt(Ie(oe,"ProfessionalDevelopment"),Ze("teacherId","==",i)),T=await Ke(_),C={"Attending Development Programs":{"Refresher Courses":[],"Other Programs (≥ 5 days)":[]},"Organizing Development Programs":{"Refresher Courses (2–4 weeks)":[],"Shorter Workshops/Programs (1 week or other durations)":[]},"Certification Programs":{"NPTEL Certifications":[],"Other Certifications":[]},"Training on Scopus, Web of Science, Clarivate Analytics":{"Each Training/Certification Program":[]},"Membership in Professional Societies":{Membership:[],"Activities Through Societies":[]},"Participation in Sports, Games, Cultural Activities":{Participation:[],"Committee Member Role":[]},"Academic Outreach":{"Keynote Speaker, Resource Person, Guest Lecturer, Invited Talks, Committee/BOS Member":[]},"Extension Activities (Social Outreach)":{"Coordinator/Convener":[],"Committee Member":[]},"Awards, Recognitions, Fellowships":{"Awards/Recognitions from Central/State Agencies, Institutions, or Professional Societies":[]}};T.forEach(N=>{const S=N.data();C[S.category]&&C[S.category][S.className]&&C[S.category][S.className].push({id:N.id,className:S.className,title:S.title,description:S.description,url:S.url,teacherId:S.teacherId,category:S.category})}),t(C)}catch(_){console.error("Error fetching entries:",_)}};U.useEffect(()=>{i&&d()},[i]);const h=_=>_.className!==""&&_.title!==""&&_.description!==""&&_.url!=="",p=async(_,T,C,N,S,A)=>{if(!i)return;if(!h({className:T,title:C,description:N,url:S})){alert("Please fill all fields before submitting.");return}const F={category:_,className:T,title:C,description:N,url:S,teacherId:i};try{if(A){const D=$e(oe,"ProfessionalDevelopment",A);await ks(D,F),await Tf("Edit","ProfessionalDevelopment",`Edited an entry titled "${C}" in the "${_}" category`,(n==null?void 0:n.id)??null)}else await sr(Ie(oe,"ProfessionalDevelopment"),F),await Tf("Add","ProfessionalDevelopment",`Added a new entry titled "${C}" in the "${_}" category`,(n==null?void 0:n.id)??null);d()}catch(D){console.error(A?"Error updating entry:":"Error adding entry:",D)}},v=["#e7f3ff","#e3fcef","#f9f0ff","#fff7e6","#f0f7ff","#fce4ec","#e8f5e9","#fff3e0","#ede7f6"],E=["#cce7ff","#c3f3e0","#e0cfff","#ffe6cc","#d0e7ff","#f8bbd0","#c8e6c9","#ffe0b2","#d1c4e9"];return m.jsxs("div",{style:{fontFamily:"Arial, sans-serif",padding:"20px",overflowY:"auto",height:"100vh"},children:[m.jsx("b",{children:m.jsx("h1",{className:"text-2xl font-bold text-gray-900 whitespace-nowrap",style:{marginBottom:"20px",fontSize:window.innerWidth>768?"38px":"20px",top:0,backgroundColor:"white",zIndex:1},children:"👨‍🏫 Professional Development"})}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"20px",fontSize:"16px"},children:Object.keys(e).map((_,T)=>m.jsx(dk,{title:_,subcategories:e[_],onAddOrUpdate:(C,N,S,A,F)=>p(_,C,N,S,A,F),color:v[T],hoverColor:E[T],fetchEntries:d},_))})]})},dk=({title:n,subcategories:e,onAddOrUpdate:t,color:i,hoverColor:o,fetchEntries:l})=>{const[d,h]=U.useState(!1),[p,v]=U.useState({id:"",className:"",title:"",description:"",url:""}),[E,_]=U.useState(!1),{user:T}=pt(),C=D=>{const{name:H,value:K}=D.target;v({...p,[H]:K})},N=()=>{t(p.className,p.title,p.description,p.url,p.id||void 0),v({id:"",className:"",title:"",description:"",url:""}),h(!1)},S=D=>{v({...D}),h(!0)},A=async(D,H,K)=>{try{await Jr($e(oe,"ProfessionalDevelopment",D)),await Tf("Delete","ProfessionalDevelopment",`Deleted an entry titled "${H}" in the "${K}" category`,(T==null?void 0:T.id)??null),l()}catch(ge){console.error("Error deleting entry:",ge)}},F=["#ff6347","#4682b4","#32cd32","#ff69b4","#ffa500"];return m.jsxs("div",{style:{borderRadius:"10px",padding:"15px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",backgroundColor:i,transition:"transform 0.2s ease, background-color 0.2s ease",width:"100%",cursor:"pointer"},onMouseEnter:D=>{D.currentTarget.style.transform="scale(1.05)",D.currentTarget.style.backgroundColor=o},onMouseLeave:D=>{D.currentTarget.style.transform="scale(1)",D.currentTarget.style.backgroundColor=i},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsx("h2",{style:{fontSize:"18px",marginBottom:"10px"},children:n}),m.jsx("button",{onClick:()=>h(!d),style:{margin:"10px 0",padding:"5px 10px",border:"none",borderRadius:"15px",cursor:"pointer",backgroundColor:"#007bff",color:"white"},children:"+"})]}),m.jsxs("div",{children:[m.jsxs("span",{children:[Object.values(e).flat().length," Entries"]}),Object.values(e).flat().length>0&&m.jsx("button",{onClick:()=>_(!E),style:{marginLeft:"10px",padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#007bff",color:"white"},children:"View More"})]}),d&&m.jsxs("div",{style:{margin:"10px 0",display:"flex",flexDirection:"column",gap:"10px"},children:[m.jsxs("select",{name:"className",value:p.className,onChange:C,style:{padding:"8px",border:"1px solid #ddd",borderRadius:"5px"},children:[m.jsx("option",{value:"",disabled:!0,children:"Select Class"}),Object.keys(e).map(D=>m.jsx("option",{value:D,children:D},D))]}),m.jsx("input",{type:"text",name:"title",placeholder:"Topic",value:p.title,onChange:C,style:{padding:"8px",border:"1px solid #ddd",borderRadius:"5px"}}),m.jsx("textarea",{name:"description",placeholder:"Description",value:p.description,onChange:C,style:{padding:"8px",border:"1px solid #ddd",borderRadius:"5px"}}),m.jsx("input",{type:"url",name:"url",placeholder:"Enter Google Drive URL",value:p.url,onChange:C,style:{padding:"8px",border:"1px solid #ddd",borderRadius:"5px"}}),m.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[m.jsx("button",{onClick:N,style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#007bff",color:"white"},children:"Save"}),m.jsx("button",{onClick:()=>h(!1),style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#6c757d",color:"white"},children:"Cancel"})]})]}),E&&m.jsxs("div",{children:[m.jsx("div",{style:{marginTop:"10px",display:"grid",gridTemplateColumns:"1fr",gap:"10px",width:"100%",backgroundColor:"#f8f9fa",padding:"10px",borderRadius:"8px",maxHeight:"400px",overflowY:"auto"},children:Object.keys(e).map((D,H)=>m.jsxs("div",{children:[m.jsx("h3",{style:{color:F[H%F.length]},children:m.jsx("b",{children:D})}),e[D].map(K=>m.jsxs("div",{style:{backgroundColor:"#ffffff",padding:"10px",borderRadius:"5px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",width:"auto",maxWidth:"100%"},children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Title:"})," ",K.title]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Description:"})," ",K.description]}),m.jsxs("p",{children:[m.jsx("strong",{children:"URL:"})," ",m.jsx("a",{href:K.url,target:"_blank",rel:"noopener noreferrer",children:"View Resource"})]}),m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"10px"},children:[m.jsx("button",{onClick:()=>S(K),style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#28a745",color:"white"},children:"Edit"}),m.jsx("button",{onClick:()=>A(K.id,K.title,K.category),style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#dc3545",color:"white"},children:"Delete"})]})]},K.id))]},D))}),m.jsx("button",{onClick:()=>_(!1),style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"grey",color:"white",marginTop:"10px",marginLeft:"auto"},children:"Close"})]})]})},hk=()=>{const{user:n}=pt(),[e,t]=U.useState(0),[i,o]=U.useState(0),[l,d]=U.useState(0),[h,p]=U.useState(0),[v,E]=U.useState(0),[_,T]=U.useState(0),[C,N]=U.useState([]),S=Wo();U.useEffect(()=>{(async()=>{try{const H=await Ke(Ie(oe,"teachers"));t(H.size);const K=Ie(oe,"TeachingLearning"),ge=await Ke(K);o(ge.size);const ce=Ie(oe,"ResearchConsultancy"),O=await Ke(ce);d(O.size);const R=Ie(oe,"ProfessionalDevelopment"),b=await Ke(R);p(b.size);const j=Ie(oe,"InstitutionalDevelopment"),M=await Ke(j);E(M.size);const z=Ie(oe,"StudentDevelopment"),k=await Ke(z);T(k.size)}catch(H){console.error("Error fetching data:",H)}})()},[]),U.useEffect(()=>{(async()=>{try{const H=Ie(oe,"activityLogs"),K=tt(H,Ze("userId","==","admin")),ce=(await Ke(K)).docs.map(b=>{const j=b.data(),M=new Date,z=j.timestamp.toDate(),k=Math.floor((M.getTime()-z.getTime())/1e3);let ie="";return k<60?ie=`${k} seconds ago`:k<3600?ie=`${Math.floor(k/60)} minutes ago`:k<86400?ie=`${Math.floor(k/3600)} hours ago`:ie=`${Math.floor(k/86400)} days ago`,{id:b.id,entity:j.entity,description:j.description,timestamp:ie,diffInSeconds:k}}),O=86400;for(const b of ce)b.diffInSeconds>O&&await Jr($e(oe,"activityLogs",b.id));const R=ce.filter(b=>b.diffInSeconds<=O);R.sort((b,j)=>b.diffInSeconds-j.diffInSeconds),N(R)}catch(H){console.error("Error fetching recent activities:",H)}})()},[]);const A=D=>{S(D)},F=async D=>{try{await Jr($e(oe,"activityLogs",D)),N(H=>H.filter(K=>K.id!==D))}catch(H){console.error("Error removing activity:",H)}};return(n==null?void 0:n.role)==="teacher"?null:m.jsxs("div",{className:"space-y-6 relative",children:[m.jsxs("div",{className:"flex flex-col items-center justify-center",children:[m.jsx("img",{src:J_,alt:"Logo",className:"w-16 h-16 mb-2"}),m.jsx("h1",{className:"text-2xl md:text-4xl font-extrabold text-gray-900 text-center",children:"👨‍💼 Admin Dashboard"})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsx(Eo,{title:"Teachers",value:e,icon:m.jsx(bo,{className:"w-6 h-6 md:w-8 md:h-8 text-white"}),bgFrom:"from-yellow-500",bgTo:"to-white-200",onClick:()=>A("/teachers")}),m.jsx(Eo,{title:"TeachingAndLearning",value:i,icon:m.jsx(zo,{className:"w-6 h-6 md:w-8 md:h-8 text-white"}),bgFrom:"from-blue-500",bgTo:"to-red-200",onClick:()=>A("/Teachinglearning")}),m.jsx(Eo,{title:"ResearchAndConsultancy",value:l,icon:m.jsx(Cu,{className:"w-6 h-6 md:w-8 md:h-8 text-white"}),bgFrom:"from-green-500",bgTo:"to-white-400",onClick:()=>A("/ResearchConsultancy")}),m.jsx(Eo,{title:"ProfessionalDevelopment",value:h,icon:m.jsx(Bo,{className:"w-6 h-6 md:w-8 md:h-8 text-white"}),bgFrom:"from-pink-500",bgTo:"to-blue-400",onClick:()=>A("/AdminProfessionalDevelopment")}),m.jsx(Eo,{title:"InstitutionalDevelopment",value:v,icon:m.jsx(bo,{className:"w-6 h-6 md:w-8 md:h-8 text-white"}),bgFrom:"from-red-500",bgTo:"to-yellow-400",onClick:()=>A("/AdminInstitutionalDevelopment")}),m.jsx(Eo,{title:"StudentDevelopment",value:_,icon:m.jsx(Ru,{className:"w-6 h-6 md:w-8 md:h-8 text-white"}),bgFrom:"from-purple-500",bgTo:"to-white-100",onClick:()=>A("/AdminStudentDevelopment")})]}),m.jsxs("div",{className:"bg-gradient-to-br from-gray-100 to-gray-200 p-6 rounded-lg shadow-lg transform hover:shadow-xl transition-shadow duration-300",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"📋 Recent Activities"}),C.length===0?m.jsx("p",{className:"text-gray-500",children:"No recent activities"}):m.jsx("div",{className:"space-y-4",children:C.slice(0,5).map(D=>m.jsxs("div",{className:"flex items-center bg-white p-4 rounded-lg shadow hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:[D.entity==="TeachingLearning"&&m.jsx(zo,{className:"w-6 h-6 text-blue-500 mr-4"}),D.entity==="ResearchConsultancy"&&m.jsx(Cu,{className:"w-6 h-6 text-green-500 mr-4"}),D.entity==="ProfessionalDevelopment"&&m.jsx(Bo,{className:"w-6 h-6 text-purple-500 mr-4"}),D.entity==="InstitutionalDevelopment"&&m.jsx(bo,{className:"w-6 h-6 text-red-500 mr-4"}),D.entity==="StudentDevelopment"&&m.jsx(Ru,{className:"w-6 h-6 text-yellow-500 mr-4"}),m.jsxs("span",{className:"text-gray-800",children:[m.jsx("b",{children:D.entity}),": ",D.description]}),m.jsx("span",{className:"ml-auto text-sm text-gray-500",children:D.timestamp}),m.jsx(X_,{className:"w-5 h-5 text-gray-500 ml-4 cursor-pointer",onClick:()=>F(D.id)})]},D.id))})]})]})},Eo=({title:n,value:e,icon:t,bgFrom:i,bgTo:o,onClick:l})=>m.jsxs("div",{className:`bg-gradient-to-br ${i} ${o} p-6 rounded-lg shadow-lg transform hover:scale-105 transition-transform duration-300 cursor-pointer`,onClick:l,children:[m.jsxs("div",{className:"flex items-center",children:[t,m.jsx("h2",{className:"ml-3 text-xl font-semibold text-white",children:n})]}),m.jsx("p",{className:"mt-4 text-5xl font-bold text-white",children:e}),m.jsx("p",{className:"text-gray-200",children:n==="Teachers"?"Active teachers":n==="TeachingAndLearning"?"Overall completion":"Uploaded this month"})]}),Wh=async(n,e,t,i)=>{try{const o={actionType:n,entity:e,description:t,timestamp:new Date,userId:"admin"};await sr(Ie(oe,"activityLogs"),o),console.log("Activity logged successfully!")}catch(o){console.error("Error logging activity:",o)}};function fk(){pt();const[n,e]=U.useState([]),[t,i]=U.useState({name:"",email:"",department:""}),[o,l]=U.useState(null),[d,h]=U.useState(!1),[p,v]=U.useState(""),[E,_]=U.useState(null),[T,C]=U.useState(null),[N,S]=U.useState(""),[A,F]=U.useState(""),D=Wo(),H=["CSE","IT","MECH","AIML","CSBS","AIDS","CIVIL","EEE","ECE"];U.useEffect(()=>{K()},[]);const K=async(ie="",Ee="")=>{try{const Ne=tt(Ie(oe,"teachers"),...ie?[Ze("name","==",ie)]:[],...Ee?[Ze("department","==",Ee)]:[]),ne=(await Ke(Ne)).docs.map(pe=>({id:pe.id,...pe.data()}));e(ne)}catch(Ne){console.error("Error fetching teachers: ",Ne),v("Error fetching teacher data.")}},ge=ie=>{const{name:Ee,value:Ne}=ie.target;i({...t,[Ee]:Ne})},ce=ie=>{i({...t,department:ie.target.value})},O=ie=>{const Ee=ie.target.value;S(Ee),K(Ee,A)},R=ie=>{const Ee=ie.target.value;F(Ee),K(N,Ee)},b=async()=>{const{name:ie,email:Ee,department:Ne}=t;if(!ie||!Ee||!Ne){v("Please fill in all fields");return}const Oe=new Date().toLocaleDateString(),ne="webcap";try{if(o)await ks($e(oe,"teachers",o),{name:ie,email:Ee,department:Ne}),e(pe=>pe.map(ae=>ae.id===o?{...ae,name:ie,email:Ee,department:Ne}:ae)),await Wh("Edit","Teacher",`Edited teacher "${ie}" of department "${Ne}`,"admin"),l(null);else{const pe=await sr(Ie(oe,"teachers"),{name:ie,email:Ee,department:Ne,joinDate:Oe,password:ne});e(ae=>[...ae,{id:pe.id,name:ie,email:Ee,department:Ne,joinDate:Oe}]),await Wh("Add","Teacher",`Added new teacher "${ie}" of department "${Ne}`,"admin")}i({name:"",email:"",department:""}),h(!1)}catch{v("Error saving teacher. Please try again.")}},j=ie=>{i({name:ie.name,email:ie.email,department:ie.department}),l(ie.id),h(!0)},M=async ie=>{try{const Ee=n.find(Ne=>Ne.id===ie);await Jr($e(oe,"teachers",ie)),e(Ne=>Ne.filter(Oe=>Oe.id!==ie)),await Wh("Delete","Teacher",`Deleted teacher "${Ee==null?void 0:Ee.name}" of department "${Ee==null?void 0:Ee.department}"`,"admin")}catch(Ee){console.error("Error deleting teacher:",Ee),v("Error deleting teacher. Please try again.")}},z=async ie=>{try{console.log("Fetching teacher details for email:",ie);const Ee=tt(Ie(oe,"teachers"),Ze("email","==",ie)),Ne=await Ke(Ee);if(Ne.empty)v("Teacher not found.");else{const ne=Ne.docs[0].id,pe=await Ke(tt(Ie(oe,"TeachingLearning"),Ze("teacherId","==",ne))),ae=await Ke(tt(Ie(oe,"ResearchConsultancy"),Ze("teacherId","==",ne))),B=await Ke(tt(Ie(oe,"ProfessionalDevelopment"),Ze("teacherId","==",ne))),Y=await Ke(tt(Ie(oe,"StudentDevelopment"),Ze("teacherId","==",ne))),ve=await Ke(tt(Ie(oe,"InstitutionalDevelopment"),Ze("teacherId","==",ne)));C({TeachingLearningcount:pe.size,Researconsultancycount:ae.size,ProfessionalDevelopmentcount:B.size,StudentDevelopmentcount:Y.size,institutionalDevelopmentCount:ve.size}),_(ne)}}catch(Ee){console.error("Error fetching teacher details:",Ee),v("Error fetching teacher details. Please try again.")}},k=(ie,Ee)=>{D(ie,{state:{teacherId:Ee}})};return m.jsxs("div",{className:"space-y-6 overflow-hidden",children:[m.jsx("style",{children:`
      @media (max-width: 768px) {
        .space-y-6 {
        padding: 1rem;
        }
        .flex.justify-between {
        flex-wrap: wrap;
        gap: 1rem;
        }
        .grid.gap-6 {
        grid-template-columns: 1fr;
        }
        .flex-wrap.gap-4 {
        flex-direction: column;
        }
        .overflow-hidden {
        overflow-x: auto;
        }
        .mobile-flex {
        flex-direction: column;
        align-items: flex-start;
        }
        .mobile-flex button {
        margin-top: 1rem;
        }
        .mobile-search-filter {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
        }
        .mobile-search-filter input,
        .mobile-search-filter select {
        width: 100%;
        height: 100%;
        }
      }
      .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      }
      `}),m.jsx("div",{className:"flex justify-between items-center mobile-flex",children:m.jsxs("div",{className:"flex items-center space-x-1",children:[m.jsx("b",{children:m.jsx("h1",{className:"text-2xl font-bold text-gray-900 whitespace-nowrap",style:{marginBottom:"20px",fontSize:window.innerWidth>768?"38px":"23px"},children:"👩‍🏫 Manage Teachers"})}),m.jsxs("button",{className:"flex items-center justify-center w-10 h-10 bg-blue-600 text-white rounded-full hover:bg-blue-700 md:rounded-md md:w-auto md:h-auto md:px-4 md:py-2",style:{marginTop:"-15px"},onClick:()=>{h(!0),l(null)},children:[m.jsx(wf,{className:"w-5 h-6"}),m.jsx("span",{className:"hidden md:inline-block ml-2",children:"Add Teacher"})]})]})}),m.jsxs("div",{className:"flex space-x-1 items-center mobile-search-filter",children:[m.jsx("div",{className:"flex-1",children:m.jsx("input",{type:"text",placeholder:"Search by name",value:N,onChange:O,className:"w-full px-2 py-1 border rounded-md focus:ring focus:ring-blue-300"})}),m.jsx("div",{className:"flex-1",children:m.jsxs("select",{value:A,onChange:R,className:"w-full px-2 py-1 border rounded-md focus:ring focus:ring-blue-300",children:[m.jsx("option",{value:"",children:"Filter by Department"}),H.map(ie=>m.jsx("option",{value:ie,children:ie},ie))]})})]}),d&&m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[m.jsx("h2",{className:"text-2xl font-semibold mb-4",children:o?"Edit Teacher":"Add New Teacher"}),p&&m.jsx("div",{className:"text-red-600 mb-4",children:p}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),m.jsx("input",{type:"text",name:"name",value:t.name,onChange:ge,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter name"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),m.jsx("input",{type:"email",name:"email",value:t.email,onChange:ge,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter email"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),m.jsxs("select",{name:"department",value:t.department,onChange:ce,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[m.jsx("option",{value:"",children:"Select Department"}),H.map(ie=>m.jsx("option",{value:ie,children:ie},ie))]})]}),m.jsx("button",{className:"mt-4 w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700",onClick:b,children:o?"Update Teacher":"Add Teacher"}),m.jsx("button",{className:"mt-2 w-full text-gray-600 py-2 rounded-md hover:bg-gray-100",onClick:()=>h(!1),children:"Cancel"})]})]}),m.jsx("div",{className:"grid gap-6",children:n.map(ie=>m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow card w-full md:w-auto",children:[m.jsxs("div",{className:"flex items-start justify-between",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(Y_,{className:"w-12 h-12 text-gray-400 bg-gray-100 rounded-full p-2"}),m.jsxs("div",{className:"ml-4",children:[m.jsx("h3",{className:"text-lg font-semibold",children:ie.name}),m.jsxs("div",{className:"mt-1 space-y-1",children:[m.jsxs("div",{className:"flex items-center text-gray-600",children:[m.jsx(XA,{className:"w-4 h-4 mr-2"}),m.jsx("span",{children:ie.email})]}),m.jsxs("p",{className:"text-gray-600",children:["Department: ",ie.department]})]})]})]}),m.jsx("div",{className:"text-right",children:m.jsxs("span",{className:"text-sm text-gray-500",children:["Joined: ",new Date(ie.joinDate).toLocaleDateString()]})})]}),m.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[m.jsxs("button",{className:"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600",onClick:()=>j(ie),children:[m.jsx(JA,{className:"w-4 h-4 mr-2 inline-block"}),"Edit"]}),m.jsxs("button",{className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",onClick:()=>M(ie.id),children:[m.jsx(ZA,{className:"w-4 h-4 mr-2 inline-block"}),"Delete"]}),m.jsxs("button",{className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",onClick:()=>z(ie.email),children:[m.jsx(xp,{className:"w-4 h-4 mr-2 inline-block"}),"View More"]})]}),E===ie.id&&T&&m.jsxs("div",{className:"space-y-8 mt-6",children:[m.jsx("h2",{className:"text-2xl font-semibold",children:"📋 Teacher Details"}),m.jsxs("div",{className:"flex flex-wrap gap-4",children:[m.jsxs("div",{className:"flex-1 max-w-[300px] bg-blue-100 p-4 rounded-md shadow card cursor-pointer",onClick:()=>k("/TeachingLearning",ie.id),children:[m.jsx("h3",{className:"text-xl font-semibold text-blue-700",children:"TeachingLearning"}),m.jsxs("p",{className:"mt-2 text-sm",children:["Number of entries: ",T.TeachingLearningcount]})]}),m.jsxs("div",{className:"flex-1 max-w-[300px] bg-green-100 p-4 rounded-md shadow card cursor-pointer",onClick:()=>k("/ResearchConsultancy",ie.id),children:[m.jsx("h3",{className:"text-xl font-semibold text-green-700",children:"ResearchConsultancy"}),m.jsxs("p",{className:"mt-2 text-sm",children:["Number of entries: ",T.Researconsultancycount]})]}),m.jsxs("div",{className:"flex-1 max-w-[300px] bg-purple-100 p-4 rounded-md shadow card cursor-pointer",onClick:()=>k("/AdminProfessionalDevelopment",ie.id),children:[m.jsx("h3",{className:"text-xl font-semibold text-purple-700",children:"ProfessionalDevelopment"}),m.jsxs("p",{className:"mt-2 text-sm",children:["Number of entries: ",T.ProfessionalDevelopmentcount]})]}),m.jsxs("div",{className:"flex-1 max-w-[300px] bg-yellow-100 p-4 rounded-md shadow card cursor-pointer",onClick:()=>k("/AdminStudentDevelopment",ie.id),children:[m.jsx("h3",{className:"text-xl font-semibold text-yellow-700",children:"StudentDevelopment"}),m.jsxs("p",{className:"mt-2 text-sm",children:["Number of entries: ",T.StudentDevelopmentcount]})]}),m.jsxs("div",{className:"flex-1 max-w-[300px] bg-yellow-100 p-4 rounded-md shadow card cursor-pointer",onClick:()=>k("/AdminInstitutionalDevelopment",ie.id),children:[m.jsx("h3",{className:"text-xl font-semibold text-green-700",children:"InstitutionalDevelopment"}),m.jsxs("p",{className:"mt-2 text-sm",children:["Number of entries: ",T.institutionalDevelopmentCount]})]})]}),m.jsx("button",{className:"mt-4 px-4 py-2 bg-gray-300 rounded hover:bg-gray-400",onClick:()=>_(null),children:"Close"})]})]},ie.id))})]})}const If=async(n,e,t,i)=>{try{const o={actionType:n,entity:e,description:t,timestamp:new Date,userId:i};await sr(Ie(oe,"activityLogs"),o),console.log("Activity logged successfully!")}catch(o){console.error("Error logging activity:",o)}},pk=()=>{const{user:n}=pt(),[e,t]=U.useState({"Collaborative Projects and Industry Engagement":{"Industry-Sponsored Labs":[],"Joint Programs with Industry":[],"Student Industry Internships":[],"Inviting Guest Speakers from Industry/Research Centers":[]},"MoUs and Partnerships":{"International/National MoUs/Partnerships":[],"Facilitating MoU Objectives Implementation":[]},"Establishment of Special Labs/Centers of Excellence":{Coordinator:[],"Co-Coordinator":[]},"Development of Software/Apps/Hardware and Alumni Activities":{"Development of Useful Software/Apps/Hardware for the Institute":[],"Active Involvement in Alumni Association Activities (Organizing Meets)":[]},"Institutional/Departmental Responsibilities":{"Institutional Level Roles":[],"Departmental Level Roles":[]}}),[i,o]=U.useState(null);U.useEffect(()=>{n!=null&&n.id&&l()},[n==null?void 0:n.id]);const l=async()=>{try{if(!(n!=null&&n.id)){console.error("User ID is not available");return}const _=$e(oe,"teachers",n.id),T=await jt(_);T.exists()?o(T.id):console.error("Teacher document does not exist.")}catch(_){console.error("Error fetching teacher ID:",_)}},d=async()=>{if(i)try{const _=tt(Ie(oe,"InstitutionalDevelopment"),Ze("teacherId","==",i)),T=await Ke(_),C={"Collaborative Projects and Industry Engagement":{"Industry-Sponsored Labs":[],"Joint Programs with Industry":[],"Student Industry Internships":[],"Inviting Guest Speakers from Industry/Research Centers":[]},"MoUs and Partnerships":{"International/National MoUs/Partnerships":[],"Facilitating MoU Objectives Implementation":[]},"Establishment of Special Labs/Centers of Excellence":{Coordinator:[],"Co-Coordinator":[]},"Development of Software/Apps/Hardware and Alumni Activities":{"Development of Useful Software/Apps/Hardware for the Institute":[],"Active Involvement in Alumni Association Activities (Organizing Meets)":[]},"Institutional/Departmental Responsibilities":{"Institutional Level Roles":[],"Departmental Level Roles":[]}};T.forEach(N=>{const S=N.data();C[S.category]&&C[S.category][S.className]&&C[S.category][S.className].push({id:N.id,className:S.className,title:S.title,description:S.description,url:S.url,teacherId:S.teacherId,category:S.category})}),t(C)}catch(_){console.error("Error fetching entries:",_)}};U.useEffect(()=>{i&&d()},[i]);const h=_=>_.className!==""&&_.title!==""&&_.description!==""&&_.url!=="",p=async(_,T,C,N,S,A)=>{if(!i)return;if(!h({className:T,title:C,description:N,url:S})){alert("Please fill all fields before submitting.");return}const F={category:_,className:T,title:C,description:N,url:S,teacherId:i};try{if(A){const D=$e(oe,"InstitutionalDevelopment",A);await ks(D,F),await If("Edit","InstitutionalDevelopment",`Edited an entry titled "${C}" in the "${_}" category`,(n==null?void 0:n.id)??null)}else await sr(Ie(oe,"InstitutionalDevelopment"),F),await If("Add","InstitutionalDevelopment",`Added a new entry titled "${C}" in the "${_}" category`,(n==null?void 0:n.id)??null);d()}catch(D){console.error(A?"Error updating entry:":"Error adding entry:",D)}},v=["#e7f3ff","#e3fcef","#f9f0ff","#fff7e6","#f0f7ff","#fce4ec","#e8f5e9","#fff3e0","#ede7f6"],E=["#cce7ff","#c3f3e0","#e0cfff","#ffe6cc","#d0e7ff","#f8bbd0","#c8e6c9","#ffe0b2","#d1c4e9"];return m.jsxs("div",{style:{fontFamily:"Arial, sans-serif",padding:"20px",overflowY:"auto",height:"100vh"},children:[m.jsx("b",{children:m.jsx("h1",{className:"text-2xl font-bold text-gray-900 whitespace-nowrap",style:{marginBottom:"20px",fontSize:window.innerWidth>768?"38px":"20px",top:0,backgroundColor:"white",zIndex:1},children:"🏫 Institutional Development"})}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"20px",fontSize:"16px"},children:Object.keys(e).map((_,T)=>m.jsx(mk,{title:_,subcategories:e[_],onAddOrUpdate:(C,N,S,A,F)=>p(_,C,N,S,A,F),color:v[T],hoverColor:E[T],fetchEntries:d},_))})]})},mk=({title:n,subcategories:e,onAddOrUpdate:t,color:i,hoverColor:o,fetchEntries:l})=>{const[d,h]=U.useState(!1),[p,v]=U.useState({id:"",className:"",title:"",description:"",url:""}),[E,_]=U.useState(!1),{user:T}=pt(),C=D=>{const{name:H,value:K}=D.target;v({...p,[H]:K})},N=()=>{t(p.className,p.title,p.description,p.url,p.id||void 0),v({id:"",className:"",title:"",description:"",url:""}),h(!1)},S=D=>{v({...D}),h(!0)},A=async(D,H,K)=>{try{await Jr($e(oe,"InstitutionalDevelopment",D)),await If("Delete","InstitutionalDevelopment",`Deleted an entry titled "${H}" in the "${K}" category`,(T==null?void 0:T.id)??null),l()}catch(ge){console.error("Error deleting entry:",ge)}},F=["#ff6347","#4682b4","#32cd32","#ff69b4","#ffa500"];return m.jsxs("div",{style:{borderRadius:"10px",padding:"15px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",backgroundColor:i,transition:"transform 0.2s ease, background-color 0.2s ease",width:"100%",cursor:"pointer"},onMouseEnter:D=>{D.currentTarget.style.transform="scale(1.05)",D.currentTarget.style.backgroundColor=o},onMouseLeave:D=>{D.currentTarget.style.transform="scale(1)",D.currentTarget.style.backgroundColor=i},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsx("h2",{style:{fontSize:"18px",marginBottom:"10px"},children:n}),m.jsx("button",{onClick:()=>h(!d),style:{margin:"10px 0",padding:"5px 10px",border:"none",borderRadius:"15px",cursor:"pointer",backgroundColor:"#007bff",color:"white"},children:"+"})]}),m.jsxs("div",{children:[m.jsxs("span",{children:[Object.values(e).flat().length," Entries"]}),Object.values(e).flat().length>0&&m.jsx("button",{onClick:()=>_(!E),style:{marginLeft:"10px",padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#007bff",color:"white"},children:"View More"})]}),d&&m.jsxs("div",{style:{margin:"10px 0",display:"flex",flexDirection:"column",gap:"10px"},children:[m.jsxs("select",{name:"className",value:p.className,onChange:C,style:{padding:"8px",border:"1px solid #ddd",borderRadius:"5px"},children:[m.jsx("option",{value:"",disabled:!0,children:"Select Class"}),Object.keys(e).map(D=>m.jsx("option",{value:D,children:D},D))]}),m.jsx("input",{type:"text",name:"title",placeholder:"Topic",value:p.title,onChange:C,style:{padding:"8px",border:"1px solid #ddd",borderRadius:"5px"}}),m.jsx("textarea",{name:"description",placeholder:"Description",value:p.description,onChange:C,style:{padding:"8px",border:"1px solid #ddd",borderRadius:"5px"}}),m.jsx("input",{type:"url",name:"url",placeholder:"Enter Google Drive URL",value:p.url,onChange:C,style:{padding:"8px",border:"1px solid #ddd",borderRadius:"5px"}}),m.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[m.jsx("button",{onClick:N,style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#007bff",color:"white"},children:"Save"}),m.jsx("button",{onClick:()=>h(!1),style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#6c757d",color:"white"},children:"Cancel"})]})]}),E&&m.jsxs("div",{children:[m.jsx("div",{style:{marginTop:"10px",display:"grid",gridTemplateColumns:"1fr",gap:"10px",width:"100%",backgroundColor:"#f8f9fa",padding:"10px",borderRadius:"8px",maxHeight:"400px",overflowY:"auto"},children:Object.keys(e).map((D,H)=>m.jsxs("div",{children:[m.jsx("h3",{style:{color:F[H%F.length]},children:m.jsx("b",{children:D})}),e[D].map(K=>m.jsxs("div",{style:{backgroundColor:"#ffffff",padding:"10px",borderRadius:"5px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",gap:"10px"},children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Title:"})," ",K.title]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Description:"})," ",K.description]}),m.jsxs("p",{children:[m.jsx("strong",{children:"URL:"})," ",m.jsx("a",{href:K.url,target:"_blank",rel:"noopener noreferrer",children:"View Resource"})]}),m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"10px"},children:[m.jsx("button",{onClick:()=>S(K),style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#28a745",color:"white"},children:"Edit"}),m.jsx("button",{onClick:()=>A(K.id,K.title,K.category),style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#dc3545",color:"white"},children:"Delete"})]})]},K.id))]},D))}),m.jsx("button",{onClick:()=>_(!1),style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"grey",color:"white",marginTop:"10px",marginLeft:"800px"},children:"Close"})]})]})},gk=()=>{const{user:n}=pt(),e=ir(),{teacherId:t}=e.state||{},[i,o]=U.useState({"Course Design":[],"Pedagogical Innovations":[],"Student Feedback":[],"Academic Results":[]}),[l,d]=U.useState(t||null);U.useEffect(()=>{n!=null&&n.id&&!t&&h()},[n==null?void 0:n.id,t]);const h=async()=>{try{if(!(n!=null&&n.id)){console.error("User ID is not available");return}const _=$e(oe,"teachers",n.id),T=await jt(_);T.exists()?d(T.id):console.error("Teacher document does not exist.")}catch(_){console.error("Error fetching teacher ID:",_)}},p=async()=>{try{const _=l?tt(Ie(oe,"TeachingLearning"),Ze("teacherId","==",l)):Ie(oe,"TeachingLearning"),T=await Ke(_),C={"Course Design":[],"Pedagogical Innovations":[],"Student Feedback":[],"Academic Results":[]};for(const N of T.docs){const S=N.data();if(C[S.category]){const A={id:N.id,title:S.title,className:S.className,description:S.description,url:S.url,teacherId:S.teacherId,category:S.category};if(!l){const F=$e(oe,"teachers",S.teacherId),D=await jt(F);D.exists()&&(A.teacherName=D.data().name,A.teacherDepartment=D.data().department)}C[S.category].push(A)}}o(C)}catch(_){console.error("Error fetching entries:",_)}};U.useEffect(()=>{p()},[l]);const v=["#e7f3ff","#e3fcef","#f9f0ff","#fff7e6"],E=["#cce7ff","#c3f3e0","#e0cfff","#ffe6cc"];return m.jsxs("div",{style:{fontFamily:"Arial, sans-serif",padding:"20px"},children:[m.jsx("b",{children:m.jsx("h1",{className:"text-2xl font-bold text-gray-900 whitespace-nowrap",style:{marginBottom:"20px",fontSize:window.innerWidth>768?"38px":"23px"},children:"📚 Teaching and Learning"})}),m.jsx("div",{style:{display:"grid",gap:"20px",fontSize:"16px"},children:["Course Design","Pedagogical Innovations","Student Feedback","Academic Results"].map((_,T)=>m.jsx(yk,{title:_,entries:i[_],color:v[T],hoverColor:E[T],showTeacherInfo:!l},_))})]})},yk=({title:n,entries:e,color:t,hoverColor:i,showTeacherInfo:o})=>{const[l,d]=U.useState(!1);return U.useState(0),m.jsxs("div",{style:{borderRadius:"10px",padding:"15px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",backgroundColor:t,transition:"transform 0.2s ease, background-color 0.2s ease",width:"100%",cursor:"pointer"},onMouseEnter:h=>{h.currentTarget.style.transform="scale(1.05)",h.currentTarget.style.backgroundColor=i},onMouseLeave:h=>{h.currentTarget.style.transform="scale(1)",h.currentTarget.style.backgroundColor=t},children:[m.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:m.jsx("h2",{style:{fontSize:"18px",marginBottom:"10px"},children:n})}),m.jsxs("div",{children:[m.jsxs("span",{children:[e.length," Entries"]}),e.length>0&&m.jsx("button",{onClick:()=>d(!l),style:{marginLeft:"10px",padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#007bff",color:"white"},children:"View More"})]}),l&&m.jsxs("div",{children:[m.jsx("div",{style:{marginTop:"10px",display:"flex",overflowX:"auto",gap:"10px",width:"100%",backgroundColor:"#f8f9fa",padding:"10px",borderRadius:"8px",maxHeight:"200px",...window.innerWidth<=768&&{flexDirection:"column",maxWidth:"100%"}},children:e.map((h,p)=>m.jsxs("div",{style:{minWidth:"250px",backgroundColor:"#ffffff",padding:"10px",borderRadius:"5px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",...window.innerWidth<=768&&{marginBottom:"10px"}},children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Title:"})," ",h.title]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Class:"})," ",h.className]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Description:"})," ",h.description]}),m.jsxs("p",{children:[m.jsx("strong",{children:"URL:"})," ",m.jsx("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",children:"View Resource"})]}),o&&m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Teacher Name:"})," ",h.teacherName]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Department:"})," ",h.teacherDepartment]})]})]},h.id))}),m.jsx("button",{onClick:()=>d(!1),style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"grey",color:"white",marginTop:"10px"},children:"Close"})]})]})},vk=()=>{const{user:n}=pt(),e=ir(),{teacherId:t}=e.state||{},[i,o]=U.useState({"Publications and Citations":{"Publications in Fundamental/Applied/Educational Research, Articles/Chapters in Books":[],"Citations for the publications in the period of consideration":[]},"Discovery, Innovation, and Patents":{"Patents and Creative Works (including copyrights and trademarks)":[],"Patents Published/Granted (Indian/USA patents) and Innovation Contributions":[]},"Research and Consultancy Projects":{"Sponsored Research Projects":[],"Seed Funding Applications and Grants":[],"Consultancy Projects and Corporate Training":[]},"PhD Supervision and Research Work":{"PhD/Research Work Supervision and Co-Supervision":[],"Registration and Progress of Ph.D. students":[]},"Research Services and Academic Contributions":{"Research-Related Services (Reviewing, Editorial Roles, Organizing Conferences)":[],"Registration in Social Research Networking Platforms (Scopus, ResearchGate, etc.)":[]}}),[l,d]=U.useState(t||null);U.useEffect(()=>{n!=null&&n.id&&!t&&h()},[n==null?void 0:n.id,t]);const h=async()=>{try{if(!(n!=null&&n.id)){console.error("User ID is not available");return}const _=$e(oe,"teachers",n.id),T=await jt(_);T.exists()?d(T.id):console.error("Teacher document does not exist.")}catch(_){console.error("Error fetching teacher ID:",_)}},p=async()=>{try{const _=l?tt(Ie(oe,"ResearchConsultancy"),Ze("teacherId","==",l)):tt(Ie(oe,"ResearchConsultancy")),T=await Ke(_),C={"Publications and Citations":{"Publications in Fundamental/Applied/Educational Research, Articles/Chapters in Books":[],"Citations for the publications in the period of consideration":[]},"Discovery, Innovation, and Patents":{"Patents and Creative Works (including copyrights and trademarks)":[],"Patents Published/Granted (Indian/USA patents) and Innovation Contributions":[]},"Research and Consultancy Projects":{"Sponsored Research Projects":[],"Seed Funding Applications and Grants":[],"Consultancy Projects and Corporate Training":[]},"PhD Supervision and Research Work":{"PhD/Research Work Supervision and Co-Supervision":[],"Registration and Progress of Ph.D. students":[]},"Research Services and Academic Contributions":{"Research-Related Services (Reviewing, Editorial Roles, Organizing Conferences)":[],"Registration in Social Research Networking Platforms (Scopus, ResearchGate, etc.)":[]}};for(const N of T.docs){const S=N.data();if(C[S.category]&&C[S.category][S.className]){const A={id:N.id,className:S.className,title:S.title,description:S.description,url:S.url,teacherId:S.teacherId,category:S.category};if(!l){const F=$e(oe,"teachers",S.teacherId),D=await jt(F);D.exists()&&(A.teacherName=D.data().name,A.teacherDepartment=D.data().department)}C[S.category][S.className].push(A)}}o(C)}catch(_){console.error("Error fetching entries:",_)}};U.useEffect(()=>{p()},[l]);const v=["#e7f3ff","#e3fcef","#f9f0ff","#fff7e6","#f0f7ff"],E=["#cce7ff","#c3f3e0","#e0cfff","#ffe6cc","#d0e7ff"];return m.jsxs("div",{style:{fontFamily:"Arial, sans-serif",padding:"20px"},children:[m.jsx("b",{children:m.jsx("h1",{className:"text-2xl font-bold text-gray-900 whitespace-nowrap",style:{marginBottom:"20px",fontSize:window.innerWidth>768?"38px":"23px"},children:"🔍 Research and Consultancy"})}),m.jsx("div",{style:{display:"grid",gap:"20px",fontSize:"16px"},children:Object.keys(i).map((_,T)=>m.jsx(_k,{title:_,subcategories:i[_],color:v[T],hoverColor:E[T],showTeacherInfo:!l},_))})]})},_k=({title:n,subcategories:e,color:t,hoverColor:i,showTeacherInfo:o})=>{const[l,d]=U.useState(!1),h=["#ff6347","#4682b4","#32cd32","#ff69b4","#ffa500"];return m.jsxs("div",{style:{borderRadius:"10px",padding:"15px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",backgroundColor:t,transition:"transform 0.2s ease, background-color 0.2s ease",width:"100%",cursor:"pointer"},onMouseEnter:p=>{p.currentTarget.style.transform="scale(1.05)",p.currentTarget.style.backgroundColor=i},onMouseLeave:p=>{p.currentTarget.style.transform="scale(1)",p.currentTarget.style.backgroundColor=t},children:[m.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:m.jsx("h2",{style:{fontSize:"18px",marginBottom:"10px"},children:n})}),m.jsxs("div",{children:[m.jsxs("span",{children:[Object.values(e).flat().length," Entries"]}),Object.values(e).flat().length>0&&m.jsx("button",{onClick:()=>d(!l),style:{marginLeft:"10px",padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#007bff",color:"white"},children:"View More"})]}),l&&m.jsxs("div",{children:[m.jsx("div",{style:{marginTop:"10px",display:"flex",overflowX:"auto",gap:"10px",width:"100%",backgroundColor:"#f8f9fa",padding:"10px",borderRadius:"8px",maxHeight:"200px",...window.innerWidth<=768&&{flexDirection:"column",maxWidth:"100%"}},children:Object.keys(e).map((p,v)=>m.jsxs("div",{children:[m.jsx("h3",{style:{color:h[v%h.length]},children:m.jsx("b",{children:p})}),e[p].map(E=>m.jsxs("div",{style:{minWidth:"250px",backgroundColor:"#ffffff",padding:"10px",borderRadius:"5px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",...window.innerWidth<=768&&{marginBottom:"10px"}},children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Title:"})," ",E.title]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Description:"})," ",E.description]}),m.jsxs("p",{children:[m.jsx("strong",{children:"URL:"})," ",m.jsx("a",{href:E.url,target:"_blank",rel:"noopener noreferrer",children:"View Resource"})]}),o&&m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Teacher Name:"})," ",E.teacherName]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Department:"})," ",E.teacherDepartment]})]})]},E.id))]},p))}),m.jsx("button",{onClick:()=>d(!1),style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"grey",color:"white",marginTop:"10px"},children:"Close"})]})]})},wk=()=>{var E;const{user:n}=pt(),e=ir(),[t,i]=U.useState({"Attending Development Programs":{"Refresher Courses":[],"Other Programs (≥ 5 days)":[]},"Organizing Development Programs":{"Refresher Courses (2–4 weeks)":[],"Shorter Workshops/Programs (1 week or other durations)":[]},"Certification Programs":{"NPTEL Certifications":[],"Other Certifications":[]},"Training on Scopus, Web of Science, Clarivate Analytics":{"Each Training/Certification Program":[]},"Membership in Professional Societies":{Membership:[],"Activities Through Societies":[]},"Participation in Sports, Games, Cultural Activities":{Participation:[],"Committee Member Role":[]},"Academic Outreach":{"Keynote Speaker, Resource Person, Guest Lecturer, Invited Talks, Committee/BOS Member":[]},"Extension Activities (Social Outreach)":{"Coordinator/Convener":[],"Committee Member":[]},"Awards, Recognitions, Fellowships":{"Awards/Recognitions from Central/State Agencies, Institutions, or Professional Societies":[]}}),[o,l]=U.useState(((E=e.state)==null?void 0:E.teacherId)||null);U.useEffect(()=>{n!=null&&n.id&&!o&&d()},[n==null?void 0:n.id]);const d=async()=>{try{if(!(n!=null&&n.id)){console.error("User ID is not available");return}const _=$e(oe,"teachers",n.id),T=await jt(_);T.exists()?l(T.id):console.error("Teacher document does not exist.")}catch(_){console.error("Error fetching teacher ID:",_)}},h=async()=>{try{const _=o?tt(Ie(oe,"ProfessionalDevelopment"),Ze("teacherId","==",o)):Ie(oe,"ProfessionalDevelopment"),T=await Ke(_),C={"Attending Development Programs":{"Refresher Courses":[],"Other Programs (≥ 5 days)":[]},"Organizing Development Programs":{"Refresher Courses (2–4 weeks)":[],"Shorter Workshops/Programs (1 week or other durations)":[]},"Certification Programs":{"NPTEL Certifications":[],"Other Certifications":[]},"Training on Scopus, Web of Science, Clarivate Analytics":{"Each Training/Certification Program":[]},"Membership in Professional Societies":{Membership:[],"Activities Through Societies":[]},"Participation in Sports, Games, Cultural Activities":{Participation:[],"Committee Member Role":[]},"Academic Outreach":{"Keynote Speaker, Resource Person, Guest Lecturer, Invited Talks, Committee/BOS Member":[]},"Extension Activities (Social Outreach)":{"Coordinator/Convener":[],"Committee Member":[]},"Awards, Recognitions, Fellowships":{"Awards/Recognitions from Central/State Agencies, Institutions, or Professional Societies":[]}};for(const N of T.docs){const S=N.data();if(C[S.category]&&C[S.category][S.className]){const A={id:N.id,className:S.className,title:S.title,description:S.description,url:S.url,teacherId:S.teacherId,category:S.category};if(!o){const F=await jt($e(oe,"teachers",S.teacherId));if(F.exists()){const D=F.data();A.teacherName=D.name,A.teacherDepartment=D.department}}C[S.category][S.className].push(A)}}i(C)}catch(_){console.error("Error fetching entries:",_)}};U.useEffect(()=>{h()},[o]);const p=["#e7f3ff","#e3fcef","#f9f0ff","#fff7e6","#f0f7ff","#fce4ec","#e8f5e9","#fff3e0","#ede7f6"],v=["#cce7ff","#c3f3e0","#e0cfff","#ffe6cc","#d0e7ff","#f8bbd0","#c8e6c9","#ffe0b2","#d1c4e9"];return m.jsxs("div",{style:{fontFamily:"Arial, sans-serif",padding:"20px",overflowY:"auto",height:"100vh"},children:[m.jsx("b",{children:m.jsx("h1",{className:"text-2xl font-bold text-gray-900 whitespace-nowrap",style:{marginBottom:"20px",fontSize:window.innerWidth>768?"38px":"20px",top:0,backgroundColor:"white",zIndex:1},children:"👨‍🏫 Professional Development"})}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"20px",fontSize:"16px"},children:Object.keys(t).map((_,T)=>m.jsx(Ek,{title:_,subcategories:t[_],color:p[T],hoverColor:v[T],teacherId:o},_))})]})},Ek=({title:n,subcategories:e,color:t,hoverColor:i,teacherId:o})=>{const[l,d]=U.useState(!1),h=["#ff6347","#4682b4","#32cd32","#ff69b4","#ffa500"];return m.jsxs("div",{style:{borderRadius:"10px",padding:"15px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",backgroundColor:t,transition:"transform 0.2s ease, background-color 0.2s ease",width:"100%",cursor:"pointer"},onMouseEnter:p=>{p.currentTarget.style.transform="scale(1.05)",p.currentTarget.style.backgroundColor=i},onMouseLeave:p=>{p.currentTarget.style.transform="scale(1)",p.currentTarget.style.backgroundColor=t},children:[m.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:m.jsx("h2",{style:{fontSize:"18px",marginBottom:"10px"},children:n})}),m.jsxs("div",{children:[m.jsxs("span",{children:[Object.values(e).flat().length," Entries"]}),Object.values(e).flat().length>0&&m.jsx("button",{onClick:()=>d(!l),style:{marginLeft:"10px",padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#007bff",color:"white"},children:"View More"})]}),l&&m.jsxs("div",{children:[m.jsx("div",{style:{marginTop:"10px",display:"grid",gridTemplateColumns:"1fr",gap:"10px",width:"100%",backgroundColor:"#f8f9fa",padding:"10px",borderRadius:"8px",maxHeight:"400px",overflowY:"auto"},children:Object.keys(e).map((p,v)=>m.jsxs("div",{children:[m.jsx("h3",{style:{color:h[v%h.length]},children:m.jsx("b",{children:p})}),e[p].map(E=>m.jsxs("div",{style:{backgroundColor:"#ffffff",padding:"10px",borderRadius:"5px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Title:"})," ",E.title]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Description:"})," ",E.description]}),m.jsxs("p",{children:[m.jsx("strong",{children:"URL:"})," ",m.jsx("a",{href:E.url,target:"_blank",rel:"noopener noreferrer",children:"View Resource"})]}),!o&&m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Teacher Name:"})," ",E.teacherName]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Department:"})," ",E.teacherDepartment]})]})]},E.id))]},p))}),m.jsx("button",{onClick:()=>d(!1),style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"grey",color:"white",marginTop:"10px"},children:"Close"})]})]})},xk=()=>{var C;const{user:n}=pt(),t=((C=ir().state)==null?void 0:C.teacherId)||null,[i,o]=U.useState({"Mentoring/Counseling Effectiveness":{"Correspondence with Parents (Letter/Phone): 2 points":[],"Frequency of Meetings with Students: 2 points":[],"Initiatives for Slow Learners (Identifying, Tracking, Interventions): 2 points":[],"Problem Solving for Students: 2 points":[],"Student Career Planning: 2 points":[]},"Encouraging Student Innovation/Start-ups":{"Student/Self-Idea: 6 points":[],"Student/Self-Prototype/Innovation: 8 points":[],"Student/Self-Business Model/Start-up: 12 points":[],"Hackathon/Workshop Handholding: 6 points":[]},"Focused Career Guidance":{"Placement Training: 6 points":[],"GATE Training: 6 points":[]},"Guidance for National Level Participation":{"International/National Level Fests/Competitions (Design/Development): 4 points":[],"Facilitating Industrial Tours/Field Visits: 2 points":[]},"Organizing Hackathons/Competitions":{"Hackathons/Design/Development Competitions: 3 points per event":[]},"Student Publications/Patents":{"Indexed Publications/Patents (Student + Faculty)":[]}}),[l,d]=U.useState(t),[h,p]=U.useState([]);U.useEffect(()=>{n!=null&&n.id&&!t&&v()},[n==null?void 0:n.id]);const v=async()=>{try{if(!(n!=null&&n.id)){console.error("User ID is not available");return}const N=$e(oe,"teachers",n.id),S=await jt(N);S.exists()?d(S.id):console.error("Teacher document does not exist.")}catch(N){console.error("Error fetching teacher ID:",N)}},E=async()=>{try{const N=l?tt(Ie(oe,"StudentDevelopment"),Ze("teacherId","==",l)):Ie(oe,"StudentDevelopment"),S=await Ke(N),A={"Mentoring/Counseling Effectiveness":{"Correspondence with Parents (Letter/Phone): 2 points":[],"Frequency of Meetings with Students: 2 points":[],"Initiatives for Slow Learners (Identifying, Tracking, Interventions): 2 points":[],"Problem Solving for Students: 2 points":[],"Student Career Planning: 2 points":[]},"Encouraging Student Innovation/Start-ups":{"Student/Self-Idea: 6 points":[],"Student/Self-Prototype/Innovation: 8 points":[],"Student/Self-Business Model/Start-up: 12 points":[],"Hackathon/Workshop Handholding: 6 points":[]},"Focused Career Guidance":{"Placement Training: 6 points":[],"GATE Training: 6 points":[]},"Guidance for National Level Participation":{"International/National Level Fests/Competitions (Design/Development): 4 points":[],"Facilitating Industrial Tours/Field Visits: 2 points":[]},"Organizing Hackathons/Competitions":{"Hackathons/Design/Development Competitions: 3 points per event":[]},"Student Publications/Patents":{"Indexed Publications/Patents (Student + Faculty)":[]}};for(const F of S.docs){const D=F.data();if(A[D.category]&&A[D.category][D.className]){const H={id:F.id,className:D.className,title:D.title,description:D.description,url:D.url,teacherId:D.teacherId,category:D.category};A[D.category][D.className].push(H)}}if(o(A),!l){const D=Array.from(new Set(S.docs.map(K=>K.data().teacherId))).map(async K=>{const ge=await jt($e(oe,"teachers",K));if(ge.exists()){const{name:ce,department:O}=ge.data();return{id:K,name:ce,department:O}}return null}),H=await Promise.all(D);p(H.filter(K=>K!==null))}}catch(N){console.error("Error fetching entries:",N)}};U.useEffect(()=>{E()},[l]);const _=["#e7f3ff","#e3fcef","#f9f0ff","#fff7e6","#f0f7ff","#fce4ec","#e8f5e9","#fff3e0","#ede7f6"],T=["#cce7ff","#c3f3e0","#e0cfff","#ffe6cc","#d0e7ff","#f8bbd0","#c8e6c9","#ffe0b2","#d1c4e9"];return m.jsxs("div",{style:{fontFamily:"Arial, sans-serif",padding:"20px",overflowY:"auto",height:"100vh"},children:[m.jsx("b",{children:m.jsx("h1",{className:"text-2xl font-bold text-gray-900 whitespace-nowrap",style:{marginBottom:"20px",fontSize:window.innerWidth>768?"38px":"23px",top:0,backgroundColor:"white",zIndex:1},children:"👨‍🎓 Student Development"})}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"20px",fontSize:"16px"},children:Object.keys(i).map((N,S)=>m.jsx(Tk,{title:N,subcategories:i[N],color:_[S],hoverColor:T[S],teacherInfo:h.length>0?h:null,teacherId:l},N))})]})},Tk=({title:n,subcategories:e,color:t,hoverColor:i,teacherInfo:o,teacherId:l})=>{const[d,h]=U.useState(!1),p=["#ff6347","#4682b4","#32cd32","#ff69b4","#ffa500"];return m.jsxs("div",{style:{borderRadius:"10px",padding:"15px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",backgroundColor:t,transition:"transform 0.2s ease, background-color 0.2s ease",width:"100%",cursor:"pointer"},onMouseEnter:v=>{v.currentTarget.style.transform="scale(1.05)",v.currentTarget.style.backgroundColor=i},onMouseLeave:v=>{v.currentTarget.style.transform="scale(1)",v.currentTarget.style.backgroundColor=t},children:[m.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:m.jsx("h2",{style:{fontSize:"18px",marginBottom:"10px"},children:n})}),m.jsxs("div",{children:[m.jsxs("span",{children:[Object.values(e).flat().length," Entries"]}),Object.values(e).flat().length>0&&m.jsx("button",{onClick:()=>h(!d),style:{marginLeft:"10px",padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#007bff",color:"white"},children:"View More"})]}),d&&m.jsxs("div",{children:[m.jsx("div",{style:{marginTop:"10px",display:"grid",gridTemplateColumns:"1fr",gap:"10px",width:"100%",backgroundColor:"#f8f9fa",padding:"10px",borderRadius:"8px",maxHeight:"400px",overflowY:"auto"},children:Object.keys(e).map((v,E)=>m.jsxs("div",{children:[m.jsx("h3",{style:{color:p[E%p.length]},children:m.jsx("b",{children:v})}),e[v].map(_=>{var T,C;return m.jsxs("div",{style:{backgroundColor:"#ffffff",padding:"10px",borderRadius:"5px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Title:"})," ",_.title]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Description:"})," ",_.description]}),m.jsxs("p",{children:[m.jsx("strong",{children:"URL:"})," ",m.jsx("a",{href:_.url,target:"_blank",rel:"noopener noreferrer",children:"View Resource"})]}),!l&&o&&m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Teacher Name:"})," ",(T=o.find(N=>N.id===_.teacherId))==null?void 0:T.name]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Department:"})," ",(C=o.find(N=>N.id===_.teacherId))==null?void 0:C.department]})]})]},_.id)})]},v))}),m.jsx("button",{onClick:()=>h(!1),style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"grey",color:"white",marginTop:"10px"},children:"Close"})]})]})},Ik=()=>{var N;const{user:n}=pt(),t=((N=ir().state)==null?void 0:N.teacherId)||null,[i,o]=U.useState({"Collaborative Projects and Industry Engagement":{"Industry-Sponsored Labs":[],"Joint Programs with Industry":[],"Student Industry Internships":[],"Inviting Guest Speakers from Industry/Research Centers":[]},"MoUs and Partnerships":{"International/National MoUs/Partnerships":[],"Facilitating MoU Objectives Implementation":[]},"Establishment of Special Labs/Centers of Excellence":{Coordinator:[],"Co-Coordinator":[]},"Development of Software/Apps/Hardware and Alumni Activities":{"Development of Useful Software/Apps/Hardware for the Institute":[],"Active Involvement in Alumni Association Activities (Organizing Meets)":[]},"Institutional/Departmental Responsibilities":{"Institutional Level Roles":[],"Departmental Level Roles":[]}}),[l,d]=U.useState(t),[h,p]=U.useState(null);U.useEffect(()=>{n!=null&&n.id&&!t&&v()},[n==null?void 0:n.id]),U.useEffect(()=>{l!==null?(_(),t||E()):_()},[l]);const v=async()=>{try{if(!(n!=null&&n.id)){console.error("User ID is not available");return}const S=$e(oe,"teachers",n.id),A=await jt(S);A.exists()?d(A.id):console.error("Teacher document does not exist.")}catch(S){console.error("Error fetching teacher ID:",S)}},E=async()=>{try{if(!l)return;const S=$e(oe,"teachers",l),A=await jt(S);if(A.exists()){const F=A.data();p({name:F.name,department:F.department})}else console.error("Teacher document does not exist.")}catch(S){console.error("Error fetching teacher details:",S)}},_=async()=>{try{const S=l?tt(Ie(oe,"InstitutionalDevelopment"),Ze("teacherId","==",l)):Ie(oe,"InstitutionalDevelopment"),A=await Ke(S),F={"Collaborative Projects and Industry Engagement":{"Industry-Sponsored Labs":[],"Joint Programs with Industry":[],"Student Industry Internships":[],"Inviting Guest Speakers from Industry/Research Centers":[]},"MoUs and Partnerships":{"International/National MoUs/Partnerships":[],"Facilitating MoU Objectives Implementation":[]},"Establishment of Special Labs/Centers of Excellence":{Coordinator:[],"Co-Coordinator":[]},"Development of Software/Apps/Hardware and Alumni Activities":{"Development of Useful Software/Apps/Hardware for the Institute":[],"Active Involvement in Alumni Association Activities (Organizing Meets)":[]},"Institutional/Departmental Responsibilities":{"Institutional Level Roles":[],"Departmental Level Roles":[]}};for(const D of A.docs){const H=D.data(),K={id:D.id,className:H.className,title:H.title,description:H.description,url:H.url,teacherId:H.teacherId,category:H.category};if(!l){const ge=$e(oe,"teachers",H.teacherId),ce=await jt(ge);if(ce.exists()){const O=ce.data();K.teacherName=O.name,K.teacherDepartment=O.department}}F[H.category]&&F[H.category][H.className]&&F[H.category][H.className].push(K)}o(F)}catch(S){console.error("Error fetching entries:",S)}},T=["#e7f3ff","#e3fcef","#f9f0ff","#fff7e6","#f0f7ff","#fce4ec","#e8f5e9","#fff3e0","#ede7f6"],C=["#cce7ff","#c3f3e0","#e0cfff","#ffe6cc","#d0e7ff","#f8bbd0","#c8e6c9","#ffe0b2","#d1c4e9"];return m.jsxs("div",{style:{fontFamily:"Arial, sans-serif",padding:"20px",overflowY:"auto",height:"100vh"},children:[m.jsx("b",{children:m.jsx("h1",{className:"text-2xl font-bold text-gray-900 whitespace-nowrap",style:{marginBottom:"20px",fontSize:window.innerWidth>768?"38px":"20px",top:0,backgroundColor:"white",zIndex:1},children:"🏫 Institutional Development"})}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"20px",fontSize:"16px"},children:Object.keys(i).map((S,A)=>m.jsx(Sk,{title:S,subcategories:i[S],color:T[A],hoverColor:C[A],teacherDetails:h,teacherId:l},S))})]})},Sk=({title:n,subcategories:e,color:t,hoverColor:i,teacherDetails:o,teacherId:l})=>{const[d,h]=U.useState(!1),p=["#ff6347","#4682b4","#32cd32","#ff69b4","#ffa500"];return m.jsxs("div",{style:{borderRadius:"10px",padding:"15px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",backgroundColor:t,transition:"transform 0.2s ease, background-color 0.2s ease",width:"100%",cursor:"pointer"},onMouseEnter:v=>{v.currentTarget.style.transform="scale(1.05)",v.currentTarget.style.backgroundColor=i},onMouseLeave:v=>{v.currentTarget.style.transform="scale(1)",v.currentTarget.style.backgroundColor=t},children:[m.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:m.jsx("h2",{style:{fontSize:"18px",marginBottom:"10px"},children:n})}),m.jsxs("div",{children:[m.jsxs("span",{children:[Object.values(e).flat().length," Entries"]}),Object.values(e).flat().length>0&&m.jsx("button",{onClick:()=>h(!d),style:{marginLeft:"10px",padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#007bff",color:"white"},children:"View More"})]}),d&&m.jsxs("div",{children:[m.jsx("div",{style:{marginTop:"10px",display:"grid",gridTemplateColumns:"1fr",gap:"10px",width:"100%",backgroundColor:"#f8f9fa",padding:"10px",borderRadius:"8px",maxHeight:"400px",overflowY:"auto"},children:Object.keys(e).map((v,E)=>m.jsxs("div",{children:[m.jsx("h3",{style:{color:p[E%p.length]},children:m.jsx("b",{children:v})}),e[v].map(_=>m.jsxs("div",{style:{backgroundColor:"#ffffff",padding:"10px",borderRadius:"5px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Title:"})," ",_.title]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Description:"})," ",_.description]}),m.jsxs("p",{children:[m.jsx("strong",{children:"URL:"})," ",m.jsx("a",{href:_.url,target:"_blank",rel:"noopener noreferrer",children:"View Resource"})]}),!l&&m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Teacher Name:"})," ",_.teacherName]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Department:"})," ",_.teacherDepartment]})]})]},_.id))]},v))}),m.jsx("button",{onClick:()=>h(!1),style:{padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"grey",color:"white",marginTop:"10px"},children:"Close"})]})]})};function Sn({children:n,allowedRole:e}){const{user:t,isAuthenticated:i}=pt();return!i||!t?m.jsx(iu,{to:"/login",replace:!0}):t.role!==e?m.jsx(iu,{to:"/dashboard",replace:!0}):m.jsx(m.Fragment,{children:n})}function Ck(){const{user:n}=pt();return m.jsx(hx,{children:m.jsxs(ix,{children:[m.jsx(Qt,{path:"/login",element:m.jsx(ek,{})}),m.jsxs(Qt,{path:"/",element:m.jsx(nk,{}),children:[m.jsx(Qt,{index:!0,element:m.jsx(iu,{to:"/dashboard",replace:!0})}),m.jsx(Qt,{path:"dashboard",element:(n==null?void 0:n.role)==="admin"?m.jsx(Sn,{allowedRole:"admin",children:m.jsx(hk,{})}):m.jsx(Sn,{allowedRole:"teacher",children:m.jsx(rk,{})})}),m.jsx(Qt,{path:"StudentDevelopment",element:m.jsx(Sn,{allowedRole:"teacher",children:m.jsx(ik,{})})}),m.jsx(Qt,{path:"Teachingandlearning",element:m.jsx(Sn,{allowedRole:"teacher",children:m.jsx(ok,{})})}),m.jsx(Qt,{path:"ResearchAndConsultancy",element:m.jsx(Sn,{allowedRole:"teacher",children:m.jsx(lk,{})})}),m.jsx(Qt,{path:"ProfessionalDevelopment",element:m.jsx(Sn,{allowedRole:"teacher",children:m.jsx(uk,{})})}),m.jsx(Qt,{path:"InstitutionalDevelopment",element:m.jsx(Sn,{allowedRole:"teacher",children:m.jsx(pk,{})})}),m.jsx(Qt,{path:"teachers",element:m.jsx(Sn,{allowedRole:"admin",children:m.jsx(fk,{})})}),m.jsx(Qt,{path:"TeachingLearning",element:m.jsx(Sn,{allowedRole:"admin",children:m.jsx(gk,{})})}),m.jsx(Qt,{path:"ResearchConsultancy",element:m.jsx(Sn,{allowedRole:"admin",children:m.jsx(vk,{})})}),m.jsx(Qt,{path:"AdminProfessionalDevelopment",element:m.jsx(Sn,{allowedRole:"admin",children:m.jsx(wk,{})})}),m.jsx(Qt,{path:"AdminStudentDevelopment",element:m.jsx(Sn,{allowedRole:"admin",children:m.jsx(xk,{})})}),m.jsx(Qt,{path:"AdminInstitutionalDevelopment",element:m.jsx(Sn,{allowedRole:"admin",children:m.jsx(Ik,{})})})]})]})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(n=>{console.log("Service Worker registered with scope:",n.scope)})});dE.render(m.jsx(Ck,{}),document.getElementById("root"));
